


<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Preparing your code for computational verification - Office of the AEA Data Editor</title>
<meta name="description" content="The steps in this document are being used in a pilot project.   This document describes how to prepare your code for verification, taking into account some of the most frequent issues that the Data Editor and his team have encountered in submitted replication packages.  Overview  We will describe a few checks and edits you should make to your code, in order to ensure maximum reproducibility. We then describe how to test for reproducibility before submitting to the Data Editor. All steps have been tested by undergraduate replicators, and should be easy to implement. Whether they take a lot of time depends on your specific code, but generally, these adjustments can be made by somebody with good knowledge of the code base very quickly.  Much more extensive guidance on the issues addressed here is available at https://larsvilhuber.github.io/self-checking-reproducibility/. We reference specific chapters there at each of the steps.  Checklist  Print off (as PDF or on paper) the following checklist, and tick off each item as you complete it. Provide the completed checklist as part of the replication package.     Main file: A single main file is provided that runs all code.   Path names: All paths in code use / (forward slashes) relative to a single top-level project directory ($rootdir, $basedir, etc.)   Dependencies: All packages/libraries/dependencies are installed via code once.            For Stata, these packages are installed into a subdirectory in the project ($rootdir/ado, $basedir/adofiles, etc.), and used by the code.       For R, renv is used (exceptions made for other package management systems if such a system is explained).       For Python, environments are used (native venv or conda), and the necessary top-level requirements specified (no OS-specific dependencies are included).           Displays: All figures and tables are written out to clearly identified external files, and the authors’ versions, as used in the manuscript, are provided.   Testing in containers: After all changes were made, the code was run using an appropriate authorized container, and the generated log files are provided.     Detailed instructions  Preliminary: Directory structure of a replication package  A generic replication package, housed at /my/computer/users/me/project, might have the following structure:  README.pdf data/    raw/       cps0001.dat    analysis/       combined_data.dta       combined_data.csv       combined_data_codebook.pdf code/   01_readcps.do   02_readfred.do   03_table1-5.do   04_figures1-4.do results/   table1.tex   table2.xlsx   ...   figure1.png   figure2.pdf   where     data/raw has the externally acquired raw data files (not modified by the authors)   data/analysis has the processed data files, generated by the code in this repository.   code has the code files.   results has all the results files.   For illustration purposes, we have used Stata .do files, and outputs in a variety of formats, but the same principles apply to other software, and to any output formats.     Note that we did not specify where the main.do file will be!   Step 1: Main file     You may or may not have a main file. The following should be adapted to your circumstances. You do not need to create a file that is called main.do if you already have one, but you may need to update your existing main file.      Reference: https://larsvilhuber.github.io/self-checking-reproducibility/02-hands_off_running.html   Creating a single main file is straightforward. However, you will want to make some minor edits depending on where, in the above template setup, the file is located:  Scenario A: main is in the code directory  The most frequent scenario we see (which we call Scenario A) amongst economists is that the main file is in the code directory:  README.pdf data/ ... code/   main.do   01_readcps.do   02_readfred.do ...   In this case, the following generic main file will work: 1  local scenario &quot;A&quot;          // Scenario A: main is in code directory local pwd : pwd                     // This always captures the current directory  if &quot;`scenario&#39;&quot; == &quot;A&quot; {             // If in Scenario A, we need to change directory first     cd .. } global rootdir : pwd                // Now capture the directory to use as rootdir display in red &quot;Rootdir has been set to: $rootdir&quot; cd &quot;`pwd&#39;&quot;                            // Return to where we were before and never again use cd  // Now run the rest of the code do &quot;$rootdir/code/01_readcps.do&quot; do &quot;$rootdir/code/02_readfred.do&quot; do &quot;$rootdir/code/03_table1-5.do&quot; do &quot;$rootdir/code/04_figures1-4.do&quot;   Scenario B: main is in the top-level directory  More common in other computational sciences, but also present amongst economists, is that the main file is in the top-level directory:  README.pdf main.do data/ ... code/   01_readcps.do   02_readfred.do ...   In this case, the following generic main file will work:  local scenario &quot;B&quot;          // Scenario B: main is in project top-level directory local pwd : pwd                     // This always captures the current directory  if &quot;`scenario&#39;&quot; == &quot;A&quot; {             // If in Scenario A, we need to change directory first     cd .. } global rootdir : pwd                // Now capture the directory to use as rootdir display in red &quot;Rootdir has been set to: $rootdir&quot; cd &quot;`pwd&#39;&quot;                            // Return to where we were before and never again use cd  // Now run the rest of the code do &quot;$rootdir/code/01_readcps.do&quot; do &quot;$rootdir/code/02_readfred.do&quot; do &quot;$rootdir/code/03_table1-5.do&quot; do &quot;$rootdir/code/04_figures1-4.do&quot;   Important     In neither scenario did we hard-code the path to our project directory /my/computer/users/me/project. This is not an omission, and it is important, because it allows the code to be run on any computer, without modification.                  See the LDI Replication Lab’s setup here. &#8617;">


  <meta name="author" content="AEA Data Editor">
  
  <meta property="article:author" content="AEA Data Editor">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Office of the AEA Data Editor">
<meta property="og:title" content="Preparing your code for computational verification">
<meta property="og:url" content="https://aeadataeditor.github.io/aea-de-guidance/preparing-replication-package">


  <meta property="og:description" content="The steps in this document are being used in a pilot project.   This document describes how to prepare your code for verification, taking into account some of the most frequent issues that the Data Editor and his team have encountered in submitted replication packages.  Overview  We will describe a few checks and edits you should make to your code, in order to ensure maximum reproducibility. We then describe how to test for reproducibility before submitting to the Data Editor. All steps have been tested by undergraduate replicators, and should be easy to implement. Whether they take a lot of time depends on your specific code, but generally, these adjustments can be made by somebody with good knowledge of the code base very quickly.  Much more extensive guidance on the issues addressed here is available at https://larsvilhuber.github.io/self-checking-reproducibility/. We reference specific chapters there at each of the steps.  Checklist  Print off (as PDF or on paper) the following checklist, and tick off each item as you complete it. Provide the completed checklist as part of the replication package.     Main file: A single main file is provided that runs all code.   Path names: All paths in code use / (forward slashes) relative to a single top-level project directory ($rootdir, $basedir, etc.)   Dependencies: All packages/libraries/dependencies are installed via code once.            For Stata, these packages are installed into a subdirectory in the project ($rootdir/ado, $basedir/adofiles, etc.), and used by the code.       For R, renv is used (exceptions made for other package management systems if such a system is explained).       For Python, environments are used (native venv or conda), and the necessary top-level requirements specified (no OS-specific dependencies are included).           Displays: All figures and tables are written out to clearly identified external files, and the authors’ versions, as used in the manuscript, are provided.   Testing in containers: After all changes were made, the code was run using an appropriate authorized container, and the generated log files are provided.     Detailed instructions  Preliminary: Directory structure of a replication package  A generic replication package, housed at /my/computer/users/me/project, might have the following structure:  README.pdf data/    raw/       cps0001.dat    analysis/       combined_data.dta       combined_data.csv       combined_data_codebook.pdf code/   01_readcps.do   02_readfred.do   03_table1-5.do   04_figures1-4.do results/   table1.tex   table2.xlsx   ...   figure1.png   figure2.pdf   where     data/raw has the externally acquired raw data files (not modified by the authors)   data/analysis has the processed data files, generated by the code in this repository.   code has the code files.   results has all the results files.   For illustration purposes, we have used Stata .do files, and outputs in a variety of formats, but the same principles apply to other software, and to any output formats.     Note that we did not specify where the main.do file will be!   Step 1: Main file     You may or may not have a main file. The following should be adapted to your circumstances. You do not need to create a file that is called main.do if you already have one, but you may need to update your existing main file.      Reference: https://larsvilhuber.github.io/self-checking-reproducibility/02-hands_off_running.html   Creating a single main file is straightforward. However, you will want to make some minor edits depending on where, in the above template setup, the file is located:  Scenario A: main is in the code directory  The most frequent scenario we see (which we call Scenario A) amongst economists is that the main file is in the code directory:  README.pdf data/ ... code/   main.do   01_readcps.do   02_readfred.do ...   In this case, the following generic main file will work: 1  local scenario &quot;A&quot;          // Scenario A: main is in code directory local pwd : pwd                     // This always captures the current directory  if &quot;`scenario&#39;&quot; == &quot;A&quot; {             // If in Scenario A, we need to change directory first     cd .. } global rootdir : pwd                // Now capture the directory to use as rootdir display in red &quot;Rootdir has been set to: $rootdir&quot; cd &quot;`pwd&#39;&quot;                            // Return to where we were before and never again use cd  // Now run the rest of the code do &quot;$rootdir/code/01_readcps.do&quot; do &quot;$rootdir/code/02_readfred.do&quot; do &quot;$rootdir/code/03_table1-5.do&quot; do &quot;$rootdir/code/04_figures1-4.do&quot;   Scenario B: main is in the top-level directory  More common in other computational sciences, but also present amongst economists, is that the main file is in the top-level directory:  README.pdf main.do data/ ... code/   01_readcps.do   02_readfred.do ...   In this case, the following generic main file will work:  local scenario &quot;B&quot;          // Scenario B: main is in project top-level directory local pwd : pwd                     // This always captures the current directory  if &quot;`scenario&#39;&quot; == &quot;A&quot; {             // If in Scenario A, we need to change directory first     cd .. } global rootdir : pwd                // Now capture the directory to use as rootdir display in red &quot;Rootdir has been set to: $rootdir&quot; cd &quot;`pwd&#39;&quot;                            // Return to where we were before and never again use cd  // Now run the rest of the code do &quot;$rootdir/code/01_readcps.do&quot; do &quot;$rootdir/code/02_readfred.do&quot; do &quot;$rootdir/code/03_table1-5.do&quot; do &quot;$rootdir/code/04_figures1-4.do&quot;   Important     In neither scenario did we hard-code the path to our project directory /my/computer/users/me/project. This is not an omission, and it is important, because it allows the code to be run on any computer, without modification.                  See the LDI Replication Lab’s setup here. &#8617;">







  <meta property="article:published_time" content="2025-10-02T00:00:00-04:00">






<link rel="canonical" href="https://aeadataeditor.github.io/aea-de-guidance/preparing-replication-package">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "AEA Data Editor",
      "url": "https://aeadataeditor.github.io/"
    
  }
</script>






<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Office of the AEA Data Editor Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="stylesheet" href="/assets/css/custom.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->


    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/images/logo-aea-88x88.jpg" alt="Office of the AEA Data Editor"></a>
        
        <a class="site-title" href="/">
          Office of the AEA Data Editor
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/aea-de-guidance/">START REPLICATION PACKAGE</a>
            </li><li class="masthead__menu-item">
              <a href="/aea-de-guidance/FAQ.html">FAQ</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/">Blog Posts</a>
            </li><li class="masthead__menu-item">
              <a href="/talks/">Talks</a>
            </li><li class="masthead__menu-item">
              <a href="/projects/">Projects</a>
            </li><li class="masthead__menu-item">
              <a href="/surveys/">Surveys</a>
            </li><li class="masthead__menu-item">
              <a href="/publications/">Publications</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="/images/logo-aea.jpg" alt="AEA Data Editor" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">AEA Data Editor</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>The AEA Data Editor’s mission is to design and oversee the AEA journals’ strategy for archiving and curating research data and promoting reproducible research.</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      
        <li>
          <a href="https://mstdn.social/@aeadata" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-mastodon" aria-hidden="true"></i><span class="label">Mastodon</span>
          </a>
        </li>
      

      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/aeadataeditor" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span>
          </a>
        </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Preparing your code for computational verification">
    <meta itemprop="description" content="  The steps in this document are being used in a pilot project.This document describes how to prepare your code for verification, taking into account some of the most frequent issues that the Data Editor and his team have encountered in submitted replication packages.OverviewWe will describe a few checks and edits you should make to your code, in order to ensure maximum reproducibility. We then describe how to test for reproducibility before submitting to the Data Editor. All steps have been tested by undergraduate replicators, and should be easy to implement. Whether they take a lot of time depends on your specific code, but generally, these adjustments can be made by somebody with good knowledge of the code base very quickly.Much more extensive guidance on the issues addressed here is available at https://larsvilhuber.github.io/self-checking-reproducibility/. We reference specific chapters there at each of the steps.ChecklistPrint off (as PDF or on paper) the following checklist, and tick off each item as you complete it. Provide the completed checklist as part of the replication package.  Main file: A single main file is provided that runs all code.  Path names: All paths in code use / (forward slashes) relative to a single top-level project directory ($rootdir, $basedir, etc.)  Dependencies: All packages/libraries/dependencies are installed via code once.          For Stata, these packages are installed into a subdirectory in the project ($rootdir/ado, $basedir/adofiles, etc.), and used by the code.      For R, renv is used (exceptions made for other package management systems if such a system is explained).      For Python, environments are used (native venv or conda), and the necessary top-level requirements specified (no OS-specific dependencies are included).        Displays: All figures and tables are written out to clearly identified external files, and the authors’ versions, as used in the manuscript, are provided.  Testing in containers: After all changes were made, the code was run using an appropriate authorized container, and the generated log files are provided.Detailed instructionsPreliminary: Directory structure of a replication packageA generic replication package, housed at /my/computer/users/me/project, might have the following structure:README.pdfdata/   raw/      cps0001.dat   analysis/      combined_data.dta      combined_data.csv      combined_data_codebook.pdfcode/  01_readcps.do  02_readfred.do  03_table1-5.do  04_figures1-4.doresults/  table1.tex  table2.xlsx  ...  figure1.png  figure2.pdfwhere  data/raw has the externally acquired raw data files (not modified by the authors)  data/analysis has the processed data files, generated by the code in this repository.  code has the code files.  results has all the results files.For illustration purposes, we have used Stata .do files, and outputs in a variety of formats, but the same principles apply to other software, and to any output formats.  Note that we did not specify where the main.do file will be!Step 1: Main file  You may or may not have a main file. The following should be adapted to your circumstances. You do not need to create a file that is called main.do if you already have one, but you may need to update your existing main file.  Reference: https://larsvilhuber.github.io/self-checking-reproducibility/02-hands_off_running.htmlCreating a single main file is straightforward. However, you will want to make some minor edits depending on where, in the above template setup, the file is located:Scenario A: main is in the code directoryThe most frequent scenario we see (which we call Scenario A) amongst economists is that the main file is in the code directory:README.pdfdata/...code/  main.do  01_readcps.do  02_readfred.do...In this case, the following generic main file will work: 1local scenario &quot;A&quot;          // Scenario A: main is in code directorylocal pwd : pwd                     // This always captures the current directoryif &quot;`scenario&#39;&quot; == &quot;A&quot; {             // If in Scenario A, we need to change directory first    cd ..}global rootdir : pwd                // Now capture the directory to use as rootdirdisplay in red &quot;Rootdir has been set to: $rootdir&quot;cd &quot;`pwd&#39;&quot;                            // Return to where we were before and never again use cd// Now run the rest of the codedo &quot;$rootdir/code/01_readcps.do&quot;do &quot;$rootdir/code/02_readfred.do&quot;do &quot;$rootdir/code/03_table1-5.do&quot;do &quot;$rootdir/code/04_figures1-4.do&quot;Scenario B: main is in the top-level directoryMore common in other computational sciences, but also present amongst economists, is that the main file is in the top-level directory:README.pdfmain.dodata/...code/  01_readcps.do  02_readfred.do...In this case, the following generic main file will work:local scenario &quot;B&quot;          // Scenario B: main is in project top-level directorylocal pwd : pwd                     // This always captures the current directoryif &quot;`scenario&#39;&quot; == &quot;A&quot; {             // If in Scenario A, we need to change directory first    cd ..}global rootdir : pwd                // Now capture the directory to use as rootdirdisplay in red &quot;Rootdir has been set to: $rootdir&quot;cd &quot;`pwd&#39;&quot;                            // Return to where we were before and never again use cd// Now run the rest of the codedo &quot;$rootdir/code/01_readcps.do&quot;do &quot;$rootdir/code/02_readfred.do&quot;do &quot;$rootdir/code/03_table1-5.do&quot;do &quot;$rootdir/code/04_figures1-4.do&quot;Important  In neither scenario did we hard-code the path to our project directory /my/computer/users/me/project. This is not an omission, and it is important, because it allows the code to be run on any computer, without modification.            See the LDI Replication Lab’s setup here. &#8617;      ">
    <meta itemprop="datePublished" content="2025-10-02T00:00:00-04:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Preparing your code for computational verification
</h1>
          
        
        
        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Published:</strong> <time datetime="2025-10-02T00:00:00-04:00">October 02, 2025</time></p>
        
        
        
             
        
    
        </header>
      

      <section class="page__content" itemprop="text">
       
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On This Page</h4></header>
              <ul class="toc__menu"><li><a href="#overview">Overview</a></li><li><a href="#checklist">Checklist</a></li><li><a href="#detailed-instructions">Detailed instructions</a><ul><li><a href="#preliminary-directory-structure-of-a-replication-package">Preliminary: Directory structure of a replication package</a></li><li><a href="#step-1-main-file">Step 1: Main file</a><ul><li><a href="#scenario-a-main-is-in-the-code-directory">Scenario A: main is in the code directory</a></li><li><a href="#scenario-b-main-is-in-the-top-level-directory">Scenario B: main is in the top-level directory</a></li><li><a href="#important">Important</a></li></ul></li></ul></li></ul>

            </nav>
          </aside>
        
        

      
        <blockquote>
  <p>The steps in this document are being used in a pilot project.</p>
</blockquote>

<p>This document describes how to prepare your code for verification, taking into account some of the most frequent issues that the Data Editor and his team have encountered in submitted replication packages.</p>

<h2 id="overview">Overview</h2>

<p>We will describe a few checks and edits you should make to your code, in order to ensure maximum reproducibility. We then describe how to test for reproducibility before submitting to the Data Editor. All steps have been tested by undergraduate replicators, and should be easy to implement. Whether they take a lot of time depends on your specific code, but generally, these adjustments can be made by somebody with good knowledge of the code base very quickly.</p>

<p>Much more extensive guidance on the issues addressed here is available at <a href="https://larsvilhuber.github.io/self-checking-reproducibility/">https://larsvilhuber.github.io/self-checking-reproducibility/</a>. We reference specific chapters there at each of the steps.</p>

<h2 id="checklist">Checklist</h2>

<p>Print off (as PDF or on paper) the following checklist, and tick off each item as you complete it. Provide the completed checklist as part of the replication package.</p>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><strong>Main file</strong>: A single main file is provided that runs all code.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><strong>Path names</strong>: All paths in code use <code class="language-plaintext highlighter-rouge">/</code> (forward slashes) relative to a single top-level project directory (<code class="language-plaintext highlighter-rouge">$rootdir</code>, <code class="language-plaintext highlighter-rouge">$basedir</code>, etc.)</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><strong>Dependencies</strong>: All packages/libraries/dependencies are installed via code once.
    <ul class="task-list">
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />For Stata, these packages are installed into a subdirectory in the project (<code class="language-plaintext highlighter-rouge">$rootdir/ado</code>, <code class="language-plaintext highlighter-rouge">$basedir/adofiles</code>, etc.), and used by the code.</li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />For R, <code class="language-plaintext highlighter-rouge">renv</code> is used (exceptions made for other package management systems if such a system is explained).</li>
      <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />For Python, environments are used (native <code class="language-plaintext highlighter-rouge">venv</code> or <code class="language-plaintext highlighter-rouge">conda</code>), and the necessary top-level requirements specified (no OS-specific dependencies are included).</li>
    </ul>
  </li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><strong>Displays</strong>: All figures and tables are written out to clearly identified external files, and the authors’ versions, as used in the manuscript, are provided.</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" /><strong>Testing in containers</strong>: After all changes were made, the code was run using an appropriate <strong>authorized</strong> container, and the generated log files are provided.</li>
</ul>

<hr />

<h2 id="detailed-instructions">Detailed instructions</h2>

<h3 id="preliminary-directory-structure-of-a-replication-package">Preliminary: Directory structure of a replication package</h3>

<p>A generic replication package, housed at <code class="language-plaintext highlighter-rouge">/my/computer/users/me/project</code>, might have the following structure:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>README.pdf
data/
   raw/
      cps0001.dat
   analysis/
      combined_data.dta
      combined_data.csv
      combined_data_codebook.pdf
code/
  01_readcps.do
  02_readfred.do
  03_table1-5.do
  04_figures1-4.do
results/
  table1.tex
  table2.xlsx
  ...
  figure1.png
  figure2.pdf
</code></pre></div></div>

<p>where</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">data/raw</code> has the externally acquired raw data files (not modified by the authors)</li>
  <li><code class="language-plaintext highlighter-rouge">data/analysis</code> has the processed data files, generated by the code in this repository.</li>
  <li><code class="language-plaintext highlighter-rouge">code</code> has the code files.</li>
  <li><code class="language-plaintext highlighter-rouge">results</code> has all the results files.</li>
</ul>

<p>For illustration purposes, we have used Stata <code class="language-plaintext highlighter-rouge">.do</code> files, and outputs in a variety of formats, but the same principles apply to other software, and to any output formats.</p>

<blockquote>
  <p>Note that we did not specify where the <code class="language-plaintext highlighter-rouge">main.do</code> file will be!</p>
</blockquote>

<h3 id="step-1-main-file">Step 1: Main file</h3>

<blockquote>
  <p>You may or may not have a main file. The following should be adapted to your circumstances. You do not need to create a file that is called <code class="language-plaintext highlighter-rouge">main.do</code> if you already have one, but you may need to update your existing main file.</p>
</blockquote>

<blockquote>
  <p>Reference: <a href="https://larsvilhuber.github.io/self-checking-reproducibility/02-hands_off_running.html">https://larsvilhuber.github.io/self-checking-reproducibility/02-hands_off_running.html</a></p>
</blockquote>

<p>Creating a single main file is straightforward. However, you will want to make some minor edits depending on where, in the above template setup, the file is located:</p>

<h4 id="scenario-a-main-is-in-the-code-directory">Scenario A: <code class="language-plaintext highlighter-rouge">main</code> is in the <code class="language-plaintext highlighter-rouge">code</code> directory</h4>

<p>The most frequent scenario we see (which we call <strong>Scenario A</strong>) amongst economists is that the main file is in the <code class="language-plaintext highlighter-rouge">code</code> directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>README.pdf
data/
...
code/
  main.do
  01_readcps.do
  02_readfred.do
...
</code></pre></div></div>

<p>In this case, the following generic main file will work: <sup id="fnref:scenarioa-main"><a href="#fn:scenarioa-main" class="footnote" rel="footnote" role="doc-noteref">1</a></sup></p>

<div class="language-stata highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">local</span><span class="w"> </span><span class="n">scenario</span><span class="w"> </span><span class="s2">"A"</span><span class="w">          </span><span class="c1">// Scenario A: main is in code directory</span>
<span class="kt">local</span><span class="w"> </span><span class="n">pwd</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">pwd</span><span class="w">                     </span><span class="c1">// This always captures the current directory</span>

<span class="kr">if</span><span class="w"> </span><span class="s2">"`scenario'"</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"A"</span><span class="w"> </span><span class="p">{</span><span class="w">             </span><span class="c1">// If in Scenario A, we need to change directory first</span>
<span class="k">    cd</span><span class="w"> </span><span class="o">..</span>
<span class="p">}</span>
<span class="kt">global</span><span class="w"> </span><span class="n">rootdir</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">pwd</span><span class="w">                </span><span class="c1">// Now capture the directory to use as rootdir</span>
<span class="k">display</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="s2">"Rootdir has been set to: $rootdir"</span>
<span class="k">cd</span><span class="w"> </span><span class="s2">"`pwd'"</span><span class="w">                            </span><span class="c1">// Return to where we were before and never again use cd</span>

<span class="c1">// Now run the rest of the code</span>
<span class="k">do</span><span class="w"> </span><span class="s2">"$rootdir/code/01_readcps.do"</span>
<span class="k">do</span><span class="w"> </span><span class="s2">"$rootdir/code/02_readfred.do"</span>
<span class="k">do</span><span class="w"> </span><span class="s2">"$rootdir/code/03_table1-5.do"</span>
<span class="k">do</span><span class="w"> </span><span class="s2">"$rootdir/code/04_figures1-4.do"</span>
</code></pre></div></div>

<h4 id="scenario-b-main-is-in-the-top-level-directory">Scenario B: <code class="language-plaintext highlighter-rouge">main</code> is in the top-level directory</h4>

<p>More common in other computational sciences, but also present amongst economists, is that the main file is in the top-level directory:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>README.pdf
main.do
data/
...
code/
  01_readcps.do
  02_readfred.do
...
</code></pre></div></div>

<p>In this case, the following generic main file will work:</p>

<div class="language-stata highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">local</span><span class="w"> </span><span class="n">scenario</span><span class="w"> </span><span class="s2">"B"</span><span class="w">          </span><span class="c1">// Scenario B: main is in project top-level directory</span>
<span class="kt">local</span><span class="w"> </span><span class="n">pwd</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">pwd</span><span class="w">                     </span><span class="c1">// This always captures the current directory</span>

<span class="kr">if</span><span class="w"> </span><span class="s2">"`scenario'"</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"A"</span><span class="w"> </span><span class="p">{</span><span class="w">             </span><span class="c1">// If in Scenario A, we need to change directory first</span>
<span class="k">    cd</span><span class="w"> </span><span class="o">..</span>
<span class="p">}</span>
<span class="kt">global</span><span class="w"> </span><span class="n">rootdir</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">pwd</span><span class="w">                </span><span class="c1">// Now capture the directory to use as rootdir</span>
<span class="k">display</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="n">red</span><span class="w"> </span><span class="s2">"Rootdir has been set to: $rootdir"</span>
<span class="k">cd</span><span class="w"> </span><span class="s2">"`pwd'"</span><span class="w">                            </span><span class="c1">// Return to where we were before and never again use cd</span>

<span class="c1">// Now run the rest of the code</span>
<span class="k">do</span><span class="w"> </span><span class="s2">"$rootdir/code/01_readcps.do"</span>
<span class="k">do</span><span class="w"> </span><span class="s2">"$rootdir/code/02_readfred.do"</span>
<span class="k">do</span><span class="w"> </span><span class="s2">"$rootdir/code/03_table1-5.do"</span>
<span class="k">do</span><span class="w"> </span><span class="s2">"$rootdir/code/04_figures1-4.do"</span>
</code></pre></div></div>

<h4 id="important">Important</h4>

<blockquote>
  <p>In neither scenario did we hard-code the path to our project directory <code class="language-plaintext highlighter-rouge">/my/computer/users/me/project</code>. This is not an omission, and it is important, because it allows the code to be run on any computer, without modification.</p>
</blockquote>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:scenarioa-main">
      <p>See the LDI Replication Lab’s setup <a href="https://github.com/AEADataEditor/replication-template/blob/master/template-config.do#L71">here</a>. <a href="#fnref:scenarioa-main" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>

        
      </section>

      <footer class="page__meta">
        
        


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Published:</strong> <time datetime="2025-10-02T00:00:00-04:00">October 2, 2025</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Preparing+your+code+for+computational+verification%20https%3A%2F%2Faeadataeditor.github.io%2Faea-de-guidance%2Fpreparing-replication-package" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Faeadataeditor.github.io%2Faea-de-guidance%2Fpreparing-replication-package" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->
<div class="page__footer-follow page__footer-custom">
    <ul class="social-icons">
      <li><strong>Suggestions and comments:</strong></li>
             <li><a href="https://github.com/AEADataEditor/aeadataeditor.github.io/blob/main/_guidance/preparing-replication-package.md"><i class="fab fa-fw fa-github" aria-hidden="true"></i> Edit</a></li>
             <li><a href="https://twitter.com/messages/compose?recipient_id=1115329171121680385" data-screen-name="@AEAData">
              <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> @AEAData</a></li>
             <li><a rel="me" href="https://mstdn.social/@aeadata"><i class="fab fa-fw fa-mastodon" aria-hidden="true"></i>aeadata@mstdn.social</a></li>
            <li><a href="https://www.aeaweb.org/contact"><i class="fas fa-paper-plane" aria-hidden="true"></i> Email</a></li>

    </ul>
  </div>
  
<!-- end custom footer snippets -->

        <div class="page__footer-follow">
  <ul class="social-icons">
    <!-- 
      <li><strong>Follow:</strong></li>
     -->
    <li><strong><a href="/disclosures.html">Disclosures</a></strong></li>

    
      
        
          <li><a href="https://bsky.app/profile/aeadata.bsky.social" rel="me nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Bluesky</a></li>
        
      
        
          <li><a href="https://mstdn.social/@aeadata" rel="me nofollow noopener noreferrer"><i class="fab fa-fw fa-mastodon" aria-hidden="true"></i> Mastodon</a></li>
        
      
        
          <li><a href="https://github.com/aeadataeditor" rel="me nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    

    
      <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 American Economic Association. 
  <a href="https://github.com/AEADataEditor/aeadataeditor.github.io/blob/main/LICENSE.md">
    
    <img src="/images/ccby80x15.png" width="80px" height="15px" alt="CC BY 4.0" />
    </a>
  
   Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.
</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>










  </body>
</html>
