<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.3">Jekyll</generator><link href="https://aeadataeditor.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://aeadataeditor.github.io/" rel="alternate" type="text/html" /><updated>2024-08-06T17:53:05-04:00</updated><id>https://aeadataeditor.github.io/feed.xml</id><title type="html">Office of the AEA Data Editor</title><subtitle>(current: Lars Vilhuber)</subtitle><author><name>AEA Data Editor</name></author><entry><title type="html">On the use and reuse of within-project code</title><link href="https://aeadataeditor.github.io/posts/2024-07-19-functions-and-code-duplication" rel="alternate" type="text/html" title="On the use and reuse of within-project code" /><published>2024-07-19T00:00:00-04:00</published><updated>2024-07-19T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/functions-and-code-duplication</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-07-19-functions-and-code-duplication"><![CDATA[<p>We often see researchers handle variants of their analysis by copying and pasting code, or by copying code files into separate directories, and making only minimal modifications. Some folks do this for robustness checks - same data, different analysis method, or a variant of the dependent variable - others for simulation of various scenarios - an economy without banks, an economy with credit-constrained banks, an economy with unconstrained banks. I won’t point to particular examples, to protect the (somewhat) innocent, but this is not a good idea.</p>

<!-- more -->

<p>It introduces lots of failure points - not necessarily in the final package, but in the development process.</p>

<h2 id="the-example">The example</h2>

<p>Consider that you are halfway through your project. You have a base model, and three variants thereof. Each of which is the base model, copied into three different directories, with minimal modifications in the code. For sake of clarity, and with no loss of generality intended:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code/
    base-model/
            base-model.m
    robustness-check-1/
            base-model.m
    robustness-check-2/
            base-model.m
    robustness-check-3/
            base-model.m
</code></pre></div></div>

<p>where a <code class="language-plaintext highlighter-rouge">diff</code> between <code class="language-plaintext highlighter-rouge">base-model.m</code> and <code class="language-plaintext highlighter-rouge">robustness-check-1/base-model.m</code> would show only a few lines changed:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff code/base-model/base-model.m code/robustness-check-1/base-model.m
</span><span class="p">13073c13073
</span><span class="gd">&lt; a=1;
</span><span class="p">---
</span><span class="gi">&gt; a=2;
</span></code></pre></div></div>

<blockquote>
  <p>Note: the change would appear to be in line 13073, which is awfully subtle… this is inspired by real-life examples!</p>
</blockquote>

<h2 id="the-problem">The problem</h2>

<p>Now imagine that your thesis advisor, or a reviewer, identifies a key problem in the implemented algorithm. You fix it in <code class="language-plaintext highlighter-rouge">base-model.m</code>, but now need to fix it in all the other modified copies too. Will there be any typos when you implement the patch? What if there are not three robustness checks, but 30? Or 300 different parameterizations of a simulation?</p>

<p>The techy programmer might decide to do this with <code class="language-plaintext highlighter-rouge">patch</code> in conjunction with <code class="language-plaintext highlighter-rouge">git</code>, but that already counts as advanced functionality (I probably lost a lot of readers with the first part of that sentence…)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># create a patch from the updates to the base model</span>
git diff d362f6..3bd22 <span class="o">&gt;</span> patch.diff
<span class="c"># apply the patch to the robustness check</span>
patch code/robustness-check-1/base-model.m &lt; patch.diff
</code></pre></div></div>

<p>but that is not a robust solution that scales to the 30 or 300 robustness checks.</p>

<h2 id="a-possible-solution">A possible solution</h2>

<p>The core solution is to apply elementary best programming practices: <strong>write functions</strong>.<sup id="fnref:functions" role="doc-noteref"><a href="#fn:functions" class="footnote" rel="footnote">1</a></sup></p>

<p>So should one go about the above problem? My rule of thumb is:</p>

<ul>
  <li>Copy code once, fine, don’t do it again.</li>
  <li>Copy it twice, stop, and create a function.</li>
  <li>Copy it three times: don’t even go there!</li>
</ul>

<p>Assuming that you are using MATLAB (where we seem to see this often), you should treat the core model code as a “function” (even if you do not explicitly program it that way), and then call that “function” multiple times. In a nutshell:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code/
    core-simulation/
            parametrized-simulation.m
    base-model.m
    robustness-check-1.m
    robustness-check-2.m
    robustness-check-3.m
</code></pre></div></div>

<p>where</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% base-model.m</span>

<span class="c1">% We set the base model to have the following parameters,</span>
<span class="c1">% as per Section 2 of the paper:</span>
<span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
<span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>

<span class="c1">% We then call the core simulation code</span>
<span class="n">parametrized</span><span class="o">-</span><span class="n">simulation</span>
</code></pre></div></div>

<p>will call the code in “parametrized-simulation.m” with parameters <code class="language-plaintext highlighter-rouge">a,b,c</code> already set. The simulation itself assumes those parameters are set.<sup id="fnref:proper-function" role="doc-noteref"><a href="#fn:proper-function" class="footnote" rel="footnote">2</a></sup></p>

<p>The robustness checks might then have</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% robustness-check-1.m</span>

<span class="c1">% We set the model to have the following parameters,</span>
<span class="c1">% as per Section 3 of the paper:</span>

<span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span> <span class="c1">% This differs from the base model</span>
<span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
<span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>

<span class="c1">% We then call the core simulation code</span>
<span class="n">parametrized</span><span class="o">-</span><span class="n">simulation</span>
</code></pre></div></div>

<p>or go through a loop of multiple values:</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% robustness-check-2.m</span>


<span class="c1">% We set the model to have the following parameters,</span>
<span class="c1">% as per Section 4 of the paper:</span>

<span class="n">b</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>
<span class="n">c</span><span class="o">=</span><span class="mi">4</span><span class="p">;</span>

<span class="c1">% We now explore the space of a within this context.</span>
<span class="k">for</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="mi">10</span>
    <span class="n">parametrized</span><span class="o">-</span><span class="n">simulation</span>
<span class="k">end</span>

<span class="c1">% Summarize results from exploration</span>

<span class="n">summarize</span><span class="o">-</span><span class="n">results</span>

</code></pre></div></div>

<h2 id="other-languages">Other languages</h2>

<p>Is that a MATLAB-specific problem? No. We see similar issues in Stata, R, Python, and other languages. The core solution is the same: write functions, and call them multiple times, instead of copying code around, and hard-coding parameters.</p>

<h2 id="other-situations">Other situations</h2>

<p>The above example had continuous (well, kind of) parameter spaces. What if they are discontinuous? You can still loop over a whole set of specifications by storing them in a file - yes, an Excel file is fine! - and reading them in (in MATLAB, <a href="https://www.mathworks.com/help/matlab/import_export/ways-to-import-spreadsheets.html"><code class="language-plaintext highlighter-rouge">readtable</code></a>). For example,</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% Read the Excel spreadsheet</span>
<span class="p">[</span><span class="n">num</span><span class="p">,</span> <span class="n">txt</span><span class="p">,</span> <span class="n">raw</span><span class="p">]</span> <span class="o">=</span> <span class="nb">xlsread</span><span class="p">(</span><span class="s1">'your_spreadsheet.xlsx'</span><span class="p">);</span>

<span class="c1">% Get the number of rows in the data</span>
<span class="p">[</span><span class="n">numRows</span><span class="p">,</span> <span class="o">~</span><span class="p">]</span> <span class="o">=</span> <span class="nb">size</span><span class="p">(</span><span class="n">raw</span><span class="p">);</span>

<span class="c1">% Loop over each row, starting from the second row (assuming first row is header)</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">:</span><span class="n">numRows</span>
    <span class="c1">% Extract values from columns A, B, and C</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">raw</span><span class="p">{</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>  <span class="c1">% Column A</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">raw</span><span class="p">{</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">};</span>  <span class="c1">% Column B</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">raw</span><span class="p">{</span><span class="n">i</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>  <span class="c1">% Column C</span>
    
    <span class="c1">% Call the function something() with the extracted values</span>
    <span class="nb">result</span> <span class="o">=</span> <span class="n">something</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    
    <span class="c1">% You can do something with the result here if needed</span>
    <span class="c1">% For example, store it in an array or print it</span>
    <span class="nb">disp</span><span class="p">([</span><span class="s1">'Result for row '</span><span class="p">,</span> <span class="nb">num2str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="s1">': '</span><span class="p">,</span> <span class="nb">num2str</span><span class="p">(</span><span class="nb">result</span><span class="p">)]);</span>
<span class="k">end</span>
</code></pre></div></div>
<p>(straight from <a href="https://claude.ai/">Claude AI</a>)</p>

<h2 id="summarizing-it-and-creating-tables">Summarizing it and creating tables</h2>

<p>Of course, you now also have  to properly capture all those results, store them, and be able to summarize them, and create tables from them. That’s another story.</p>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:functions" role="doc-endnote">
      <p>See for instance <a href="https://medium.com/@josueparra2892/20-best-programming-practices-407df688b96e">https://medium.com/@josueparra2892/20-best-programming-practices-407df688b96e</a>, but this will be repeated many times. I was personally influenced by reading the (very accessible, but 900 pages!) “<a href="https://bookshop.org/p/books/code-complete-steve-mcconnell/12551815?ean=9780735619678">Code Complete</a>” by Steve McConnell. Desirable internal design characteristics include “minimal complexity” (KISS), “ease of maintenance”, and “reusability” <a href="#fnref:functions" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:proper-function" role="doc-endnote">
      <p>In a proper function, you would pass the parameters as arguments, and validate that they are the right ones, etc.: <code class="language-plaintext highlighter-rouge">core-model(a,b,c)</code>. Read the programming language specific manual on how to properly write functions: <a href="https://www.stata.com/manuals/u17.pdf">Stata</a>, <a href="https://adv-r.hadley.nz/functions.html#functions">R via Hadley</a>, <a href="https://www.mathworks.com/help/matlab/ref/function.html">MATLAB</a>, etc. <a href="#fnref:proper-function" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>AEA Data Editor</name></author><category term="data editor tips" /><category term="replication packages" /><category term="code" /><category term="function libraries" /><summary type="html"><![CDATA[We often see researchers handle variants of their analysis by copying and pasting code, or by copying code files into separate directories, and making only minimal modifications. Some folks do this for robustness checks - same data, different analysis method, or a variant of the dependent variable - others for simulation of various scenarios - an economy without banks, an economy with credit-constrained banks, an economy with unconstrained banks. I won’t point to particular examples, to protect the (somewhat) innocent, but this is not a good idea.]]></summary></entry><entry><title type="html">On the use and redistribution of data</title><link href="https://aeadataeditor.github.io/posts/2024-04-29-use-and-reuse-of-data" rel="alternate" type="text/html" title="On the use and redistribution of data" /><published>2024-04-29T00:00:00-04:00</published><updated>2024-04-29T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/use-and-reuse-of-data</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-04-29-use-and-reuse-of-data"><![CDATA[<p>Many researchers are confused by the difference between “use” and “(re-)distribution” of data. In a nutshell, just because you are able to freely use the data for your own research purposes does not give you the right to distribute the data to others. The devil is in the details.</p>

<!-- more -->

<h2 id="a-scenario">A scenario</h2>

<p>You are happily browsing along the internet, and find an fabulous dataset you think you can use for your awesome idea. Download, analyze, submit, publish, … all good. But then the pesky journal asks for a replication package. Easy, right? Wrap up the code, the data, upload, … all good? Maybe. Possibly not.</p>

<h2 id="the-problem">The problem</h2>

<p>Many data used by economists stems from other data sources. Most of these data sources are on the internet. Anybody can use data that’s on the internet and do with it what they want, right?</p>

<p>As the discussion surrounding copyright and artificial intelligence shows, the answer is complex.<sup id="fnref:nytai" role="doc-noteref"><a href="#fn:nytai" class="footnote" rel="footnote">1</a></sup><sup id="fnref:silverman" role="doc-noteref"><a href="#fn:silverman" class="footnote" rel="footnote">2</a></sup> There is a concept of “fair use” in US copyright law, and in particular, it has been used to allow for legal webscraping.<sup id="fnref:webscraping" role="doc-noteref"><a href="#fn:webscraping" class="footnote" rel="footnote">3</a></sup></p>

<p>But that applies primarily for “use”. If you want to publish the data you obtained from elsewhere, that is no longer necessarily considered (fair) “use”, it falls under “redistribution” or “publication”.</p>

<h2 id="the-solution">The solution</h2>

<p>In principle, the solution is for data providers to establish clear terms of use and licenses. And many do, especially in the commercial space. In general, you will find that “terms of use” restrict certains uses and rights, and “licenses” allow or grant certain uses and rights.</p>

<p>Historically, it was software that was licensed, and “open source” licenses have a long history. Many such licenses are listed at the “<a href="https://opensource.org/licenses">open source initiative</a>”.</p>

<p>For data, a popular set of licenses are the “<a href="https://creativecommons.org/licenses/">Creative Commons</a>” licenses. These licenses are designed to be easy to understand and to use, and allow for a wide range of uses - including <strong>redistribution</strong>. The CC-BY license is abundantly clear about what it allows:</p>

<blockquote>
  <p><a href="https://creativecommons.org/licenses/by/4.0/">CC By 4.0 DEED</a>:</p>

  <p>You are free to:</p>

  <ul>
    <li>Share — copy and redistribute the material in any medium or format for any purpose, even commercially. 
[…]</li>
  </ul>

</blockquote>

<p>Other data licenses exist that allow for redistribution explicitly:</p>

<ul>
  <li><a href="https://opendatacommons.org/licenses/odbl/">Open Data Commons Open Database License (ODbL)</a></li>
  <li>various government “open data” licenses, such as the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">UK Open Government License</a> and Statistics Canada’s <a href="https://www.statcan.gc.ca/en/reference/licence">Statistics Canada Open Licence</a>.</li>
</ul>

<p>(often times, the differences are minor between these licenses).</p>

<h2 id="the-problem-part-2">The problem, part 2</h2>

<p>The problem is that many (academic) data providers still do not show or apply these licenses, and have no terms of use, or ones that are hidden. It thus becomes difficult for researchers to know what they can and cannot do with the data they find, leading to avoidable confusion.</p>

<p>Sometimes, these are identified at the time of downloading the data. For instance, the widely-used <a href="https://www.worldvaluessurvey.org/WVSDocumentationWV6.jsp">World Values Survey</a> displays four conditions to researchers who (after registering) download the data:</p>

<p><img src="/images/wvs-download-screenshot-20240429.png" alt="WVS download conditions" /></p>

<p>It otherwise mentions the “non-redistribution license” or that “data redistribution is prohibited” in multiple places, but there is no single “Terms of Use” page, or a “WVS License” page that is easily accessible and referenceable.</p>

<p>Even when terms of use are provided, permissions and restrictions are not necessarily linked together. For instance, the fabulous <a href="https://dhsprogram.com/">DHS Program</a> states on many of its pages</p>

<blockquote>
  <p>The DHS Program is authorized to distribute, at no cost, unrestricted survey data files for legitimate academic research.</p>
</blockquote>

<p>but one has to search for the <a href="https://dhsprogram.com/data/Terms-of-Use.cfm">Terms of Use</a>, tucked in between “Contraceptive Calendar Tutorial” and “DHS Github Code Share”, which state (also very clearly)</p>

<blockquote>
  <p>Conditions of Use for The DHS Program datasets 
(applies to all datasets downloaded from The DHS Program website: www.dhsprogram.com)</p>

  <p>[…]</p>
  <ul>
    <li>Agree that the datasets <strong>will not be shared</strong> with other researchers without the written consent of The DHS Program.</li>
  </ul>
</blockquote>

<p>(emphasis added). Many researchers include DHS data in their replication packages, and active data editors like myself have to remind them to remove the data from the replication package.</p>

<h2 id="the-takeaways">The takeaways</h2>

<h3 id="data-providers">Data providers</h3>

<ul>
  <li>Data providers should have a clear “Terms of Use” page, or a “License” page, that is easily accessible and referenceable.</li>
  <li>They should also include the license and conditions in every download.</li>
  <li>When data formats that allow for annotation (Stata, SAS), embed the license information in the dataset itself.</li>
</ul>

<h3 id="researchers">Researchers</h3>

<ul>
  <li>Always record the terms of use and license when you download the data.</li>
  <li>Search for “terms of use” or “license” on data providers’ websites.</li>
  <li>If the website asks for registration, it is highly likely that there are redistribution restrictions.</li>
  <li>Request that data providers make their terms of use and licenses more visible and accessible.</li>
  <li>Consult (and update) the <a href="https://social-science-data-editors.github.io/reference/TermsOfUse.html">Social Science Data Editors’ Terms of Use database</a>.</li>
</ul>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:nytai" role="doc-endnote">
      <p>New York Times has sued OpenAI and Microsoft for having used their texts, see <a href="https://www.washingtonpost.com/technology/2024/01/04/nyt-ai-copyright-lawsuit-fair-use/">https://www.washingtonpost.com/technology/2024/01/04/nyt-ai-copyright-lawsuit-fair-use/</a>. <a href="#fnref:nytai" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:silverman" role="doc-endnote">
      <p>Sarah Silverman and other authors have sued OpenAI over the use of their texts, but parts of that lawsuit have been dismissed, see <a href="https://www.reuters.com/legal/litigation/openai-gets-partial-win-authors-us-copyright-lawsuit-2024-02-13/">https://www.reuters.com/legal/litigation/openai-gets-partial-win-authors-us-copyright-lawsuit-2024-02-13/</a>. <a href="#fnref:silverman" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:webscraping" role="doc-endnote">
      <p>See <a href="https://techcrunch.com/2022/04/18/web-scraping-legal-court/">https://techcrunch.com/2022/04/18/web-scraping-legal-court/</a>. <a href="#fnref:webscraping" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>AEA Data Editor</name></author><category term="data editor tips" /><category term="replication packages" /><category term="terms of use" /><category term="licenses" /><summary type="html"><![CDATA[Many researchers are confused by the difference between “use” and “(re-)distribution” of data. In a nutshell, just because you are able to freely use the data for your own research purposes does not give you the right to distribute the data to others. The devil is in the details.]]></summary></entry><entry><title type="html">Random notes from the AMAs</title><link href="https://aeadataeditor.github.io/posts/2024-04-11-random-notes-ama" rel="alternate" type="text/html" title="Random notes from the AMAs" /><published>2024-04-11T00:00:00-04:00</published><updated>2024-04-11T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/random-notes-ama</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-04-11-random-notes-ama"><![CDATA[<p>In the AMAs (<a href="https://aeadataeditor.github.io/talks/">see past and future AMAs</a>), we talked about many things. No transcript, but here’s a raw dump of the various websites that were used.</p>

<!-- more -->

<h2 id="aea-data-and-code-availability-policy">AEA Data and Code Availability Policy</h2>

<p><a href="https://www.aeaweb.org/journals/data/data-code-policy">https://www.aeaweb.org/journals/data/data-code-policy</a>, and if revising a package, <a href="https://www.aeaweb.org/journals/data/revisions-policy">https://www.aeaweb.org/journals/data/revisions-policy</a></p>

<h2 id="restricted-data">Restricted data</h2>

<p>To access restricted data, the author and Editor may start here: <a href="https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data/">https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data/</a></p>

<p>If the AEA Data Editor cannot access the data, but somebody else can, we follow the “third party” policy <a href="https://www.aeaweb.org/journals/data/policy-third-party">https://www.aeaweb.org/journals/data/policy-third-party</a></p>

<h2 id="common-documentation-by-social-science-data-editors">Common documentation by Social Science Data Editors</h2>

<ul>
  <li>
    <p>“The” README: 
<a href="https://social-science-data-editors.github.io/template_README/template-README.html">https://social-science-data-editors.github.io/template_README/template-README.html</a></p>
  </li>
  <li>
    <p>The common policy guidelines:
<a href="https://datacodestandard.org/">https://datacodestandard.org/</a></p>
  </li>
</ul>

<h2 id="better-code-and-readmes">Better code and READMEs</h2>

<p>Example of graphical interface to select data (and the difficulty of describing how to do that concisely):</p>

<p><a href="https://databank.worldbank.org/source/world-development-indicators">https://databank.worldbank.org/source/world-development-indicators</a></p>

<p>Stata package to do the same much more succinctly:</p>

<ul>
  <li><a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889464-wbopendata-stata-module-to-access-world-bank-data">https://datahelpdesk.worldbank.org/knowledgebase/articles/889464-wbopendata-stata-module-to-access-world-bank-data</a></li>
  <li><a href="https://ideas.repec.org/c/boc/bocode/s457234.html">Package on RePEc</a></li>
</ul>

<p>Similar tension between the FRED graphical interface <a href="https://fred.stlouisfed.org/">https://fred.stlouisfed.org/</a> and the FRED API, which can be used via</p>

<ul>
  <li>Stata  <a href="https://www.stata.com/manuals/dimportfred.pdf">https://www.stata.com/manuals/dimportfred.pdf</a></li>
  <li>MATLAB  <a href="https://www.mathworks.com/help/datafeed/fred.fetch.html">https://www.mathworks.com/help/datafeed/fred.fetch.html</a></li>
  <li>R <a href="https://cran.r-project.org/web/packages/fredr/vignettes/fredr.html">https://cran.r-project.org/web/packages/fredr/vignettes/fredr.html</a></li>
</ul>

<h2 id="difficult-data-citations">Difficult data citations</h2>

<p>Example of restricted access data with DOI, and a long list of DOIs (problems with data citations):</p>

<p><a href="https://www.casd.eu/source/statistique-structurelle-annuelle-dentreprises-issue-du-dispositif-esane/">https://www.casd.eu/source/statistique-structurelle-annuelle-dentreprises-issue-du-dispositif-esane/</a></p>

<p>and a <a href="https://social-science-data-editors.github.io/guidance/addtl-data-citation-guidance.html#many-related-datasets">possible solution</a>.</p>

<h2 id="versioning-of-stata-packages">Versioning of Stata packages</h2>

<p><a href="https://github.com/labordynamicsinstitute/ssc-mirror/">https://github.com/labordynamicsinstitute/ssc-mirror/</a></p>

<h2 id="improving-yourself">Improving yourself</h2>

<p>Draft tutorial on how to self-check reproducibility (and also how to ensure it in the first place), still quite preliminary right now:</p>

<p><a href="https://larsvilhuber.github.io/self-checking-reproducibility/">https://larsvilhuber.github.io/self-checking-reproducibility/</a></p>

<h2 id="crediting-others-software-citations">Crediting others (software citations)</h2>

<p>R package to generate a bibliography file (bib, etc.) from all the citable packages used in an R-based replication package:  <a href="https://github.com/Pakillo/grateful">https://github.com/Pakillo/grateful</a></p>]]></content><author><name>AEA Data Editor</name></author><category term="data editor tips" /><category term="replication packages" /><summary type="html"><![CDATA[In the AMAs (see past and future AMAs), we talked about many things. No transcript, but here’s a raw dump of the various websites that were used.]]></summary></entry><entry><title type="html">AEJ Best Papers 2024 and replication packages</title><link href="https://aeadataeditor.github.io/posts/2024-04-10-aej-best-papers-2024" rel="alternate" type="text/html" title="AEJ Best Papers 2024 and replication packages" /><published>2024-04-10T00:00:00-04:00</published><updated>2024-04-10T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/aej-best-papers-2024</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-04-10-aej-best-papers-2024"><![CDATA[<p>The annual <strong>American Economic Journal (AEJ) Best Paper Awards</strong> highlight the best paper published in each of the American Economic Journals: Applied Economics, Economic Policy, Macroeconomics, and Microeconomics over the last three years. Nominations are provided by AEA members, and winners are selected by the journals’ Boards of Editors. More information, including links to the papers, at  <a href="https://www.aeaweb.org/about-aea/honors-awards/aej-best-papers">https://www.aeaweb.org/about-aea/honors-awards/aej-best-papers</a>.</p>

<p>The decision process is on the overall scientific merit. On this page, I list the replication packages for each of these.</p>

<!-- more -->

<p><!-- manually constructing table -->
  <!-- "Journal","Title","Authors","DOI","Date","Package DOI","Requires confidential or proprietary data","Data Editor ran","Notes" --></p>

<h2 id="aej-applied-economics">AEJ Applied Economics</h2>

<blockquote>
  <p>Manasi Deshpande, Tal Gross, and Yalun Su. “Disability and Distress: The Effect of Disability Programs on Financial Outcomes” <em>AEJ Applied Economics</em> (April 2021). <a href="https://doi.org/10.1257/app.20190709">10.1257/app.20190709</a></p>
</blockquote>

<ul>
  <li>Replication package: <a href="https://doi.org/10.3886/E118462V1">10.3886/E118462V1</a></li>
  <li>Does the replication package require confidential or proprietary data? <strong>Yes</strong></li>
  <li>Did the Data Editor run the package? <strong>Partially</strong></li>
  <li>Additional notes:    <em>Requires ZTRAX data, which are no longer accessible.</em></li>
</ul>

<h2 id="aej-economic-policy">AEJ Economic Policy</h2>

<blockquote>
  <p>Barbara Biasi. “The Labor Market for Teachers under Different Pay Schemes” <em>AEJ Economic Policy</em> (August 2021). <a href="https://doi.org/10.1257/pol.20200295">10.1257/pol.20200295</a></p>
</blockquote>

<ul>
  <li>Replication package: <a href="https://doi.org/10.3886/E119844V1">10.3886/E119844V1</a></li>
  <li>Does the replication package require confidential or proprietary data? <strong>Yes</strong></li>
  <li>Did the Data Editor run the package? <strong>No</strong></li>
  <li>Additional notes:    <em>Uses restricted data from the Wisconsin Department of Public Instruction and New York City Department of Education.</em></li>
</ul>

<h2 id="aej-macroeconomics">AEJ Macroeconomics</h2>

<blockquote>
  <p>Silvia Miranda-Agrippino, and Giovanni Ricco. “The Transmission of Monetary Policy Shocks” <em>AEJ Macroeconomics</em> (July 2021). <a href="https://doi.org/10.1257/mac.20180124">10.1257/mac.20180124</a></p>
</blockquote>

<ul>
  <li>Replication package: <a href="https://doi.org/10.3886/E116841V1">10.3886/E116841V1</a></li>
  <li>Does the replication package require confidential or proprietary data? <strong>Yes</strong></li>
  <li>Did the Data Editor run the package? <strong>Yes</strong></li>
  <li>Additional notes:    <em>Only a small fraction of the data are proprietary, but can be accessed from the typical business school library. The remaining data are included.</em></li>
</ul>

<h2 id="aej-microeconomics">AEJ Microeconomics</h2>

<blockquote>
  <p>Board and Meyer-ter-Vehn. “A Reputational Theory of Firm Dynamics” <em>AEJ Microeconomics</em> (May 2022). <a href="https://doi.org/10.1257/mic.20190376">10.1257/mic.20190376</a></p>
</blockquote>

<ul>
  <li>Replication package: <a href="https://doi.org/10.3886/E118970V1">10.3886/E118970V1</a></li>
  <li>Does the replication package require confidential or proprietary data? <strong>No</strong></li>
  <li>Did the Data Editor run the package? <strong>Yes</strong></li>
  <li>Additional notes:    <em>Only uses (creates) simulated data.</em></li>
</ul>]]></content><author><name>AEA Data Editor</name></author><category term="best papers" /><category term="replication packages" /><summary type="html"><![CDATA[The annual American Economic Journal (AEJ) Best Paper Awards highlight the best paper published in each of the American Economic Journals: Applied Economics, Economic Policy, Macroeconomics, and Microeconomics over the last three years. Nominations are provided by AEA members, and winners are selected by the journals’ Boards of Editors. More information, including links to the papers, at https://www.aeaweb.org/about-aea/honors-awards/aej-best-papers. The decision process is on the overall scientific merit. On this page, I list the replication packages for each of these.]]></summary></entry><entry><title type="html">Examples of replication packages for research conducted in FSRDCs</title><link href="https://aeadataeditor.github.io/posts/2024-04-09-census-packages" rel="alternate" type="text/html" title="Examples of replication packages for research conducted in FSRDCs" /><published>2024-04-09T00:00:00-04:00</published><updated>2024-04-09T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/census-packages</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-04-09-census-packages"><![CDATA[<p>I have been asked a few times about guidance for replication packages that use confidential data in research data centers, e.g., the  Federal Statistical Research Data Centers (FSRDCs) and others. Here are some examples and guidance.</p>

<!-- more -->

<h2 id="the-problem">The problem</h2>

<p>The data, and sometimes (only sometimes) pieces of code, are confidential. If this is something you encounter, read on.</p>

<h2 id="this-is-not-new">This is not new</h2>

<p>See my <a href="https://aeadataeditor.github.io/posts/2022-04-13-coding-confidential">earlier post almost exactly two years ago</a> and this <a href="https://larsvilhuber.github.io/reproducibility-confidential-fsrdc/">2022 tutorial</a> that I developed from that.</p>

<h2 id="general-guidance">General Guidance</h2>

<ul>
  <li>https://social-science-data-editors.github.io/guidance/DCAS_Restricted_data.html#us-census-bureau-and-fsrdc</li>
  <li>https://social-science-data-editors.github.io/guidance/Requested_information_hosting.html#self-generated-repositories</li>
</ul>

<h2 id="examples">Examples!</h2>

<p>Two excellent examples:</p>

<h3 id="example-1-berger-herkenhoof-and-mongey-2022">Example 1: Berger, Herkenhoof, and Mongey (2022)</h3>

<blockquote>
  <p>Berger, David, Herkenhoff, Kyle, and Mongey, Simon. Data and Code for: Labor Market Power. Nashville, TN: American Economic Association [publisher], 2022. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2022-12-07. <a href="https://doi.org/10.3886/E154241V2">https://doi.org/10.3886/E154241V2</a></p>
</blockquote>

<p>Not only code, but faces the problem that IRS data cannot have variables revealed. Workarounds galore.</p>

<h3 id="example-2-yeh-macoluso-and-hershbein-2022">Example 2: Yeh, Macoluso, and Hershbein (2022)</h3>

<blockquote>
  <p>Yeh, Chen, Macaluso, Claudia, and Hershbein, Brad. Code for: “Monopsony in the U.S. Labor Market.” Nashville, TN: American Economic Association [publisher], 2022. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2022-11-28. https://doi.org/10.3886/E162581V1</p>
</blockquote>

<h3 id="example-3-fort-2017">Example 3: Fort (2017)</h3>

<p>This replication package is a bit older, but is an excellent example that I have repurposed as guidance for others:</p>

<blockquote>
  <p>Teresa C. Fort, Technology and Production Fragmentation: Domestic versus Foreign Sourcing, The Review of Economic Studies, Volume 84, Issue 2, April 2017, Pages 650–687, <a href="https://doi.org/10.1093/restud/rdw057">https://doi.org/10.1093/restud/rdw057</a></p>
</blockquote>

<p>and the <a href="https://social-science-data-editors.github.io/guidance/copies/Fort2016-Readme.pdf">copy of the README</a>.</p>

<p>Note that this package was created before the installation of the current generation of data editors, so relied on none of that (official) expertise!</p>

<p>Many more out there.</p>

<h2 id="ask-the-research-data-center">Ask the research data center</h2>

<p>The US Census Bureau has procedures in place to review code (it’s actually part of the release system), as do many other systems. Some parts of the code will need to be redacted, but you can get very functional code released (see the <a href="https://larsvilhuber.github.io/reproducibility-confidential-fsrdc/">2022 tutorial</a> on how to set this up from the start).</p>

<h2 id="but-dont-take-no-for-an-answer">But: Don’t take “No” for an answer!</h2>

<p>There are sometimes some old practices in place in restricted-access environments that do not have 100s of researchers flowing through (for instance, smaller countries, places with newer centers, etc.). Sometimes, you need to push back. You can rely on the Data Editors - me, others - to help you do that. I have successfully educated data custodians, who justifiably fear releasing too much confidential data, on what can be done reliably and robustly, at least with code.</p>

<h2 id="dotting-the-is-and-crossing-the-ts">Dotting the i’s and crossing the t’s</h2>

<p>We usually require that an <strong>internal</strong> archive be created at the institution holding the data, so that regardless of how much or how little is released, internally, a fully reproducible archive exists, accessible for those with permission to access. The permissions necessary , and permission granted in the replication package so that others, with appropriate access, can access those files. See the first example above for an excellent example of that, and <a href="https://social-science-data-editors.github.io/guidance/Requested_information_hosting.html#self-generated-repositories">this guidance</a> on how to do so in the absence of a formal internal archive.</p>]]></content><author><name>AEA Data Editor</name></author><category term="confidential data" /><category term="complex projects" /><summary type="html"><![CDATA[I have been asked a few times about guidance for replication packages that use confidential data in research data centers, e.g., the Federal Statistical Research Data Centers (FSRDCs) and others. Here are some examples and guidance.]]></summary></entry><entry><title type="html">NDAs, NDAs, and NDAs: How to describe access to data that cannot be published</title><link href="https://aeadataeditor.github.io/posts/2024-03-15-nda-redux" rel="alternate" type="text/html" title="NDAs, NDAs, and NDAs: How to describe access to data that cannot be published" /><published>2024-03-15T00:00:00-04:00</published><updated>2024-03-15T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/nda-redux</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-03-15-nda-redux"><![CDATA[<p>I was recently forwarded a question from a data librarian discussion list, and invited to respond to the question of “example language” for a data access description when data were obtained via a non-disclosure agreement (NDA):</p>

<blockquote>
  <p>[…] the data are from a commercial company under a non-disclosure agreement […] asked to include “data sharing plans (for all data, documentation, and code used in analysis)”. […] Can you think of any example language that the researcher could borrow from to include in the data sharing plan?</p>
</blockquote>

<p>(paraphrased)</p>

<!-- more -->

<p>The use of some sort of data access restriction is quite common in economics. We have a few examples listed <a href="https://social-science-data-editors.github.io/guidance/Requested_information_dcas.html">here</a>. 
None of those directly address when an NDA is required, but the generic “<a href="https://social-science-data-editors.github.io/guidance/Requested_information_dcas.html#example-for-confidential-data">confidential data</a>” example is straightforward to adapt.</p>

<blockquote>
  <p>The data for this project are confidential, but may be obtained with Data Use Agreements with the Massachusetts Department of Elementary and Secondary Education (DESE). Researchers interested in access to the data may contact [NAME] at [EMAIL], also see www.doe.mass.edu/research/contact.html. It can take some months to negotiate data use agreements and gain access to the data. The author will assist with any reasonable replication attempts for two years following publication.</p>
</blockquote>

<p>As general guidance, journal (data) editors seek the following information:</p>

<ul>
  <li>how did the author access the data? (describe how the initial contact was made, what type of agreements, such as NDAs, were signed, and what they restrict and why)</li>
  <li>how can others​ access the data? (“Contact the vice president of academic interaction, and request “data on gooble-dee-gooks” from 2002-2022.”) Importantly, the author should address whether the exact data can be obtained by others, or if this was a pull from a dynamic database, and while generically the same data might be available in a few years’ time, the exact data will never be obtainable. Or that after 10 years, regulatory requirements force the data provider to delete the data. Or whatever is needed to assess the likelihood of being able to access such data. Costs and delays are also important.</li>
  <li>In some cases, authors may already know that the regime within the data provider has changed in such a fashion that the data are no longer available to anybody going forward - that may not be an impediment for the paper being published, but it is important to know (the data are fundamentally unverifiable)</li>
</ul>

<p>This is summarized in the Data and Code Availability Standard, that many econ journals now adhere to: <a href="https://datacodestandard.org/">https://datacodestandard.org/</a></p>

<h2 id="examples">Examples</h2>

<p>Here are some examples (not all exactly corresponding to a single-entity NDA):</p>

<h3 id="gross--sampat-2023">Gross &amp; Sampat (2023)</h3>

<blockquote>
  <p>Gross, Daniel P., and Bhaven N. Sampat. 2023. “America, Jump-Started: World War II R&amp;D and the Takeoff of the US Innovation System.” American Economic Review, 113 (12): 3323-56. https://doi.org/10.1257/aer.20221365</p>
</blockquote>

<ul>
  <li><a href="https://doi.org/10.1257/aer.20221365">Article</a></li>
  <li>
    <p><a href="https://doi.org/10.3886/E192375V1">Replication package</a></p>
  </li>
  <li>Some data are included, others are not, because subject to redistribution restrictions, but are obtainable under various agreement, and others are commercially available for payment (thus a variety of DUA types)</li>
  <li>For instance, they state “<em>Derwent Innovation (2018), EPO (2017) PATSTAT, and the Dun &amp;Bradstreet (1980) data were obtained through institutional subscriptions.</em>”</li>
  <li>Excellent data availability statements in the README.</li>
</ul>

<h3 id="cullen--perez-truglia-2023">Cullen &amp; Perez-Truglia (2023)</h3>

<blockquote>
  <p>Cullen, Zoë, and Ricardo Perez-Truglia. 2023. “The Old Boys’ Club: Schmoozing and the Gender Gap.” American Economic Review, 113 (7): 1703-40. https://doi.org/10.1257/aer.20210863</p>
</blockquote>

<ul>
  <li><a href="https://doi.org/10.1257/aer.20210863">Article</a></li>
  <li>
    <p><a href="https://doi.org/10.3886/E182243V1">Replication package</a></p>
  </li>
  <li>Data were collected at a company that the first author was an employee of. The company cannot be named (and is pruned from the author’s CV!)</li>
  <li>README states “The data was collected by the authors in collaboration with a large financial institution via surveys. Zoe Cullen was an employee of the institution, which remains unnamed to protect the confidentially of the firm, at the time of data collection.”</li>
  <li>An extreme form of NDA, which happens a few times.</li>
</ul>

<h3 id="zussman-2023">Zussman (2023)</h3>

<blockquote>
  <p>Zussman, Asaf. 2023. “Discrimination in Times of Crises and the Role of the Media.” American Economic Journal: Applied Economics, 15 (4): 422-51. https://doi.org/10.1257/app.20210732</p>
</blockquote>

<ul>
  <li><a href="https://doi.org/10.1257/app.20210732">Article</a></li>
  <li>
    <p><a href="https://doi.org/10.3886/E175242V1">Replication package</a></p>
  </li>
  <li>The data were scraped from a (named) public website, but contain names of doctors. The data were not made available due to ethical concerns, but the access procedure (repeatable by anybody) is described in detail.</li>
  <li>The author explains that  “<em>The project received approval from the Ethics Committee of the Faculty of Social Sciences at the Hebrew University and from the University Ethics Committee (IRB) under the condition that identifying information about the doctors, most importantly doctor license numbers and names, will not become publicly available.</em>”</li>
  <li>Similar:  Cage et al (2023) <a href="https://doi.org/10.1257/aer.20211509">https://doi.org/10.1257/aer.20211509</a> which contains names of Nazi collaborators.</li>
</ul>

<h3 id="kuhn---shen-2023">Kuhn &amp;  Shen (2023)</h3>

<blockquote>
  <p>Kuhn, Peter, and Kailing Shen. 2023. “What Happens When Employers Can No Longer Discriminate in Job Ads?” American Economic Review, 113 (4): 1013-48. https://doi.org/10.1257/aer.20211127</p>
</blockquote>

<ul>
  <li><a href="https://doi.org/10.1257/aer.20211127">Article</a></li>
  <li>
    <p><a href="https://doi.org/10.3886/E183021V1">Replication package</a></p>
  </li>
  <li>Internal data from a named Chinese company (XMRC.com) are used, but not published, in “<em>accordance with XMRC’s wishes</em>” (read: NDA/DUA). This is how the authors obtained the data.</li>
  <li>But the limited data used for the analysis are deposited in the Research Data Center of the IZA (a German research center) and can be analyzed on a remote computing platform</li>
</ul>

<h2 id="summary">Summary</h2>

<p>In all of the above, focus was on transparency of the two components of the data availability statement: original access, and subsequent access.</p>

<h2 id="postscript-access-by-the-journal-is-not-the-same-as-public-access">Postscript: Access by the journal is not the same as public access</h2>

<p>I will note that in many of these cases, the files were made available to the journal’s Data Editor (=me) under a derivative or implicit NDA, allowing the journal to verify veracity of the analysis, despite the data not being publishable. In cases where the source cannot be named, the Data Editor may enter into an NDA with the author to learn the name of the source, to verify plausibility, without revealing the information publicly. While all of these are second-best access methods, they are far better than obscurity and opacity.</p>

<h2 id="additional-readings">Additional readings</h2>

<ul>
  <li><a href="https://aeadataeditor.github.io/posts/2023-11-01-ndas.html">2023 post on NDAs</a></li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/2021-10-28-reproducibility-restricted-france.html">2021 post on example of checking confidential data</a></li>
  <li><a href="https://www.aeaweb.org/journals/data/policy-third-party">AEA policy on third-party replicators</a></li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data">AEA process for obtaining not-for-distribution data</a></li>
  <li>Vilhuber, Lars. 2023. “<a href="https://doi.org/10.1016/j.jeconom.2023.05.001">Reproducibility and transparency versus privacy and confidentiality: Reflections from a data editor</a>, Journal of Econometrics, Volume 235, Issue 2, <a href="https://doi.org/10.1016/j.jeconom.2023.05.001">https://doi.org/10.1016/j.jeconom.2023.05.001</a> (<a href="https://doi.org/10.48550/arXiv.2305.14478">OA version on arXiv</a>)</li>
</ul>]]></content><author><name>AEA Data Editor</name></author><category term="NDA" /><category term="DUA" /><category term="confidential" /><category term="DCAS" /><category term="access" /><summary type="html"><![CDATA[I was recently forwarded a question from a data librarian discussion list, and invited to respond to the question of “example language” for a data access description when data were obtained via a non-disclosure agreement (NDA): […] the data are from a commercial company under a non-disclosure agreement […] asked to include “data sharing plans (for all data, documentation, and code used in analysis)”. […] Can you think of any example language that the researcher could borrow from to include in the data sharing plan? (paraphrased)]]></summary></entry><entry><title type="html">NDAs, DUAs in the verification process</title><link href="https://aeadataeditor.github.io/posts/2023-11-01-ndas" rel="alternate" type="text/html" title="NDAs, DUAs in the verification process" /><published>2023-11-01T00:00:00-04:00</published><updated>2023-11-01T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/ndas</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-11-01-ndas"><![CDATA[<p>Toni Whited (EIC of Journal of Financial Economics) had the following question on the <a href="https://twitter.com/toniwhited/status/1718011879480787363">ex-bird site</a>:</p>

<blockquote>
  <p>Econ and finance journals are getting their acts together wrt reproducibility.  A bigger issue now is data acquired via NDAs. I wish it were normal for NDAs to have a clause letting third parties replicate results on an air-gapped machine.</p>

  <p>Don’t know how to make it happen.</p>
</blockquote>

<p>A few thoughts.</p>

<!-- more -->

<h2 id="ndas-with-clauses">NDAs with clauses</h2>

<p>I have started to see researchers incorporate such clauses into NDAs. Very rare, but possible. More generally, certain NDAs allow to add “third parties” to an existing contract - no special clause necessary, but researchers must be aware of the possibility.</p>

<h2 id="ndas-without-clauses">NDAs without clauses</h2>

<p>In some cases, no additional clause is needed. Read the NDA carefully: can you assign a new member of the research team (e.g., a new RA at your co-author’s university) to the contract, with minor hassles (simple notification)? Yes? Then you can probably also assign a journal verifier to the contract! Verifiers can be the “RA” on the contract, and can obtain the data (compliant with any other access restrictions). In many cases, authors have then been able to provide us with a non-publishable extract of the same data, for the duration of the verification process. We can sign a NDA with the authors, if needed, but most are fine with an email promise to delete the data. Our process is outlined <a href="https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data">here</a>.</p>

<h2 id="journal-verifiers-with-access">Journal verifiers with access</h2>

<p>Another thing is that in some cases, as long as both the authors and the verifiers are (separately) subscribers, data may be able to be shared. But caution: not every “subscription” is the same. For instance, when researchers use WRDS data, they cannot directly share the data. In principle, I should be able to access the same data sources - as <a href="https://johnson.library.cornell.edu/database/wharton-research-data-services-wrds/">Cornell is also a subscriber</a>. But WRDS subscriptions have a huge menu of sub-options. The researcher may be able to access WRDS <a href="https://github.com/chrisconlon/CommonOwnerReplication/blob/master/code/1_Download_WRDS_Data.py">via the Python API</a>, but as it turns out, my subscription does not extend to that!<sup id="fnref:conlon" role="doc-noteref"><a href="#fn:conlon" class="footnote" rel="footnote">1</a></sup></p>

<h2 id="journal-verifiers-acquiring-access">Journal verifiers acquiring access</h2>

<p>In some cases, there is a <strong>generalized access mechanism</strong>. Thus, while the researcher cannot share the data with us, because the DUA or NDA does not allow for it, it is relatively straightforward for the journal verifier to obtain access. For instance,</p>

<ul>
  <li><a href="https://psidonline.isr.umich.edu/default.aspx">PSID</a> (see <a href="https://simba.isr.umich.edu/U/CondUse.aspx">Conditions of use</a>)</li>
  <li><a href="https://www.worldvaluessurvey.org/wvs.jsp">World Values Survey</a> (WVS)</li>
  <li><a href="https://dhsprogram.com/">Demographic and Health Surveys</a> (DHS) (note banner at <a href="https://dhsprogram.com/data/dataset_admin/login_main.cfm">Data Download site</a>)</li>
  <li><a href="https://www.diw.de/en/diw_01.c.678568.en/research_data_center_soep.html">German Socio-Economic Panel</a> (SOEP) (see <a href="https://www.diw.de/en/diw_01.c.601584.en/data_access.html#c_741347">Data Access rules</a>)</li>
</ul>

<p>all do not allow for redistribution of the data, even of their “publicly accessible” data.</p>

<blockquote>
  <p>Hint: if there is a login, a checkbox, or something else you need to click on in order to download the data, it is very likely that you cannot simply re-publish (distribute, post) the data (but that is neither a sufficient nor a necessary condition).</p>
</blockquote>

<p>But in all three cases, the journal verifier can obtain access to the data, and verify the replication package.</p>

<p>Some of these mechanisms have easy ways for researchers to make re-acquiring the data easy:</p>

<ul>
  <li>PSID offers both the ability to <a href="https://simba.isr.umich.edu/DC/c.aspx">share “carts”</a> and to deposit extracts in a compliant way at the <a href="">PSID repository</a></li>
  <li>SOEP assigns DOI to datasets, allowing to ask for the exact same dataset. See <a href="https://doi.org/10.5684/soep.v35.1">https://doi.org/10.5684/soep.v35.1</a> for an example.</li>
</ul>

<p>While a bit of a hassle, this does allow journals to obtain the same data. Note that this is not always easy or possible: for instance, if the original author used the SOEP data in Europe, they will have had a different access than my US-based team will have, because non-European users only get access to a 95% sample.</p>

<p>Also, Cornell has so far not been able to agree to the terms of use required to even sign a data use agreement, something about GDPR etc… So what do we do then?</p>

<h2 id="using-third-party-verifiers-with-access">Using third party verifiers with access</h2>

<p>When NDAs or DUAs cannot be quickly adjusted, or no parallel data access exists, one can reach out to other verifiers. The AEA has a <a href="https://www.aeaweb.org/journals/data/policy-third-party">policy</a> on that, and we regularly reach out to folks who we know have access. That would be the case for the SOEP above: reach out to a replicator in Europe (for instance, a fellow Europe-based data editor).</p>

<p>More generally, this will be true for data that have complicated and long-winding access procedures, and where simply it is completely out-of-scope (because illegal) for researchers to provide journals with access to the data. This was the case for the <a href="https://www.casd.eu/en/sources/french-customs-data/">French customs data</a> that we used in the <a href="https://aeadataeditor.github.io/aea-de-guidance/2021-10-28-reproducibility-restricted-france.html">Piveteau (2021) replication</a>. The data are available through <a href="https://www.casd.eu/">CASD</a>, the French data access center, and the <a href="https://www.cascad.tech/">cascad</a> replicators have access to CASD, quickly, on a case-by-case basis. We can reach out to them for access to these data. Sometimes, agency or data custodian staff themselves can help out - we’ve had pilot projects with the German IAB, with the Bureau of Labor Statistics, and with the World Bank. This will not always work - volunteering time may be fine in academia, but is not always feasible when working with government or supra-national agencies.</p>

<p>But back to Toni’s point: in principle, if we applied that principle to the journal-centric process, one solution is to have external referees, selected because they have access to the data, conduct the verification, in accordance with some basic principles.</p>

<h2 id="taking-the-computations-to-the-data-instead-of-the-data-to-my-computer">Taking the computations to the data, instead of the data to “my” computer</h2>

<p>Toni also wanted to “replicate results on an air-gapped machine.” While that specific security protocol almost certainly won’t satisfy many data providers these days (they want encrypted hard drives, secure login processes, etc., and want the whole thing documented), this does also suggest another process: rather than bring the data to “my” computer, take the computation to “their” computer (or some other authorized system). In a few cases, we have been granted (legitimate, documented) computer access to servers that are authorized to access the restricted data, always remaining in compliance with the authors’ data access protocol. We have so far been granted legitimate and documented access to computers at UC San Diego, the NBER, Harvard Business School, and University of Uppsala, to name a few (thank you!). This not only solves the data access problem, in some cases it also solves the computational resource problem - sufficient parallel cores, licensed software, etc. This is different from the third-party verification process, above, because in this case, we (the journal verifiers) access the data, and run the code that the authors provided elsewhere.</p>

<h2 id="the-big-caveat">The big caveat</h2>

<p>Of course, none of the above will work if the original NDA and data access is idiosyncratic. In all of the above processes, a secondary outcome is that we can improve the authors’ description of how <strong>somebody</strong> (not just the editorial folks) can get access to the data, and restrictions limiting this. In some cases, the only possible documentation is “<strong>this will not work for anybody else.</strong>” Getting access to firm-specific data is often heavily dependent on interpersonal relationships, and while that might work to simply extending an NDA, it only works if the original relationship continues to exist. So none of these methods will work in all cases. The fallback is then something that Toni’s journal, and a few other econ journals, but not the AEA (!), require: provide some synthetic or simulated data, that at least allows to assess that the code would in principle run. But at least the fact that access <strong>is</strong> idiosyncratic should be made clear.</p>

<h2 id="some-data-from-us">Some data from us</h2>

<p>So how does this work at the AEA in practice? I pulled some stats today from our tracking system. Over the past 12 months, <a href="https://www.aeaweb.org/journals/forms/data-code-availability">authors have identified</a> <strong>112 times</strong> that they might be able to provide us privately access to the data, through one of the mechanisms above. In <strong>86 cases</strong>, after review of conditions, cost, and availability of resources, we pursued those offers in some fashion. That includes figuring out NDAs or privately shared data. It does not cover when we requested data ourselves from third parties, which happened in <strong>22 cases</strong> (some of those cases overlap). In <strong>84 cases</strong>, one of those methods culminated with us coming to terms with whoever controlled the data, and  obtaining access to the data.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Accessing confidential data as part of the verification process is not easy, but it is possible. Ensuring that others can re-use the data is sometimes easier, especially for researchers in the same field, in others harder, when a special clause in the NDA allowed the journal access, but cannot be extended to arbitrary future researchers. And the process must be allowed to fail, because interesting and illuminating research can be conducted with data that cannot be shared. In fact, an update to one of those NDAs negotiations just hit my inbox as I am writing this, and is likely to fail, due to the data provider not being willing to grant an exception or an extension in line with Toni’s original hope and request. That’s life, and is fine - it will not hold up the rest of the verification process that we are conducting, and will still ultimately lead to the publication of the paper.</p>

<p>I see our goal as (data) editors to make these kind of constraints as clear as possible, for all future readers, for a very long time. After all, somebody might still want to correct the record in 100 years, or review what we knew now. It’s not like those articles are going anywhere, even if the data just might disappear! See one of the first “<strong>data corrections</strong>” I’m aware of, by Irving Fisher, 1911.<sup id="fnref:irving" role="doc-noteref"><a href="#fn:irving" class="footnote" rel="footnote">2</a></sup></p>

<h2 id="additional-readings">Additional readings</h2>

<ul>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/2021-10-28-reproducibility-restricted-france.html">2021 post on example of checking confidential data</a></li>
  <li><a href="https://www.aeaweb.org/journals/data/policy-third-party">AEA policy on third-party replicators</a></li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data">AEA process for obtaining not-for-distribution data</a></li>
  <li>Vilhuber, Lars. 2023. “<a href="https://doi.org/10.1016/j.jeconom.2023.05.001">Reproducibility and transparency versus privacy and confidentiality: Reflections from a data editor</a>, Journal of Econometrics, Volume 235, Issue 2, <a href="https://doi.org/10.1016/j.jeconom.2023.05.001">https://doi.org/10.1016/j.jeconom.2023.05.001</a> (<a href="https://doi.org/10.48550/arXiv.2305.14478">OA version on arXiv</a>)</li>
</ul>

<h2 id="footnotes">Footnotes!</h2>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:conlon" role="doc-endnote">
      <p>We ultimately used a <a href="https://www.aeaweb.org/journals/data/policy-third-party">third-party replicator</a> with access to the Python API to verify the article. The replication package was found to be perfectly reproducible. See <a href="https://doi.org/10.1257/aer.20191302">Conlon, Chris, and Eric So. 2021. “Common Ownership and Corporate Control.” <em>American Economic Review</em>, 111 (3): 1012-48.</a> for the article, and <a href="https://doi.org/10.3886/E120083V1">https://doi.org/10.3886/E120083V1</a> for the replication package. <a href="#fnref:conlon" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:irving" role="doc-endnote">
      <p>Fisher, Irving. “‘The Equation of Exchange,’ 1896-1910.” The American Economic Review, vol. 1, no. 2, 1911, pp. 296–305. JSTOR, http://www.jstor.org/stable/1804304. Accessed 1 Nov. 2023. <a href="#fnref:irving" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>AEA Data Editor</name></author><category term="NDA" /><category term="DUA" /><category term="confidential" /><summary type="html"><![CDATA[Toni Whited (EIC of Journal of Financial Economics) had the following question on the ex-bird site: Econ and finance journals are getting their acts together wrt reproducibility. A bigger issue now is data acquired via NDAs. I wish it were normal for NDAs to have a clause letting third parties replicate results on an air-gapped machine. Don’t know how to make it happen. A few thoughts.]]></summary></entry><entry><title type="html">RESOLVED - Access to replication packages retrieval and deposit interrupted</title><link href="https://aeadataeditor.github.io/posts/2023-08-29-notice-downtime" rel="alternate" type="text/html" title="RESOLVED - Access to replication packages retrieval and deposit interrupted" /><published>2023-08-29T00:00:00-04:00</published><updated>2023-08-29T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/notice-downtime</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-08-29-notice-downtime"><![CDATA[<blockquote>
  <p>THIS HAS BEEN RESOLVED. Please <a href="https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html">deposit as usual</a>!</p>
</blockquote>

<p>The AEA uses the openICPSR repository for the deposit and dissemination of replication packages. On Sunday, <a href="https://umich.edu/announcements/">Aug 27 2023, the University of Michigan, the home institution for openICPSR, had to take all of their systems offline for an undetermined time period</a>. The AEA Code and Data Repository is therefore not accessible at this time, for both authors seeking to deposit their required replication package, and for interested readers to obtain published replication packages. A few operational notes from us follow.</p>

<!-- more -->

<p><img src="/images/umich-down-20230829.png" alt="Screenshot of Umich website" /></p>

<h2 id="for-depositors">For depositors</h2>

<p>Authors who just received a conditional acceptance from an AEA journal are required to deposit their replication package at openICPSR. New depositors will receive a message with temporary instructions (see below). Authors who received their notification in recent weeks, and who are still working on completing their deposit, will also be contacted.</p>

<blockquote>
  <p>“The deposit of replication packages at openICPSR is temporarily interrupted (see https://umich.edu/announcements/). As a temporary measure, you can satisfy your deposit requirement by following these instructions:</p>

  <ul>
    <li>create a ZIP file of your replication package, as you would deposit it on openICPSR. <strong>DO NOT INCLUDE ANY CONFIDENTIAL DATA.</strong></li>
    <li>name the ZIP file “{manuscript number}.zip” (e.g., “AER-2023-0000.zip”)</li>
    <li>upload it at the URL (provided))</li>
  </ul>

  <p>The temporary upload URL is xxxxx. It will only be open as a long as the openICPSR website is inaccessible. Once openICPSR is back online, you will need to complete the normal upload process as outlined at https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html.
“</p>
</blockquote>

<p>The URL will be contained in the email message that depositors will receive.</p>

<p>IMPORTANT: This only delays, but does not replace the usual deposit process. Authors will ultimately still need to complete the deposit, once openICPSR is back online.</p>

<h2 id="for-interested-readers">For interested readers</h2>

<p>Unfortunately, there is no short-term replacement for access to published replication packages. ICPSR has a robust preservation strategy, and we expect no long-term impact on availability of replication packages. We hope that they are able to resolve the issues affecting their network as soon as possible.</p>

<h2 id="any-concerns">Any concerns</h2>

<p>If you have any concerns regarding a specific replication package, please contact the Data Editor by email.</p>]]></content><author><name>AEA Data Editor</name></author><category term="openICPSR" /><category term="problem" /><category term="notice" /><summary type="html"><![CDATA[THIS HAS BEEN RESOLVED. Please deposit as usual! The AEA uses the openICPSR repository for the deposit and dissemination of replication packages. On Sunday, Aug 27 2023, the University of Michigan, the home institution for openICPSR, had to take all of their systems offline for an undetermined time period. The AEA Code and Data Repository is therefore not accessible at this time, for both authors seeking to deposit their required replication package, and for interested readers to obtain published replication packages. A few operational notes from us follow.]]></summary></entry><entry><title type="html">Details on how to update a replication package post-publication</title><link href="https://aeadataeditor.github.io/posts/2023-08-20-examples-of-updates" rel="alternate" type="text/html" title="Details on how to update a replication package post-publication" /><published>2023-08-20T00:00:00-04:00</published><updated>2023-08-20T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/examples-of-updates</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-08-20-examples-of-updates"><![CDATA[<p>I have previously posted about <a href="https://aeadataeditor.github.io/posts/2022-11-09-updating-post-publication">how to update a replication package, after initial publication</a>. We do get more than a dozen such updates a year (see my <a href="https://aeadataeditor.github.io/publications/">annual reports</a>). I’ll describe the process and give a few examples here.</p>

<!-- more -->

<h2 id="when-to-update">When to update</h2>

<p>You should update your replication package if</p>

<ul>
  <li>there is an error in one of the code or data files that was detected subsequent to publication.</li>
  <li>you are aware of an improvement in accessibility of the replication package (data in more robust data formats, additional data documentation, more efficient code)</li>
  <li>you are made aware of some other issue with the replication package that needs to be addressed</li>
</ul>

<p>Only the original authors can make these changes, but anybody can detect such changes. We field change requests coming from students attempting to replicate a package, researchers with access to restricted data that we did not have access to, or authors themselves who noticed, or were made aware of, issues with their deposit. In all cases where the initial notice does not involve the author, the Data Editor, or the Co-editor responsible for the article, will contact the author.</p>

<h2 id="whom-to-contact">Whom to contact</h2>

<p>For changes that do not affect the results in the actual manuscript, it is sufficient to contact the Data Editor (I may still reach out to the Editor in charge). For any corrections that affect manuscript or online appendix tables, figure, results, or conclusions, please contact the Editor in charge first, as these may require a corrigendum, erratum, or other corrections.</p>

<blockquote>
  <p>The remainder of this post will only address the changes made to the replication package, not to any other published materials.</p>
</blockquote>

<h2 id="how-to-update">How to update</h2>

<p>In a nutshell, this is described in the <a href="https://www.aeaweb.org/journals/data/policy-revisions">policy</a>, you should</p>

<ul>
  <li>Do <strong>NOT</strong> make a new deposit; edit the old deposit (<a href="mailto:dataeditor@aeapubs.org">contact us</a> if you don’t remember who  last accessed the deposit, or if your email has changed), creating a new version (if you didn’t use openICPSR, refer to the relevant repository’s instructions on how to create a new <strong>version</strong>):</li>
</ul>

<p><img src="/images/icpsr-create-new-version.png" alt="Create a new version on openICPSR" /></p>

<ul>
  <li>Prepare the changes: Download the <strong>published</strong> archive (not your private copy of it), and make changes to code and/or data.</li>
  <li>Edit the README and possibly create a “Changes.txt” or “Changelog.txt”.</li>
  <li>In the deposit, delete the INDIVIDUAL files that need to be changed, then re-upload them (openICPSR does not allow you to simply replace by uploading… sorry)</li>
  <li>Make changes to <strong>NO</strong> other files.</li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html#submitting-to-the-data-editor">Re-submit</a> to the Data Editor.</li>
</ul>

<h2 id="what-happens-after-update">What happens after update</h2>

<p>After you have submitted the update to the replication package,</p>

<ul>
  <li>the Data Editor will review the deposit for compliance with the  <a href="https://www.aeaweb.org/journals/data/policy-revisions">policy</a>. Changes may be requested.</li>
  <li>the Data Editor will publish the revised replication package (usually, this becomes <strong>V2</strong>). A new DOI is assigned.</li>
  <li>Depending on the type of change being made, the “version of record” (linked from the article page) is adjusted (see <a href="https://www.aeaweb.org/journals/data/policy-revisions#version">what the policy has to say about that</a>). NOTE: Usually, the version of record is NOT modified.</li>
  <li>In all cases, accessing the original deposit (<strong>V1</strong>) will show a banner at the top, directing interested parties to the new version.</li>
</ul>

<p><img src="/images/icpsr-version2-banner.png" alt="Redirect on openICPSR page" /></p>

<h2 id="examples">Examples</h2>

<ul>
  <li>
    <p><a href="https://www.aeaweb.org/journals/data/policy-revisions#version">https://doi.org/10.3886/E148361V1</a> - <a href="https://doi.org/10.3886/E148361V2">https://doi.org/10.3886/E148361V2</a> - only the README was updated (clarified), see top of the (revised) README. For this one, we updated the version of record - see link at <a href="https://doi.org/10.1257/aeri.20210201">https://doi.org/10.1257/aeri.20210201</a> - because no code was impacted, and the change was a clarification. The change was initiated by the authors.</p>
  </li>
  <li>
    <p><a href="https://doi.org/10.3886/E172902V1">https://doi.org/10.3886/E172902V1</a> - <a href="https://doi.org/10.3886/E172902V2">https://doi.org/10.3886/E172902V2</a> - A (small) piece of code was corrected. Since this affected the functionality of the code (though no output from the code), this did NOT change version of record - see the link to the replication package at <a href="https://doi.org/10.1257/aer.20200961">https://doi.org/10.1257/aer.20200961</a>. A researcher contacted the Data Editor, who then contacted the authors.</p>
  </li>
  <li>
    <p><a href="https://doi.org/10.3886/E184461V1">https://doi.org/10.3886/E184461V1</a> - <a href="https://doi.org/10.3886/E184461V2">https://doi.org/10.3886/E184461V2</a> - A data-related issue (copyright and terms of use) required us to remove some data files from the deposit. This is one of the few cases where a replication package was “de-accessioned” – the original deposit is still viewable (the list of files is still there), but cannot be downloaded. In this case, <strong>V2</strong> became the version of record because (a) <strong>V1</strong> is no longer functional (b) the impact does not affect the results of the (successful) reproduction, though it is now clear that part of the package needs proprietary data.</p>
  </li>
</ul>

<h2 id="some-helpful-links">Some helpful links</h2>

<ul>
  <li><a href="https://www.aeaweb.org/journals/data/policy-revisions">The replication package revision policy at the AEA</a></li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html#submitting-to-the-data-editor">Guidance on how to re-submit</a> (hint: it’s much like the initial submission…)</li>
</ul>]]></content><author><name>AEA Data Editor</name></author><category term="updating" /><category term="improvement" /><category term="reproducibility" /><summary type="html"><![CDATA[I have previously posted about how to update a replication package, after initial publication. We do get more than a dozen such updates a year (see my annual reports). I’ll describe the process and give a few examples here.]]></summary></entry><entry><title type="html">Some remarks on challenges and solutions when conducting reproducibility checking for two recent AEJ:Applied articles</title><link href="https://aeadataeditor.github.io/posts/2023-03-29-challenges-aejapplied-202304" rel="alternate" type="text/html" title="Some remarks on challenges and solutions when conducting reproducibility checking for two recent AEJ:Applied articles" /><published>2023-03-29T00:00:00-04:00</published><updated>2023-03-29T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/challenges-aejapplied-202304</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-03-29-challenges-aejapplied-202304"><![CDATA[<p>I wanted to briefly discuss the challenges when conducting data provenance and reproducibility checks, for complex and highly interesting articles, with the example of two articles in the most recent (<a href="https://www.aeaweb.org/issues/715">April 2023</a>) issue of the American Economic Journal: Applied Economics. The solutions involved online compute capsules and alternative repositories.</p>

<!-- more -->

<p>The two articles are</p>

<ul>
  <li>
    <p><a href="https://doi.org/10.1257/app.20200398">Infrastructure Costs</a> (Leah Brooks and Zachary Liscow)</p>
  </li>
  <li>
    <p><a href="https://doi.org/10.1257/app.20200196">DETER-ing Deforestation in the Amazon: Environmental Monitoring and Law Enforcement</a> (Juliano Assunção, Clarissa Gandour and Romero Rocha)</p>
  </li>
</ul>

<p>Each of these articles posed a different challenge to my team. In all cases, they are highly complex analyses with large, sometimes very large, data sources.</p>

<h2 id="using-zenodo-to-augment-primary-replication-packages">Using Zenodo to augment primary replication packages</h2>

<p>First, let me consider the impressive work by 
Leah Brooks and Zachary Liscow, “<a href="https://doi.org/10.1257/app.20200398">Infrastructure Costs</a>”.</p>

<p><img src="/images/aejapplied-715-2.png" alt="Brooks and Liscow paper" /></p>

<p>The paper conducts an investigation of the cost of building the US Interstate Highway System, from the 60s to the 80s. There are a lot of miles in the Highway system (about 49,000 miles or 79,000 kilometers), and their data covers a long time period in which much data was not necessarily easily available as digital records. As they so blithely say, “we digitize annual state-level spending data from 1956 to the present… first to use more than a few years of these data…”. While that’s already a lot, they also use the “USGS National Map 3DEP 1-Arc-second Digital Elevation Models” and “National Wetlands Inventory of the United States - State and Substate Shapefiles” (among others) in the analysis. Each of these sources have several hundred files and several dozen gigabytes of data:</p>

<table>
  <thead>
    <tr>
      <th>Component</th>
      <th>Size (GB)</th>
      <th>Count (files)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>USGS National Map 3DEP 1-Arc-second Digital Elevation Models</td>
      <td>83.8</td>
      <td>3449</td>
    </tr>
    <tr>
      <td>National Wetlands Inventory of the United States - State and Substate Shapefiles</td>
      <td>49.3</td>
      <td>150</td>
    </tr>
    <tr>
      <td>Remainder of the <a href="https://doi.org/10.3886/E144281V1">replication package</a></td>
      <td>18.53</td>
      <td>940</td>
    </tr>
  </tbody>
</table>

<p>While both of these sources are in the public domain, they are large, and were, in fact, augmented by the authors.</p>

<p>Two problems arose for us: how do we make these data available to others, and how do we highlight the value-added that the authors have contributed?</p>

<p>The first problem arises because openICPSR, the repository used as the primary deposit for AEA replication packages, does not handle deposits of more than 20GB gracefully. As of 2023, it is slow to create such deposits, and very slow for others to re-use these packages. There also appear to be hard limits around 30GB and 1,000 files.</p>

<p>The second problem is a more philosophical one. While anybody can go back to USGS or the US. Fish and Wildlife Service to obtain these data, most US government agencies do not properly curate or preserve their data. These data may not be there, or they may no longer be there in this format. In fact, for the USGS data, the authors used DVDs that were originally purchased from the US government, augmented by targeted downloads from an interactive, non-scriptable downloader, to fill in missing rasters.</p>

<p>We addressed both of these problems by creating two auxiliary deposits on Zenodo, and removing the data from the primary replication package on openICPSR. The resulting two Zenodo archives are part of the (growing) <a href="https://zenodo.org/communities/aeajournals/">American Economic Association community on Zenodo</a>:</p>

<p><img src="/images/aejapplied-715-2-zenodo-1.png" alt="one of the Zenodo deposits" /></p>

<ul>
  <li>U.S. Geological Survey, &amp; Brooks, Leah. (2022). “USGS National Map 3DEP 1 Arc-second Digital Elevation Models (DEMs): Full Coverage for U.S. Interstate Highway System [Data set].” Zenodo. <a href="https://doi.org/10.5281/zenodo.5830968">https://doi.org/10.5281/zenodo.5830968</a></li>
  <li>U.S. Fish &amp; Wildlife Service. (2022). “National Wetlands Inventory of the United States - State and Substate Shapefiles (Version v2018) [Data set].” Zenodo. <a href="https://doi.org/10.5281/zenodo.5823387">https://doi.org/10.5281/zenodo.5823387</a></li>
</ul>

<p>While downloading nearly 130GB of data from any repository can still be challenging in time and robustness, these data resources are now available.</p>

<h3 id="tools-that-we-used">Tools that we used</h3>

<ul>
  <li><a href="https://github.com/AEADataEditor/Upload-to-Zenodo">Zenodo uploader via API</a>, originally written by a former RA, to upload all files.</li>
  <li><a href="https://github.com/dvolgyes/zenodo_get"><code class="language-plaintext highlighter-rouge">zenodo_get</code></a> to re-download thousands of files.</li>
</ul>

<p>Oh, and because it still takes over 250GB of local disk space and substantial processing time to reproduce the replication package, this is one of the replication packages that we inspected (deeply), but which we did NOT actually run. However, we are confident that a replicator with sufficient resources (including time) can do so. Nevertheless, should a replicator encounter issues, please do contact us, and we will, in turn, contact the authors, if appropriate, to update their replication package as per our <a href="https://www.aeaweb.org/journals/data/policy-revisions">revision policy</a>.</p>

<h2 id="using-compute-capsules-for-easy-reproduction">Using compute capsules for easy reproduction</h2>

<p>I have previously discussed the <a href="https://aeadataeditor.github.io/posts/2021-11-16-docker">use of Docker in economics</a>. In “<a href="https://doi.org/10.1257/app.20200196">DETER-ing Deforestation in the Amazon: Environmental Monitoring and Law Enforcement</a>”, Juliano Assunção, Clarissa Gandour and Romero Rocha collect a whole lot of publicly available Brazilian data, clean it all, and for this article, analyze a particular aspect of it (cloud cover preventing the DETER system from working in a particular area). Because this is a part of what their home institution (the <a href="https://cpiglobal.org">Climate Policy Initiative</a>) does regularly, the data cleaning is part of a data processing pipeline, and run in R. The analysis, as with so many analyses created by economists, runs in Stata.</p>

<p>While it is possible to create a pipeline using both R and Stata, either by combining multiple containers in sequence, or <a href="https://github.com/AEADataEditor/docker-stata-R-example">by combining Stata and R in the same container</a>, this is typically not possible (or very hard) in the easy-to-use online interfaces to Docker such as <a href="https://codeocean.com">CodeOcean</a> and <a href="https://wholetale.org">Wholetale</a>. However, in this case, we wanted to make the analysis easily accessible to others. That also argued against combining the two parts into a single compute capsule: the data processing takes about three weeks, while the core analysis only takes a few minutes.</p>

<p>So in coordination with me, the authors (corresponding author Clarissa Gandour) split the analysis out in a self-standing “capsule” (<a href="https://doi.org/10.24433/CO.5098352.v1">https://doi.org/10.24433/CO.5098352.v1</a>), while the whole processing pipeline is made available in the main replication package on openICPSR (<a href="https://doi.org/10.3886/E132281V1">https://doi.org/10.3886/E132281V1</a>). Interested replicators can go through the whole data cleaning process (as required by <a href="https://www.aeaweb.org/journals/data/data-code-policy">our policy</a>), but if instead they want to focus on the analysis, they can do so with a couple of clicks in CodeOcean.</p>

<p><img src="/images/aejapplied-715-6-codeocean.png" alt="Copy a capsule" /></p>

<p>They can, of course, also run the analysis on their own computer, either following the instructions in the README while running with their own copy of Stata, or running it on their own computer through Docker, using the CodeOcean-provided container combined with their own license.</p>

<p>In this case, we did not run the final version of the data cleaning pipeline, because we inspected the code, ran parts of it, and assessed that it was reproducible (we had run the first draft of the data cleaning pipeline, and sent the authors our feedback). We <em>also</em> did not run the analysis part - not because it’s not feasible, but because the authors ran the analysis on CodeOcean to produce the output in the manuscript. It is that output - together with a screen capture of Stata as it is chugging along - which is visible in the CodeOcean interface:</p>

<p><img src="/images/aejapplied-715-6-codeocean-run.png" alt="Results from run" /></p>

<p>We thus did not <em>need</em> to run it, because the authors had run it in an environment which we know is fundamentally reproducible.</p>

<h3 id="tools-that-we-used-1">Tools that we used</h3>

<ul>
  <li><a href="https://codeocean.com">CodeOcean</a> - academic users have 10 free hours per month</li>
  <li><a href="https://docs.docker.com/engine/install/ubuntu/">Docker</a> on local machines, to test the independent reproducibility of the package
    <ul>
      <li>including the <a href="https://hub.docker.com/r/dataeditors/stata17">Docker Stata image</a> that <a href="https://github.com/AEADataEditor/docker-stata">I prepare</a></li>
    </ul>
  </li>
</ul>

<h2 id="what-are-still-unsolved-issues-in-these-scenarios">What are still unsolved issues in these scenarios</h2>

<p>The two articles illustrate a few key points when it comes to larger-than-usual analyses. First, despite the size of the data, it is feasible to archive and preserve the data in ways that makes it usable for others. However, neither article is fully integrated, when theoretically that is possible. In the Brooks and Liscow article, the current version of the code does not dynamically download the Zenodo-hosted data - that is a manual process. In the Assunção, Gandour, and Rocha article, the data cleaning pipeline is not in CodeOcean, because in the end, the authors would still have needed to copy the output from their data cleaning into the analysis capsule.</p>

<p>Would it be possible to chain two CodeOcean capsules - one running the “DETER” three-week data cleaning pipeline, the other the 5 minute data analysis code?</p>

<p><img src="/images/chained-analysis.png" alt="Chained capsules" /></p>

<p>As of 2023, it is not, at least not in the public product (it is a feature of CodeOcean’s on-premise solutions, however). Could the Brooks and Liscow article have integrated data storage on Zenodo from the start? Solutions that do so exist (see <a href="https://snakemake.readthedocs.io/en/v7.6.2/snakefiles/remote_files.html">Snakemake</a> and one of its front-ends <a href="https://show-your.work/en/latest/">show your work!</a>), but are rarely seen in economics (and come with their own reproducibility demons).</p>

<p>The Assunção, Gandour, and Rocha capsule is, however, an example of how porting the analysis code for the article, and then using it as the primary interface for the final versions is feasible.</p>

<p>While time-consuming, the upload of some of the key value-added files from the Brooks and Liscow article have already proven useful to others - while the original replication package has had 34 unique visitors, the Zenodo-hosted data have had 173 and 103 unique visitors as of this writing! Whether this ultimately leads to more citations (another metric that apparently some folks care about) remains to be seen in the future.</p>

<h2 id="disclosures">Disclosures</h2>

<p>As noted, CodeOcean currently offers academics 10 hours of compute time per month for free. They have also supported the Data Editor’s work with a generous compute quota (which allows us to run weeks-long analyses). I am neither paid, nor do I detain any shares in CodeOcean, nor do I receive a commission for any new customers signing up for a CodeOcean account (which in fact is free). Docker is a commercial company, and I am a paying individual subscriber in order to host container images that the AEA uses. Running containers on personal computers remains free, and running containers on most Linux servers is also free (there are many ways to run containers, not just using Docker’s runtime). Wholetale is an academic infrastructure funded by the National Science Foundation. I have been part of such funding in the past through a <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=1541450&amp;HistoricalAwards=false">subaward</a>, and am currently collaborating with the maintainers of Wholetale on a <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=2209629&amp;HistoricalAwards=false">project</a> that, if successful, would be beneficial to Wholetale. And CodeOcean. And a bunch of other computing infrastructures around the world. Wholetale is free to use, without limitations.</p>

<h2 id="references">References</h2>

<ol class="bibliography"><li><span id="6e56ee69-5af9-4291-94f1-5d6927775bc5">Assunção, Juliano, Clarissa Gandour, and Romero Rocha. 2021. “Replication Capsule for: DETERring Deforestation in the Amazon: Environmental Monitoring and Law Enforcement.” <i>American Economic Journal: Applied Economics</i>. https://doi.org/10.24433/CO.5098352.v1.</span></li>
<li><span id="10.1257/app.20200196">———. 2023. “DETER-Ing Deforestation in the Amazon: Environmental Monitoring and Law Enforcement.” <i>American Economic Journal: Applied Economics</i> 15 (2): 125–56. https://doi.org/10.1257/app.20200196.</span></li>
<li><span id="brooks-liscow-package">Brooks, Leah, and Zachary Liscow. 2023. “Data and Code for: Infrastructure Costs.” [Replication package]. American Economic Association [publisher], 2023. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor]. https://doi.org/10.3886/E144281V1.</span></li>
<li><span id="10.1257/app.20200398">———. 2023. “Infrastructure Costs.” <i>American Economic Journal: Applied Economics</i> 15 (2): 1–30. https://doi.org/10.1257/app.20200398.</span></li>
<li><span id="u_s_fish_wildlife_service_2022_5823387">U.S. Fish &amp; Wildlife Service. 2022. “National Wetlands Inventory of the United States - 
                   State and Substate Shapefiles.” Zenodo. https://doi.org/10.5281/zenodo.5823387.</span></li>
<li><span id="u_s_geological_survey_2022_5830968">U.S. Geological Survey, and Leah Brooks. 2022. “USGS National Map 3DEP 1 Arc-Second Digital 
                   Elevation Models (DEMs): Full Coverage for U.S.
                   Interstate Highway System.” Zenodo. https://doi.org/10.5281/zenodo.5830968.</span></li></ol>
<p>.</p>]]></content><author><name>AEA Data Editor</name></author><category term="big data" /><category term="complex projects" /><category term="AEJ:Applied" /><summary type="html"><![CDATA[I wanted to briefly discuss the challenges when conducting data provenance and reproducibility checks, for complex and highly interesting articles, with the example of two articles in the most recent (April 2023) issue of the American Economic Journal: Applied Economics. The solutions involved online compute capsules and alternative repositories.]]></summary></entry></feed>