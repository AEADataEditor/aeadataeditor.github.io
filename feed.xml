<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.2">Jekyll</generator><link href="https://aeadataeditor.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://aeadataeditor.github.io/" rel="alternate" type="text/html" /><updated>2023-08-29T13:51:10-04:00</updated><id>https://aeadataeditor.github.io/feed.xml</id><title type="html">Office of the AEA Data Editor</title><subtitle>(current: Lars Vilhuber)</subtitle><author><name>AEA Data Editor</name></author><entry><title type="html">Access to replication packages retrieval and deposit interrupted</title><link href="https://aeadataeditor.github.io/posts/2023-08-29-notice-downtime" rel="alternate" type="text/html" title="Access to replication packages retrieval and deposit interrupted" /><published>2023-08-29T00:00:00-04:00</published><updated>2023-08-29T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/notice-downtime</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-08-29-notice-downtime"><![CDATA[<p>The AEA uses the openICPSR repository for the deposit and dissemination of replication packages. On Sunday, <a href="https://umich.edu/announcements/">Aug 27 2023, the University of Michigan, the home institution for openICPSR, had to take all of their systems offline for an undetermined time period</a>. The AEA Code and Data Repository is therefore not accessible at this time, for both authors seeking to deposit their required replication package, and for interested readers to obtain published replication packages. A few operational notes from us follow.</p>

<!-- more -->

<p><img src="/images/umich-down-20230829.png" alt="Screenshot of Umich website" /></p>

<h2 id="for-depositors">For depositors</h2>

<p>Authors who just received a conditional acceptance from an AEA journal are required to deposit their replication package at openICPSR. New depositors will receive a message with temporary instructions (see below). Authors who received their notification in recent weeks, and who are still working on completing their deposit, will also be contacted.</p>

<blockquote>
  <p>“The deposit of replication packages at openICPSR is temporarily interrupted (see https://umich.edu/announcements/). As a temporary measure, you can satisfy your deposit requirement by following these instructions:</p>

  <ul>
    <li>create a ZIP file of your replication package, as you would deposit it on openICPSR. <strong>DO NOT INCLUDE ANY CONFIDENTIAL DATA.</strong></li>
    <li>name the ZIP file “{manuscript number}.zip” (e.g., “AER-2023-0000.zip”)</li>
    <li>upload it at the URL (provided))</li>
  </ul>

  <p>The temporary upload URL is xxxxx. It will only be open as a long as the openICPSR website is inaccessible. Once openICPSR is back online, you will need to complete the normal upload process as outlined at https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html.
“</p>
</blockquote>

<p>The URL will be contained in the email message that depositors will receive.</p>

<p>IMPORTANT: This only delays, but does not replace the usual deposit process. Authors will ultimately still need to complete the deposit, once openICPSR is back online.</p>

<h2 id="for-interested-readers">For interested readers</h2>

<p>Unfortunately, there is no short-term replacement for access to published replication packages. ICPSR has a robust preservation strategy, and we expect no long-term impact on availability of replication packages. We hope that they are able to resolve the issues affecting their network as soon as possible.</p>

<h2 id="any-concerns">Any concerns</h2>

<p>If you have any concerns regarding a specific replication package, please contact the Data Editor by email.</p>]]></content><author><name>AEA Data Editor</name></author><category term="openICPSR" /><category term="problem" /><category term="notice" /><summary type="html"><![CDATA[The AEA uses the openICPSR repository for the deposit and dissemination of replication packages. On Sunday, Aug 27 2023, the University of Michigan, the home institution for openICPSR, had to take all of their systems offline for an undetermined time period. The AEA Code and Data Repository is therefore not accessible at this time, for both authors seeking to deposit their required replication package, and for interested readers to obtain published replication packages. A few operational notes from us follow.]]></summary></entry><entry><title type="html">Details on how to update a replication package post-publication</title><link href="https://aeadataeditor.github.io/posts/2023-08-20-examples-of-updates" rel="alternate" type="text/html" title="Details on how to update a replication package post-publication" /><published>2023-08-20T00:00:00-04:00</published><updated>2023-08-20T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/examples-of-updates</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-08-20-examples-of-updates"><![CDATA[<p>I have previously posted about <a href="https://aeadataeditor.github.io/posts/2022-11-09-updating-post-publication">how to update a replication package, after initial publication</a>. We do get more than a dozen such updates a year (see my <a href="https://aeadataeditor.github.io/publications/">annual reports</a>). I’ll describe the process and give a few examples here.</p>

<!-- more -->

<h2 id="when-to-update">When to update</h2>

<p>You should update your replication package if</p>

<ul>
  <li>there is an error in one of the code or data files that was detected subsequent to publication.</li>
  <li>you are aware of an improvement in accessibility of the replication package (data in more robust data formats, additional data documentation, more efficient code)</li>
  <li>you are made aware of some other issue with the replication package that needs to be addressed</li>
</ul>

<p>Only the original authors can make these changes, but anybody can detect such changes. We field change requests coming from students attempting to replicate a package, researchers with access to restricted data that we did not have access to, or authors themselves who noticed, or were made aware of, issues with their deposit. In all cases where the initial notice does not involve the author, the Data Editor, or the Co-editor responsible for the article, will contact the author.</p>

<h2 id="whom-to-contact">Whom to contact</h2>

<p>For changes that do not affect the results in the actual manuscript, it is sufficient to contact the Data Editor (I may still reach out to the Editor in charge). For any corrections that affect manuscript or online appendix tables, figure, results, or conclusions, please contact the Editor in charge first, as these may require a corrigendum, erratum, or other corrections.</p>

<blockquote>
  <p>The remainder of this post will only address the changes made to the replication package, not to any other published materials.</p>
</blockquote>

<h2 id="how-to-update">How to update</h2>

<p>In a nutshell, this is described in the <a href="https://www.aeaweb.org/journals/data/policy-revisions">policy</a>, you should</p>

<ul>
  <li>Do <strong>NOT</strong> make a new deposit; edit the old deposit (<a href="mailto:dataeditor@aeapubs.org">contact us</a> if you don’t remember who  last accessed the deposit, or if your email has changed), creating a new version (if you didn’t use openICPSR, refer to the relevant repository’s instructions on how to create a new <strong>version</strong>):</li>
</ul>

<p><img src="/images/icpsr-create-new-version.png" alt="Create a new version on openICPSR" /></p>

<ul>
  <li>Prepare the changes: Download the <strong>published</strong> archive (not your private copy of it), and make changes to code and/or data.</li>
  <li>Edit the README and possibly create a “Changes.txt” or “Changelog.txt”.</li>
  <li>In the deposit, delete the INDIVIDUAL files that need to be changed, then re-upload them (openICPSR does not allow you to simply replace by uploading… sorry)</li>
  <li>Make changes to <strong>NO</strong> other files.</li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html#submitting-to-the-data-editor">Re-submit</a> to the Data Editor.</li>
</ul>

<h2 id="what-happens-after-update">What happens after update</h2>

<p>After you have submitted the update to the replication package,</p>

<ul>
  <li>the Data Editor will review the deposit for compliance with the  <a href="https://www.aeaweb.org/journals/data/policy-revisions">policy</a>. Changes may be requested.</li>
  <li>the Data Editor will publish the revised replication package (usually, this becomes <strong>V2</strong>). A new DOI is assigned.</li>
  <li>Depending on the type of change being made, the “version of record” (linked from the article page) is adjusted (see <a href="https://www.aeaweb.org/journals/data/policy-revisions#version">what the policy has to say about that</a>). NOTE: Usually, the version of record is NOT modified.</li>
  <li>In all cases, accessing the original deposit (<strong>V1</strong>) will show a banner at the top, directing interested parties to the new version.</li>
</ul>

<p><img src="/images/icpsr-version2-banner.png" alt="Redirect on openICPSR page" /></p>

<h2 id="examples">Examples</h2>

<ul>
  <li>
    <p><a href="https://www.aeaweb.org/journals/data/policy-revisions#version">https://doi.org/10.3886/E148361V1</a> - <a href="https://doi.org/10.3886/E148361V2">https://doi.org/10.3886/E148361V2</a> - only the README was updated (clarified), see top of the (revised) README. For this one, we updated the version of record - see link at <a href="https://doi.org/10.1257/aeri.20210201">https://doi.org/10.1257/aeri.20210201</a> - because no code was impacted, and the change was a clarification. The change was initiated by the authors.</p>
  </li>
  <li>
    <p><a href="https://doi.org/10.3886/E172902V1">https://doi.org/10.3886/E172902V1</a> - <a href="https://doi.org/10.3886/E172902V2">https://doi.org/10.3886/E172902V2</a> - A (small) piece of code was corrected. Since this affected the functionality of the code (though no output from the code), this did NOT change version of record - see the link to the replication package at <a href="https://doi.org/10.1257/aer.20200961">https://doi.org/10.1257/aer.20200961</a>. A researcher contacted the Data Editor, who then contacted the authors.</p>
  </li>
  <li>
    <p><a href="https://doi.org/10.3886/E184461V1">https://doi.org/10.3886/E184461V1</a> - <a href="https://doi.org/10.3886/E184461V2">https://doi.org/10.3886/E184461V2</a> - A data-related issue (copyright and terms of use) required us to remove some data files from the deposit. This is one of the few cases where a replication package was “de-accessioned” – the original deposit is still viewable (the list of files is still there), but cannot be downloaded. In this case, <strong>V2</strong> became the version of record because (a) <strong>V1</strong> is no longer functional (b) the impact does not affect the results of the (successful) reproduction, though it is now clear that part of the package needs proprietary data.</p>
  </li>
</ul>

<h2 id="some-helpful-links">Some helpful links</h2>

<ul>
  <li><a href="https://www.aeaweb.org/journals/data/policy-revisions">The replication package revision policy at the AEA</a></li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html#submitting-to-the-data-editor">Guidance on how to re-submit</a> (hint: it’s much like the initial submission…)</li>
</ul>]]></content><author><name>AEA Data Editor</name></author><category term="updating" /><category term="improvement" /><category term="reproducibility" /><summary type="html"><![CDATA[I have previously posted about how to update a replication package, after initial publication. We do get more than a dozen such updates a year (see my annual reports). I’ll describe the process and give a few examples here.]]></summary></entry><entry><title type="html">Some remarks on challenges and solutions when conducting reproducibility checking for two recent AEJ:Applied articles</title><link href="https://aeadataeditor.github.io/posts/2023-03-29-challenges-aejapplied-202304" rel="alternate" type="text/html" title="Some remarks on challenges and solutions when conducting reproducibility checking for two recent AEJ:Applied articles" /><published>2023-03-29T00:00:00-04:00</published><updated>2023-03-29T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/challenges-aejapplied-202304</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-03-29-challenges-aejapplied-202304"><![CDATA[<p>I wanted to briefly discuss the challenges when conducting data provenance and reproducibility checks, for complex and highly interesting articles, with the example of two articles in the most recent (<a href="https://www.aeaweb.org/issues/715">April 2023</a>) issue of the American Economic Journal: Applied Economics. The solutions involved online compute capsules and alternative repositories.</p>

<!-- more -->

<p>The two articles are</p>

<ul>
  <li>
    <p><a href="https://doi.org/10.1257/app.20200398">Infrastructure Costs</a> (Leah Brooks and Zachary Liscow)</p>
  </li>
  <li>
    <p><a href="https://doi.org/10.1257/app.20200196">DETER-ing Deforestation in the Amazon: Environmental Monitoring and Law Enforcement</a> (Juliano Assunção, Clarissa Gandour and Romero Rocha)</p>
  </li>
</ul>

<p>Each of these articles posed a different challenge to my team. In all cases, they are highly complex analyses with large, sometimes very large, data sources.</p>

<h2 id="using-zenodo-to-augment-primary-replication-packages">Using Zenodo to augment primary replication packages</h2>

<p>First, let me consider the impressive work by 
Leah Brooks and Zachary Liscow, “<a href="https://doi.org/10.1257/app.20200398">Infrastructure Costs</a>”.</p>

<p><img src="/images/aejapplied-715-2.png" alt="Brooks and Liscow paper" /></p>

<p>The paper conducts an investigation of the cost of building the US Interstate Highway System, from the 60s to the 80s. There are a lot of miles in the Highway system (about 49,000 miles or 79,000 kilometers), and their data covers a long time period in which much data was not necessarily easily available as digital records. As they so blithely say, “we digitize annual state-level spending data from 1956 to the present… first to use more than a few years of these data…”. While that’s already a lot, they also use the “USGS National Map 3DEP 1-Arc-second Digital Elevation Models” and “National Wetlands Inventory of the United States - State and Substate Shapefiles” (among others) in the analysis. Each of these sources have several hundred files and several dozen gigabytes of data:</p>

<table>
  <thead>
    <tr>
      <th>Component</th>
      <th>Size (GB)</th>
      <th>Count (files)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>USGS National Map 3DEP 1-Arc-second Digital Elevation Models</td>
      <td>83.8</td>
      <td>3449</td>
    </tr>
    <tr>
      <td>National Wetlands Inventory of the United States - State and Substate Shapefiles</td>
      <td>49.3</td>
      <td>150</td>
    </tr>
    <tr>
      <td>Remainder of the <a href="https://doi.org/10.3886/E144281V1">replication package</a></td>
      <td>18.53</td>
      <td>940</td>
    </tr>
  </tbody>
</table>

<p>While both of these sources are in the public domain, they are large, and were, in fact, augmented by the authors.</p>

<p>Two problems arose for us: how do we make these data available to others, and how do we highlight the value-added that the authors have contributed?</p>

<p>The first problem arises because openICPSR, the repository used as the primary deposit for AEA replication packages, does not handle deposits of more than 20GB gracefully. As of 2023, it is slow to create such deposits, and very slow for others to re-use these packages. There also appear to be hard limits around 30GB and 1,000 files.</p>

<p>The second problem is a more philosophical one. While anybody can go back to USGS or the US. Fish and Wildlife Service to obtain these data, most US government agencies do not properly curate or preserve their data. These data may not be there, or they may no longer be there in this format. In fact, for the USGS data, the authors used DVDs that were originally purchased from the US government, augmented by targeted downloads from an interactive, non-scriptable downloader, to fill in missing rasters.</p>

<p>We addressed both of these problems by creating two auxiliary deposits on Zenodo, and removing the data from the primary replication package on openICPSR. The resulting two Zenodo archives are part of the (growing) <a href="https://zenodo.org/communities/aeajournals/">American Economic Association community on Zenodo</a>:</p>

<p><img src="/images/aejapplied-715-2-zenodo-1.png" alt="one of the Zenodo deposits" /></p>

<ul>
  <li>U.S. Geological Survey, &amp; Brooks, Leah. (2022). “USGS National Map 3DEP 1 Arc-second Digital Elevation Models (DEMs): Full Coverage for U.S. Interstate Highway System [Data set].” Zenodo. <a href="https://doi.org/10.5281/zenodo.5830968">https://doi.org/10.5281/zenodo.5830968</a></li>
  <li>U.S. Fish &amp; Wildlife Service. (2022). “National Wetlands Inventory of the United States - State and Substate Shapefiles (Version v2018) [Data set].” Zenodo. <a href="https://doi.org/10.5281/zenodo.5823387">https://doi.org/10.5281/zenodo.5823387</a></li>
</ul>

<p>While downloading nearly 130GB of data from any repository can still be challenging in time and robustness, these data resources are now available.</p>

<h3 id="tools-that-we-used">Tools that we used</h3>

<ul>
  <li><a href="https://github.com/AEADataEditor/Upload-to-Zenodo">Zenodo uploader via API</a>, originally written by a former RA, to upload all files.</li>
  <li><a href="https://github.com/dvolgyes/zenodo_get"><code class="language-plaintext highlighter-rouge">zenodo_get</code></a> to re-download thousands of files.</li>
</ul>

<p>Oh, and because it still takes over 250GB of local disk space and substantial processing time to reproduce the replication package, this is one of the replication packages that we inspected (deeply), but which we did NOT actually run. However, we are confident that a replicator with sufficient resources (including time) can do so. Nevertheless, should a replicator encounter issues, please do contact us, and we will, in turn, contact the authors, if appropriate, to update their replication package as per our <a href="https://www.aeaweb.org/journals/data/policy-revisions">revision policy</a>.</p>

<h2 id="using-compute-capsules-for-easy-reproduction">Using compute capsules for easy reproduction</h2>

<p>I have previously discussed the <a href="https://aeadataeditor.github.io/posts/2021-11-16-docker">use of Docker in economics</a>. In “<a href="https://doi.org/10.1257/app.20200196">DETER-ing Deforestation in the Amazon: Environmental Monitoring and Law Enforcement</a>”, Juliano Assunção, Clarissa Gandour and Romero Rocha collect a whole lot of publicly available Brazilian data, clean it all, and for this article, analyze a particular aspect of it (cloud cover preventing the DETER system from working in a particular area). Because this is a part of what their home institution (the <a href="https://cpiglobal.org">Climate Policy Initiative</a>) does regularly, the data cleaning is part of a data processing pipeline, and run in R. The analysis, as with so many analyses created by economists, runs in Stata.</p>

<p>While it is possible to create a pipeline using both R and Stata, either by combining multiple containers in sequence, or <a href="https://github.com/AEADataEditor/docker-stata-R-example">by combining Stata and R in the same container</a>, this is typically not possible (or very hard) in the easy-to-use online interfaces to Docker such as <a href="https://codeocean.com">CodeOcean</a> and <a href="https://wholetale.org">Wholetale</a>. However, in this case, we wanted to make the analysis easily accessible to others. That also argued against combining the two parts into a single compute capsule: the data processing takes about three weeks, while the core analysis only takes a few minutes.</p>

<p>So in coordination with me, the authors (corresponding author Clarissa Gandour) split the analysis out in a self-standing “capsule” (<a href="https://doi.org/10.24433/CO.5098352.v1">https://doi.org/10.24433/CO.5098352.v1</a>), while the whole processing pipeline is made available in the main replication package on openICPSR (<a href="https://doi.org/10.3886/E132281V1">https://doi.org/10.3886/E132281V1</a>). Interested replicators can go through the whole data cleaning process (as required by <a href="https://www.aeaweb.org/journals/data/data-code-policy">our policy</a>), but if instead they want to focus on the analysis, they can do so with a couple of clicks in CodeOcean.</p>

<p><img src="/images/aejapplied-715-6-codeocean.png" alt="Copy a capsule" /></p>

<p>They can, of course, also run the analysis on their own computer, either following the instructions in the README while running with their own copy of Stata, or running it on their own computer through Docker, using the CodeOcean-provided container combined with their own license.</p>

<p>In this case, we did not run the final version of the data cleaning pipeline, because we inspected the code, ran parts of it, and assessed that it was reproducible (we had run the first draft of the data cleaning pipeline, and sent the authors our feedback). We <em>also</em> did not run the analysis part - not because it’s not feasible, but because the authors ran the analysis on CodeOcean to produce the output in the manuscript. It is that output - together with a screen capture of Stata as it is chugging along - which is visible in the CodeOcean interface:</p>

<p><img src="/images/aejapplied-715-6-codeocean-run.png" alt="Results from run" /></p>

<p>We thus did not <em>need</em> to run it, because the authors had run it in an environment which we know is fundamentally reproducible.</p>

<h3 id="tools-that-we-used-1">Tools that we used</h3>

<ul>
  <li><a href="https://codeocean.com">CodeOcean</a> - academic users have 10 free hours per month</li>
  <li><a href="https://docs.docker.com/engine/install/ubuntu/">Docker</a> on local machines, to test the independent reproducibility of the package
    <ul>
      <li>including the <a href="https://hub.docker.com/r/dataeditors/stata17">Docker Stata image</a> that <a href="https://github.com/AEADataEditor/docker-stata">I prepare</a></li>
    </ul>
  </li>
</ul>

<h2 id="what-are-still-unsolved-issues-in-these-scenarios">What are still unsolved issues in these scenarios</h2>

<p>The two articles illustrate a few key points when it comes to larger-than-usual analyses. First, despite the size of the data, it is feasible to archive and preserve the data in ways that makes it usable for others. However, neither article is fully integrated, when theoretically that is possible. In the Brooks and Liscow article, the current version of the code does not dynamically download the Zenodo-hosted data - that is a manual process. In the Assunção, Gandour, and Rocha article, the data cleaning pipeline is not in CodeOcean, because in the end, the authors would still have needed to copy the output from their data cleaning into the analysis capsule.</p>

<p>Would it be possible to chain two CodeOcean capsules - one running the “DETER” three-week data cleaning pipeline, the other the 5 minute data analysis code?</p>

<p><img src="/images/chained-analysis.png" alt="Chained capsules" /></p>

<p>As of 2023, it is not, at least not in the public product (it is a feature of CodeOcean’s on-premise solutions, however). Could the Brooks and Liscow article have integrated data storage on Zenodo from the start? Solutions that do so exist (see <a href="https://snakemake.readthedocs.io/en/v7.6.2/snakefiles/remote_files.html">Snakemake</a> and one of its front-ends <a href="https://show-your.work/en/latest/">show your work!</a>), but are rarely seen in economics (and come with their own reproducibility demons).</p>

<p>The Assunção, Gandour, and Rocha capsule is, however, an example of how porting the analysis code for the article, and then using it as the primary interface for the final versions is feasible.</p>

<p>While time-consuming, the upload of some of the key value-added files from the Brooks and Liscow article have already proven useful to others - while the original replication package has had 34 unique visitors, the Zenodo-hosted data have had 173 and 103 unique visitors as of this writing! Whether this ultimately leads to more citations (another metric that apparently some folks care about) remains to be seen in the future.</p>

<h2 id="disclosures">Disclosures</h2>

<p>As noted, CodeOcean currently offers academics 10 hours of compute time per month for free. They have also supported the Data Editor’s work with a generous compute quota (which allows us to run weeks-long analyses). I am neither paid, nor do I detain any shares in CodeOcean, nor do I receive a commission for any new customers signing up for a CodeOcean account (which in fact is free). Docker is a commercial company, and I am a paying individual subscriber in order to host container images that the AEA uses. Running containers on personal computers remains free, and running containers on most Linux servers is also free (there are many ways to run containers, not just using Docker’s runtime). Wholetale is an academic infrastructure funded by the National Science Foundation. I have been part of such funding in the past through a <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=1541450&amp;HistoricalAwards=false">subaward</a>, and am currently collaborating with the maintainers of Wholetale on a <a href="https://nsf.gov/awardsearch/showAward?AWD_ID=2209629&amp;HistoricalAwards=false">project</a> that, if successful, would be beneficial to Wholetale. And CodeOcean. And a bunch of other computing infrastructures around the world. Wholetale is free to use, without limitations.</p>

<h2 id="references">References</h2>

<ol class="bibliography"><li><span id="6e56ee69-5af9-4291-94f1-5d6927775bc5">Assunção, Juliano, Clarissa Gandour, and Romero Rocha. 2021. “Replication Capsule for: DETERring Deforestation in the Amazon: Environmental Monitoring and Law Enforcement.” <i>American Economic Journal: Applied Economics</i>. https://doi.org/10.24433/CO.5098352.v1.</span></li>
<li><span id="10.1257/app.20200196">———. 2023. “DETER-Ing Deforestation in the Amazon: Environmental Monitoring and Law Enforcement.” <i>American Economic Journal: Applied Economics</i> 15 (2): 125–56. https://doi.org/10.1257/app.20200196.</span></li>
<li><span id="brooks-liscow-package">Brooks, Leah, and Zachary Liscow. 2023. “Data and Code for: Infrastructure Costs.” [Replication package]. American Economic Association [publisher], 2023. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor]. https://doi.org/10.3886/E144281V1.</span></li>
<li><span id="10.1257/app.20200398">———. 2023. “Infrastructure Costs.” <i>American Economic Journal: Applied Economics</i> 15 (2): 1–30. https://doi.org/10.1257/app.20200398.</span></li>
<li><span id="u_s_fish_wildlife_service_2022_5823387">U.S. Fish &amp; Wildlife Service. 2022. “National Wetlands Inventory of the United States - 
                   State and Substate Shapefiles.” Zenodo. https://doi.org/10.5281/zenodo.5823387.</span></li>
<li><span id="u_s_geological_survey_2022_5830968">U.S. Geological Survey, and Leah Brooks. 2022. “USGS National Map 3DEP 1 Arc-Second Digital 
                   Elevation Models (DEMs): Full Coverage for U.S.
                   Interstate Highway System.” Zenodo. https://doi.org/10.5281/zenodo.5830968.</span></li></ol>
<p>.</p>]]></content><author><name>AEA Data Editor</name></author><category term="big data" /><category term="complex projects" /><category term="AEJ:Applied" /><summary type="html"><![CDATA[I wanted to briefly discuss the challenges when conducting data provenance and reproducibility checks, for complex and highly interesting articles, with the example of two articles in the most recent (April 2023) issue of the American Economic Journal: Applied Economics. The solutions involved online compute capsules and alternative repositories.]]></summary></entry><entry><title type="html">The oldest replication package, overall?</title><link href="https://aeadataeditor.github.io/posts/2023-02-02-oldest-replication-package-jae" rel="alternate" type="text/html" title="The oldest replication package, overall?" /><published>2023-02-02T00:00:00-05:00</published><updated>2023-02-02T00:00:00-05:00</updated><id>https://aeadataeditor.github.io/posts/oldest-replication-package-jae</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-02-02-oldest-replication-package-jae"><![CDATA[<p>After our recent discussion about the oldest <strong>AEA</strong> replication package, I navigated over to the <strong>really</strong> old archive at the Journal of Applied Econometrics. Surprise!</p>

<!-- more -->

<p>After all these years of loving maintenance by James MacKinnon, pioneer of data archives, it has migrated from old-style web pages (<a href="https://en.wikipedia.org/wiki/Gopher_(protocol)">gopher pages</a>, originally, I think!)</p>

<p>The new JAE archive is now at ZBW in Germany.</p>

<h2 id="old-pages">Old pages</h2>

<p>The <a href="http://qed.econ.queensu.ca/jae/legacy.html">old pages</a> were at Queen’s University, Kingston, ON, Canada.</p>

<p><img src="/images/jae-old-2022.png" alt="old JAE Data Archive pages" /></p>

<h2 id="new-pages">New pages</h2>

<p>The <a href="https://journaldata.zbw.eu/journals/jae">new pages</a> are at the ZBW in Germany.</p>

<p><img src="/images/jae-new-2023.png" alt="new JAE Archive pages" /></p>

<h2 id="oldest-replication-package">Oldest replication package</h2>

<p>The honors of the oldest replication package should probably go to … Roger Koenker!</p>

<blockquote>
  <p>Koenker, Roger (1988): Asymptotic theory and econometric practice (replication data). Version: 1. Journal of Applied Econometrics. Dataset. http://dx.doi.org/10.15456/jae.2022313.1129100068</p>
</blockquote>

<blockquote>
  <p>Koenker, R. (1988), Asymptotic Theory And Econometric Practice, Journal of Applied Econometrics, 3(2), 139-147. https://doi.org/10.1002/jae.3950030205</p>
</blockquote>]]></content><author><name>AEA Data Editor</name></author><category term="migration" /><category term="reproducibility" /><summary type="html"><![CDATA[After our recent discussion about the oldest AEA replication package, I navigated over to the really old archive at the Journal of Applied Econometrics. Surprise!]]></summary></entry><entry><title type="html">The oldest AEA replication package</title><link href="https://aeadataeditor.github.io/posts/2023-01-26-oldest-replication-package" rel="alternate" type="text/html" title="The oldest AEA replication package" /><published>2023-01-26T00:00:00-05:00</published><updated>2023-01-26T00:00:00-05:00</updated><id>https://aeadataeditor.github.io/posts/oldest-replication-package</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-01-26-oldest-replication-package"><![CDATA[<p>We were recently discussing among data editors what the oldest replication package (in Econ and Political Science) might be.</p>

<!-- more -->

<p>I actually don’t know the answer to that. But the oldest replication package we have in the (migrated) AEA archives is:</p>

<blockquote>
  <p>Frankel, Jeffrey A., and Romer, David H. Replication data for: Does Trade Cause Growth? Nashville, TN: American Economic Association [publisher], 1999. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2019-10-12. <a href="https://doi.org/10.3886/E113211V1">https://doi.org/10.3886/E113211V1</a>.</p>
</blockquote>

<p>which accompanies this article:</p>

<blockquote>
  <p>Frankel, Jeffrey A, and David Romer. “Does Trade Cause Growth?” American Economic Review 89, no. 3 (June 1999): 379–99. <a href="https://doi.org/10.1257/aer.89.3.379">https://doi.org/10.1257/aer.89.3.379</a>.</p>
</blockquote>

<p>Find out yourself: a (fully reproducible) way to verify this (there are better ways, of course)</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w"> </span><span class="c1"># I'm lazy</span><span class="w">

</span><span class="n">baseurl</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"https://github.com/AEADataEditor/aea-supplement-migration/raw/master/data/acquired"</span><span class="w">
</span><span class="c1"># alternatively, if running locally</span><span class="w">
</span><span class="c1"># baseurl &lt;- "data/acquired"</span><span class="w">
</span><span class="n">aea_article_data</span><span class="w">  </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="n">file.path</span><span class="p">(</span><span class="n">baseurl</span><span class="p">,</span><span class="w">
                                        </span><span class="s2">"aea_article_data.csv.gz"</span><span class="p">))</span><span class="w">
</span><span class="n">aea_issue_data</span><span class="w">    </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="n">file.path</span><span class="p">(</span><span class="n">baseurl</span><span class="p">,</span><span class="w">
                                        </span><span class="s2">"aea_issue_data.csv.gz"</span><span class="p">))</span><span class="w">
</span><span class="n">aea_icpsr_mapping</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="n">file.path</span><span class="p">(</span><span class="n">baseurl</span><span class="p">,</span><span class="w">
                                        </span><span class="s2">"aea_icpsr_mapping.20191014.txt"</span><span class="p">),</span><span class="w">
                              </span><span class="n">col_names</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"icpsr_doi"</span><span class="p">,</span><span class="s2">"zipfile"</span><span class="p">))</span><span class="w">  </span><span class="o">%&gt;%</span><span class="w"> 
                    </span><span class="n">mutate</span><span class="p">(</span><span class="n">zipfile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">str_remove</span><span class="p">(</span><span class="n">zipfile</span><span class="p">,</span><span class="w">
                                                </span><span class="n">fixed</span><span class="p">(</span><span class="s2">"Original Zip: "</span><span class="p">)))</span><span class="w">
</span><span class="n">aea_deposits</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">left_join</span><span class="p">(</span><span class="n">aea_article_data</span><span class="p">,</span><span class="n">aea_icpsr_mapping</span><span class="p">,</span><span class="w">
                          </span><span class="n">by</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"icpsr_package_name"</span><span class="o">=</span><span class="s2">"zipfile"</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">left_join</span><span class="p">(</span><span class="n">aea_issue_data</span><span class="p">,</span><span class="n">by</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s2">"issue_id"</span><span class="p">))</span><span class="w">
</span><span class="c1"># oldest package</span><span class="w">
</span><span class="n">aea_deposits</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">year</span><span class="o">==</span><span class="nf">min</span><span class="p">(</span><span class="n">aea_deposits</span><span class="o">$</span><span class="n">year</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
  </span><span class="n">select</span><span class="p">(</span><span class="n">doi</span><span class="p">,</span><span class="n">title</span><span class="p">,</span><span class="n">journal</span><span class="p">,</span><span class="n">volume</span><span class="p">,</span><span class="n">issue</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="n">icpsr_doi</span><span class="p">)</span><span class="w">

</span></code></pre></div></div>

<p>(<a href="https://github.com/AEADataEditor/aea-supplement-migration/blob/ab235cbf1e0e1965a71263d15e1d0f3983fdba9c/programs/oldest-package.R">source</a>)</p>]]></content><author><name>AEA Data Editor</name></author><category term="migration" /><category term="reproducibility" /><summary type="html"><![CDATA[We were recently discussing among data editors what the oldest replication package (in Econ and Political Science) might be.]]></summary></entry><entry><title type="html">DCAS v1.0 Compliance Self-Assessment</title><link href="https://aeadataeditor.github.io/posts/2023-01-25-dcas-compliance" rel="alternate" type="text/html" title="DCAS v1.0 Compliance Self-Assessment" /><published>2023-01-25T00:00:00-05:00</published><updated>2023-01-25T00:00:00-05:00</updated><id>https://aeadataeditor.github.io/posts/dcas-compliance</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-01-25-dcas-compliance"><![CDATA[<p><img src="https://datacodestandard.org/assets/img/logo-800.png" alt="DCAS Logo" />
On 2022-12-15, various data editors, including myself, <a href="2022-12-15-launching-dcas">launched the Data and Code Availability Standard (DCAS)</a>.  In this post, I will do a self-assessment of my claim that the AEA’s Data and Code Availability Policy (DCAP) complies with DCAS. The assessment is based on <a href="https://github.com/social-science-data-editors/DCAS/blob/4b68868d3ecd9ac331f9add6813dae4ffe9b8d87/_data/rules.csv">DCAS V1.0 rules</a>, compared to the <a href="https://www.aeaweb.org/journals/data/data-code-policy">DCAP as of January 2023</a>.</p>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<hr />

<h2 id="section-data">Section: Data</h2>

<h3 id="data-availability-statement">Data Availability Statement</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">A Data Availability Statement is provided with detailed enough information such that an independent researcher can replicate the steps needed to access the original data, including any limitations and the expected monetary and time cost of data access.</td>
<td>§ 2: "Authors ... must provide ... information about the data, ... sufficient to permit replication, as well as information about access to data ....

§ 6: "the replication materials shall include... (b) description sufficient to access all data at their original source location,"

§ 9: "...The data availability statement shall provide detailed information on how, where, and under what conditions an independent researcher can access the original source data, as well as author-generated derivative data, and must be explicit and accurate about any restrictions, requirements, payments, and processing delays. The data availability statement shall provide information to assure the reader that the data are available for a sufficiently long period of time."</td>

</table>

<blockquote>
  <p>Comment: The AEA policy is expressed more generally, but de facto, we interpret the policy to require information about limitations - time, location, person type - and cost - time, money - to be crucial, and generally request that information from authors if not provided.</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="raw-data">Raw data</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">Raw data used in the research (primary data collected by the author and secondary data not otherwise available) is made publicly accessible. Exceptions are explained under Rule 1.</td>
<td>§ 6: "the replication materials shall include (a) the data set(s), "</td>

</table>

<blockquote>
  <p>Comment: The AEA policy is not explicit about providing both raw and derivative data.</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="analysis-data">Analysis data</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">Analysis data is provided as part of the replication package unless they can be fully reproduced from accessible data within a reasonable time frame. Exceptions are explained under Rule 1.</td>
<td>§ 6: "the replication materials shall include (a) the data set(s), "</td>

</table>

<blockquote>
  <p>Comment: In practice, raw data must always be provided. If the Data Editor observes that processing times are very long to generate derivative data, or that derivative data can be provided when raw data is confidential, then the Data Editor will request that analysis data be provided. It is NOT sufficient to ONLY provide the analysis data, when raw data are available and can be provided.</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="format">Format</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">The data files are provided in any format compatible with commonly used statistical package or software. Some journals require data files in open, non-proprietary formats.</td>
<td>§ 11: Formats/Data: The data files may be provided in any format compatible with any commonly used statistical package or software. Authors are encouraged to provide data files in open, non-proprietary formats.</td>

</table>

<blockquote>
  <p>Comment: We do not (yet) require that data (also) be provided in non-proprietary formats. In general, source data are rarely in proprietary formats, but analysis data may be. We interpret “non-proprietary format” to mean that open source (free) software can read the provided data. This is not the same as requiring explicitly open, archive-friendly formats (Library of Congress). For instance, Stata data can be reliably read by Python and R code, and we will accept that. We will generally push back on MATLAB-formatted data, since they are hard to read with such software.</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="metadata">Metadata</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">Description of variables and their allowed values are publicly accessible.</td>
<td>§ 11: Formats/Data: Authors should ensure that a meaningful name or description (label) is available for every variable in the provided datasets. Codebooks or similar metadata should describe the allowed values and their meaning for each variable. It is acceptable to reference publicly available documentation for these items.</td>

</table>

<blockquote>
  <p>Comment: This requirement can intersect with the data format. It is acceptable to have data formats (compliant with the previous DCAS rule) that include meaningful value and variable labels. When the data format itself does not support such self-documentation, separate codebooks, or references (citations!) to codebooks, are requested. This is somewhat difficult to enforce, and compliance may not be fully in line with the policy in all cases.</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="citation">Citation</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">All data used in the paper are cited.</td>
<td>§ 8: All source data used in the paper shall be cited, following the AEA Sample References.</td>

</table>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<hr />

<h2 id="section-code">Section: Code</h2>

<h3 id="data-transformation">Data transformation</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">Programs used to create any final and analysis data sets from raw data are included.</td>
<td>§ 2: "Authors ... must provide ... information about the ... programs, and other details of the computations sufficient to permit replication ....

§ 6: "the replication materials shall include... (c) the programs used to create any final and analysis data sets from raw data,"</td>

</table>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="analysis">Analysis</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">Programs producing the computational results (estimation, simulation, model solution, visualization) are included.</td>
<td>§ 2: (as before)

§ 6: "the replication materials shall include... (d) programs used to run the final models,"</td>

</table>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="format-1">Format</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">Code is provided in source format that can be directly interpreted or compiled by appropriate software.</td>
<td>§ 12: Formats/Code: The programs may be provided in any format compatible with commonly used statistical package or software. </td>

</table>

<blockquote>
  <p>Comment: While the AEA policy does not explicitly specify “directly interpreted… by software”, it is understood that “compatible” means it must both work, and be readable. A PDF of a Python program cannot be (easily) interpreted by a Python interpreter. A Word document of Stata code cannot be directly read by Stata.</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<hr />

<h2 id="section-supporting-materials">Section: Supporting materials</h2>

<h3 id="instruments">Instruments</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">If collecting original data through surveys or experiments, survey instruments or experiment instructions as well as details on subject selection are included.</td>
<td>§ 7: For papers collecting original data through surveys or experiments, the replication materials shall also include (f) survey instruments or experiment instructions, (g) computer code for experiment or survey collection mechanisms, and (h) original instructions and details on subject selection. See the supplementary Policy on Experimental and Survey Papers.</td>

</table>

<blockquote>
  <p>Comment: Some of this information may also be provided in Online appendices. The AEA policy is a bit more stringent in that we explicitly treat “experiment instructions” as code when the experiment was conducted using software, though that is, in fact, in line with the overall requirement to have code when code was used.</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="ethics">Ethics</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">If applicable, details are shared about ethics approval.</td>
<td>§ 16: If applicable, approval by ethics boards—the Institutional Review Board (IRB) in the United States and equivalent institutions elsewhere—should be demonstrated by including the name of the ethics board and any approval or exemption record number in the title footnote and the author disclosure statement(s). See the Disclosure Policy.</td>

</table>

<blockquote>
  <p>Comment: The AEA policy is a bit more stringent, in that it specifies exactly what to share about the ethics approval. It is both listed as part of the Disclosure Policy, and mentioned in the “title footnote.”</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="pre-registration">Pre-registration</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">If applicable, pre-registration of the research is identified and cited.</td>
<td>§ 15: It is the policy of the AEA that randomized control trials must be registered on the RCT Registry. All such registrations shall be cited in the title footnote and elsewhere in the paper as appropriate. Please see the RCT Registry policy.</td>

</table>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="documentation">Documentation</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">A README document is included, containing a Data Availability Statement, listing all software and hardware dependencies and requirements (including the expected run time), and explaining how to reproduce the research results. The README follows the schema provided by the [Social Science Data Editors’ template README](https://social-science-data-editors.github.io/template_README/).</td>
<td>§ 13: As part of the archive, authors must provide a README file listing all included files and documenting the purpose, format, and provenance of each file provided, as well as instructing a user on how replication can be conducted. The README shall contain the data availability statement and proper citations for all data used. The README shall follow the schema provided by the Social Science Data Editors' template README.</td>

</table>

<blockquote>
  <p>Comment: While the policy does not explicitly mention “software and hardware dependency and requirements (… run time…)”, it directly references the template README, which does specify those elements.</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<hr />

<h2 id="section-sharing">Section: Sharing</h2>

<h3 id="location">Location</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">Data and programs are archived by the authors in the repositories deemed acceptable by the journal.</td>
<td>§ 3: Data and programs should be archived in the AEA Data and Code Repository. Footnote: Other repositories and archives may be acceptable, as long as these are 
considered to be "trusted" archives or repositories, see guidance. The AEA Data Editor will assess suitability of any such repositories and archives.</td>

</table>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="license">License</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">A license specifies the terms of use of code and data in the replication package. The license allows for replication by researchers unconnected to the original parties.</td>
<td>§ 13: ... The README shall follow the schema provided by the Social Science Data Editors' template README.</td>

</table>

<blockquote>
  <p>Comment: This rule is included by reference - the License is an element for both data and code in the template README - as well as implicitly. The AEA Data and Code Repository defaults to a CC-BY license, and any deviation is scrutinized by the Data Editor to allow researchers unconnected to the original parties to access maximum information, while remaining compliant with restrictions and terms of use.</p>
</blockquote>

<p><!-- group,topic,description,Relate to AEA DCAP,Comment by Data Editor --></p>

<h3 id="omissions">Omissions</h3>

<table>
<thead>
<tr><td>What the DCAS says</td><td>What the AEA DCAP says</td>
</tr></thead>

<td width="35%">The README clearly indicates any omission of the required parts of the package due to legal requirements or limitations or other approved agreements.</td>
<td>§ 3: The Editor should be notified at the time of submission if access to the  data used in a paper is restricted or limited, or if, for some other reason, the requirements above cannot be met.

§4: If data or programs cannot be published in an openly accessible trusted data repository, authors must commit to preserving data and code for a period of no less than five years following publication of the manuscript, and to providing reasonable assistance to requests for clarification and replication.

§ 6: "the replication materials shall include... (b) description sufficient to access all data at their original source location,"</td>

</table>

<blockquote>
  <p>Comment: This rule is implicit in several different paragraphs of the AEA policy. The policy explicitly calls out situations where data may not be accessible or publishable. Authors must explicitly (publicly) commit to preserving materials, and supporting replication attempts. Deviations from the minimum duration are documented in the README. Implicit in 6(b) is the fact that a full description of how to access the data will generally also state that the data cannot be re-published. Finally, the license should be clear about this as well.</p>
</blockquote>

<h2 id="a-few-last-notes">A few last notes</h2>

<p>The current AEA policy was created before the release of the Data and Code Availability Standard. As the AEA and other journals align on a common standard, we will likely more closely adjust how our policy is expressed with the standard, making compliance by authors less well versed in these things easier.</p>

<p>I welcome any feedback.</p>]]></content><author><name>AEA Data Editor</name></author><category term="standards" /><category term="reproducibility" /><category term="provenance" /><category term="dcas" /><summary type="html"><![CDATA[On 2022-12-15, various data editors, including myself, launched the Data and Code Availability Standard (DCAS). In this post, I will do a self-assessment of my claim that the AEA’s Data and Code Availability Policy (DCAP) complies with DCAS. The assessment is based on DCAS V1.0 rules, compared to the DCAP as of January 2023. Section: Data Data Availability Statement What the DCAS saysWhat the AEA DCAP says A Data Availability Statement is provided with detailed enough information such that an independent researcher can replicate the steps needed to access the original data, including any limitations and the expected monetary and time cost of data access. § 2: "Authors ... must provide ... information about the data, ... sufficient to permit replication, as well as information about access to data .... § 6: "the replication materials shall include... (b) description sufficient to access all data at their original source location," § 9: "...The data availability statement shall provide detailed information on how, where, and under what conditions an independent researcher can access the original source data, as well as author-generated derivative data, and must be explicit and accurate about any restrictions, requirements, payments, and processing delays. The data availability statement shall provide information to assure the reader that the data are available for a sufficiently long period of time." Comment: The AEA policy is expressed more generally, but de facto, we interpret the policy to require information about limitations - time, location, person type - and cost - time, money - to be crucial, and generally request that information from authors if not provided. Raw data What the DCAS saysWhat the AEA DCAP says Raw data used in the research (primary data collected by the author and secondary data not otherwise available) is made publicly accessible. Exceptions are explained under Rule 1. § 6: "the replication materials shall include (a) the data set(s), " Comment: The AEA policy is not explicit about providing both raw and derivative data. Analysis data What the DCAS saysWhat the AEA DCAP says Analysis data is provided as part of the replication package unless they can be fully reproduced from accessible data within a reasonable time frame. Exceptions are explained under Rule 1. § 6: "the replication materials shall include (a) the data set(s), " Comment: In practice, raw data must always be provided. If the Data Editor observes that processing times are very long to generate derivative data, or that derivative data can be provided when raw data is confidential, then the Data Editor will request that analysis data be provided. It is NOT sufficient to ONLY provide the analysis data, when raw data are available and can be provided. Format What the DCAS saysWhat the AEA DCAP says The data files are provided in any format compatible with commonly used statistical package or software. Some journals require data files in open, non-proprietary formats. § 11: Formats/Data: The data files may be provided in any format compatible with any commonly used statistical package or software. Authors are encouraged to provide data files in open, non-proprietary formats. Comment: We do not (yet) require that data (also) be provided in non-proprietary formats. In general, source data are rarely in proprietary formats, but analysis data may be. We interpret “non-proprietary format” to mean that open source (free) software can read the provided data. This is not the same as requiring explicitly open, archive-friendly formats (Library of Congress). For instance, Stata data can be reliably read by Python and R code, and we will accept that. We will generally push back on MATLAB-formatted data, since they are hard to read with such software. Metadata What the DCAS saysWhat the AEA DCAP says Description of variables and their allowed values are publicly accessible. § 11: Formats/Data: Authors should ensure that a meaningful name or description (label) is available for every variable in the provided datasets. Codebooks or similar metadata should describe the allowed values and their meaning for each variable. It is acceptable to reference publicly available documentation for these items. Comment: This requirement can intersect with the data format. It is acceptable to have data formats (compliant with the previous DCAS rule) that include meaningful value and variable labels. When the data format itself does not support such self-documentation, separate codebooks, or references (citations!) to codebooks, are requested. This is somewhat difficult to enforce, and compliance may not be fully in line with the policy in all cases. Citation What the DCAS saysWhat the AEA DCAP says All data used in the paper are cited. § 8: All source data used in the paper shall be cited, following the AEA Sample References. Section: Code Data transformation What the DCAS saysWhat the AEA DCAP says Programs used to create any final and analysis data sets from raw data are included. § 2: "Authors ... must provide ... information about the ... programs, and other details of the computations sufficient to permit replication .... § 6: "the replication materials shall include... (c) the programs used to create any final and analysis data sets from raw data," Analysis What the DCAS saysWhat the AEA DCAP says Programs producing the computational results (estimation, simulation, model solution, visualization) are included. § 2: (as before) § 6: "the replication materials shall include... (d) programs used to run the final models," Format What the DCAS saysWhat the AEA DCAP says Code is provided in source format that can be directly interpreted or compiled by appropriate software. § 12: Formats/Code: The programs may be provided in any format compatible with commonly used statistical package or software. Comment: While the AEA policy does not explicitly specify “directly interpreted… by software”, it is understood that “compatible” means it must both work, and be readable. A PDF of a Python program cannot be (easily) interpreted by a Python interpreter. A Word document of Stata code cannot be directly read by Stata. Section: Supporting materials Instruments What the DCAS saysWhat the AEA DCAP says If collecting original data through surveys or experiments, survey instruments or experiment instructions as well as details on subject selection are included. § 7: For papers collecting original data through surveys or experiments, the replication materials shall also include (f) survey instruments or experiment instructions, (g) computer code for experiment or survey collection mechanisms, and (h) original instructions and details on subject selection. See the supplementary Policy on Experimental and Survey Papers. Comment: Some of this information may also be provided in Online appendices. The AEA policy is a bit more stringent in that we explicitly treat “experiment instructions” as code when the experiment was conducted using software, though that is, in fact, in line with the overall requirement to have code when code was used. Ethics What the DCAS saysWhat the AEA DCAP says If applicable, details are shared about ethics approval. § 16: If applicable, approval by ethics boards—the Institutional Review Board (IRB) in the United States and equivalent institutions elsewhere—should be demonstrated by including the name of the ethics board and any approval or exemption record number in the title footnote and the author disclosure statement(s). See the Disclosure Policy. Comment: The AEA policy is a bit more stringent, in that it specifies exactly what to share about the ethics approval. It is both listed as part of the Disclosure Policy, and mentioned in the “title footnote.” Pre-registration What the DCAS saysWhat the AEA DCAP says If applicable, pre-registration of the research is identified and cited. § 15: It is the policy of the AEA that randomized control trials must be registered on the RCT Registry. All such registrations shall be cited in the title footnote and elsewhere in the paper as appropriate. Please see the RCT Registry policy. Documentation What the DCAS saysWhat the AEA DCAP says A README document is included, containing a Data Availability Statement, listing all software and hardware dependencies and requirements (including the expected run time), and explaining how to reproduce the research results. The README follows the schema provided by the [Social Science Data Editors’ template README](https://social-science-data-editors.github.io/template_README/). § 13: As part of the archive, authors must provide a README file listing all included files and documenting the purpose, format, and provenance of each file provided, as well as instructing a user on how replication can be conducted. The README shall contain the data availability statement and proper citations for all data used. The README shall follow the schema provided by the Social Science Data Editors' template README. Comment: While the policy does not explicitly mention “software and hardware dependency and requirements (… run time…)”, it directly references the template README, which does specify those elements. Section: Sharing Location What the DCAS saysWhat the AEA DCAP says Data and programs are archived by the authors in the repositories deemed acceptable by the journal. § 3: Data and programs should be archived in the AEA Data and Code Repository. Footnote: Other repositories and archives may be acceptable, as long as these are considered to be "trusted" archives or repositories, see guidance. The AEA Data Editor will assess suitability of any such repositories and archives. License What the DCAS saysWhat the AEA DCAP says A license specifies the terms of use of code and data in the replication package. The license allows for replication by researchers unconnected to the original parties. § 13: ... The README shall follow the schema provided by the Social Science Data Editors' template README. Comment: This rule is included by reference - the License is an element for both data and code in the template README - as well as implicitly. The AEA Data and Code Repository defaults to a CC-BY license, and any deviation is scrutinized by the Data Editor to allow researchers unconnected to the original parties to access maximum information, while remaining compliant with restrictions and terms of use. Omissions What the DCAS saysWhat the AEA DCAP says The README clearly indicates any omission of the required parts of the package due to legal requirements or limitations or other approved agreements. § 3: The Editor should be notified at the time of submission if access to the data used in a paper is restricted or limited, or if, for some other reason, the requirements above cannot be met. §4: If data or programs cannot be published in an openly accessible trusted data repository, authors must commit to preserving data and code for a period of no less than five years following publication of the manuscript, and to providing reasonable assistance to requests for clarification and replication. § 6: "the replication materials shall include... (b) description sufficient to access all data at their original source location," Comment: This rule is implicit in several different paragraphs of the AEA policy. The policy explicitly calls out situations where data may not be accessible or publishable. Authors must explicitly (publicly) commit to preserving materials, and supporting replication attempts. Deviations from the minimum duration are documented in the README. Implicit in 6(b) is the fact that a full description of how to access the data will generally also state that the data cannot be re-published. Finally, the license should be clear about this as well. A few last notes The current AEA policy was created before the release of the Data and Code Availability Standard. As the AEA and other journals align on a common standard, we will likely more closely adjust how our policy is expressed with the standard, making compliance by authors less well versed in these things easier. I welcome any feedback.]]></summary></entry><entry><title type="html">Launching DCAS</title><link href="https://aeadataeditor.github.io/posts/2022-12-15-launching-dcas" rel="alternate" type="text/html" title="Launching DCAS" /><published>2022-12-15T00:00:00-05:00</published><updated>2022-12-15T00:00:00-05:00</updated><id>https://aeadataeditor.github.io/posts/launching-dcas</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2022-12-15-launching-dcas"><![CDATA[<p><img src="https://datacodestandard.org/assets/img/logo-800.png" alt="DCAS Logo" />
The data editors of the journals of the <a href="https://www.aeaweb.org/journals">American Economic Association</a><sup id="fnref:aea" role="doc-noteref"><a href="#fn:aea" class="footnote" rel="footnote">1</a></sup>, of the <a href="https://res.org.uk/journals/">Royal Economic Society</a><sup id="fnref:res" role="doc-noteref"><a href="#fn:res" class="footnote" rel="footnote">2</a></sup>, the <a href="https://www.restud.com/">Review of Economic Studies</a>,  the <a href="https://www.economics.ca/cpages/cje-home">Canadian Journal of Economics</a>, and <a href="https://weai.org/view/EI">Economic Inquiry</a> have joined forces  to proudly launch <strong>DCAS</strong>, the <a href="https://datacodestandard.org/">Data and Code Availability Standard</a>. This set of rules regarding what constitutes an appropriate data and code replication package will help authors comply with journals’ data and code availability policies. DCAS provides a standard, meant to make compliance easier by setting common requirements across all participating journals, and to help journals create and align their data and code availability policy.</p>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:aea" role="doc-endnote">
      <p>The journals of the American Economic Association are the American Economic Review, AER: Insights, and the American Economic Journal: Applied Economics, Economic Policy, Macroeconomics, and Microeconomics. <a href="#fnref:aea" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:res" role="doc-endnote">
      <p>The journals of the Royal Economic Society are the Econometrics Journal and the Economic Journal. <a href="#fnref:res" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>AEA Data Editor</name></author><category term="standards" /><category term="reproducibility" /><category term="provenance" /><category term="dcas" /><summary type="html"><![CDATA[The data editors of the journals of the American Economic Association1, of the Royal Economic Society2, the Review of Economic Studies, the Canadian Journal of Economics, and Economic Inquiry have joined forces to proudly launch DCAS, the Data and Code Availability Standard. This set of rules regarding what constitutes an appropriate data and code replication package will help authors comply with journals’ data and code availability policies. DCAS provides a standard, meant to make compliance easier by setting common requirements across all participating journals, and to help journals create and align their data and code availability policy. The journals of the American Economic Association are the American Economic Review, AER: Insights, and the American Economic Journal: Applied Economics, Economic Policy, Macroeconomics, and Microeconomics. &#8617; The journals of the Royal Economic Society are the Econometrics Journal and the Economic Journal. &#8617;]]></summary></entry><entry><title type="html">What is this LICENSE thing</title><link href="https://aeadataeditor.github.io/posts/2022-11-16-where-are-the-terms-of-use" rel="alternate" type="text/html" title="What is this LICENSE thing" /><published>2022-11-16T00:00:00-05:00</published><updated>2022-11-16T00:00:00-05:00</updated><id>https://aeadataeditor.github.io/posts/where-are-the-terms-of-use</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2022-11-16-where-are-the-terms-of-use"><![CDATA[<p>The <a href="https://social-science-data-editors.github.io/template_README/">template README</a> required by various econ journals asks for a statement about the rights to RE-distribute data. Many economists are confused by this: “<em>But the data is publicly available.</em>” Let me try to disentangle that somewhat.</p>

<!-- more -->

<h2 id="the-statement-about-rights">The statement about rights</h2>

<p>The statement says</p>

<blockquote>
  <p>I certify that the author(s) of the manuscript have documented 
permission to redistribute/publish the data contained within this 
replication package. Appropriate permission are documented in the 
LICENSE.txt file.</p>
</blockquote>

<p>Two questions arise: what does this mean, and what is an author supposed to do with the LICENSE.txt file? And then of course, how to cite it all.</p>

<h3 id="questions-and-some-answers">Questions and some answers</h3>

<p>Here are a few questions that arise</p>

<blockquote>
  <p>Do you require licensing information for all the data that we are using, or just the specific data that is provided in the replication package?</p>
</blockquote>

<p>Many econ papers use data from multiple sources, including data that are clearly confidential. Some data sources are not confidential, but are subject to copyright or licensing agreements. The replication package should ONLY contain data that can be redistributed, and the statement ONLY pertains to such data. It does not pertain to data not included within the replication package.</p>

<p>Of course, a good chunk of the README is spent describing ALL the data sources, including the confidential ones, the non-confidential ones that are copyrighted, the non-confidential ones that are proprietary, or otherwise subject to redistribution restrictions. ALL data provenance must be described, sufficient for a replicator to start from scratch, ignoring even the data provided within the replication package. That description should contain the licensing information for every dataset as well, at least in summary. It should list pertinent conditions and restrictions, for instance: application process, required residency or citizenship, etc. The LICENSE.txt is more likely to contain a long text in legalese, the formal permission to use the data that is in fact <em>included</em> in the package.</p>

<blockquote>
  <p>Why can’t I redistribute this data, since it is publicly available?</p>
</blockquote>

<p>I’ll take the IPUMS CPS and the S&amp;P 500 as an example.</p>

<p>“Publicly available” does not mean that you have the rights to distribute. For instance, you can use the <a href="https://fred.stlouisfed.org/series/SP500">S&amp;P 500 data distributed by FRED</a>, but you are not allowed to re-distribute that data, as noted on the page there. You would describe that in the README, but the license would not be in the LICENSE.txt, because you are not, in fact, including the data!</p>

<p>Turning to the CPS: When CPS data is pulled directly from the <a href="https://www.census.gov/programs-surveys/cps.html">US Census Bureau website</a>, it is in the “public domain,” i.e., not subject to copyright (Note that this is not clear from the Census Bureau’s website, which simply assumes that you know that! Check the <a href="https://www.usa.gov/government-works">USA.gov</a> website for an explanation.)</p>

<p>But when you obtain it through other sources (<a href="https://ceprdata.org/">CEPR</a>, <a href="https://www.epi.org/data/">EPI</a>, <a href="https://www.ipums.org/projects/ipums-cps">IPUMS</a>), you have to read the terms of use, since by re-packaging the data, the <strong>files</strong> containing the data​ are subject to copyright by the redistributor… .</p>

<p>If you are using the IPUMS data, the terms of use describe what you can do with the data: <a href="https://www.ipums.org/about/terms">https://www.ipums.org/about/terms</a>. As it turns out, you can​ redistribute an extract from their database, and that​ is what you should list in the LICENSE.txt.</p>

<p>Note that other licenses are “sticky” - if you obtain data that is under a <a href="https://creativecommons.org/licenses/by/4.0/">CC-BY</a> (Creative Commons) license, then you can do with the data what you want - but you must include the CC-BY license and the original source attribution. In essence, that part of your data is also under a CC-BY license.</p>

<blockquote>
  <p>What goes into the LICENSE.txt?</p>
</blockquote>

<p><img src="/images/openicpsr-license.png" alt="LICENSE txt image" /></p>

<p>This is straightforward if you have a single source. It should state the permissions and conditions that are attached to that file. If the data you obtained has a LICENSE.txt (some do), then simply include that with your deposit. Licenses can be long - they are written in legalese, because they are, in fact, legal permission to do something with the data.</p>

<p>If you created or collected the primary data yourself, you define the LICENSE. By default, deposits on openICPSR have a CC-BY license. We have a small discussion of how to choose licenses at the <a href="https://aeadataeditor.github.io/aea-de-guidance/Licensing_guidance">AEA Data Editor’s website</a> and the <a href="https://social-science-data-editors.github.io/guidance/Licensing_guidance.html">Social Science Data Editors’ website</a>.</p>

<p>If you have multiple data sources, it becomes a bit more complicated. The LICENSE.txt can be a simple collation of the various terms of use/ licenses/etc. So you could have:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>For IPUMS CPS files, IPUMS' Standard Redistribution Terms 
apply (https://www.ipums.org/about/terms#redistribution)

    You will not redistribute the data without permission. You may 
    publish a subset of the data to meet journal requirements for 
    accessing data related to a particular publication. Contact us for
    permission for any other redistribution; we will consider requests
    for free and commercial redistribution. 

Applies to: AHTUS, ATUS, CPS, GeoMarker, HigherEd, IHGIS, MEPS, MTUS, NHGIS, NHIS

For UNCTAD TRAINS data:

The TRAINS Terms of Use at https://trainsonline.unctad.org/disclaimer state that users

   are not allowed to disseminate the data or parts of the 
   database in other dissemination tools unless written 
   permission is given by the Chief of UNCTAD's Trade 
   Information Section, Trade Analysis Branch, Division on 
   International Goods and Commodities. 

We have obtained such permission via email correspondence on 16 November 2022. 
</code></pre></div></div>

<blockquote>
  <p>OK, so how do I cite the data?</p>
</blockquote>

<p>Thank you for that question, since most researchers in economics do NOT cite the data. See this <a href="https://social-science-data-editors.github.io/guidance/addtl-data-citation-guidance.html">extensive discussion</a> over on the Social Science Data Editor website, consult the <a href="https://www.aeaweb.org/journals/policies/sample-references">AEA Style Reference</a>, and remember that not all data distributors provide suggested citations that satisfy the <a href="https://force11.org/info/joint-declaration-of-data-citation-principles-final/">Data Citation Principles</a>. If they ask you to cite a working paper, do so, but <strong>also</strong> cite the data correctly.</p>

<blockquote>
  <p>Most of this data was collected in 2016, but the <a href="https://www.ahtusdata.org/ahtus/citation.shtml">IPUMS AHTUS data citation page</a> only lists the 2018 version. I am unable to find a historic example of this specific citation.</p>
</blockquote>

<p>IPUMS doesn’t make it easy, I know.  There is a not-so-obvious list of versions of the data at this URL: <a href="https://www.ipums.org/projects/ipums-time-use">https://www.ipums.org/projects/ipums-time-use</a>. The <a href="https://www.ahtusdata.org/ahtus-action/revisions">IPUMS Time Use Revision history page</a> does NOT list the DOIs for the various version. So as far as I can deduce from that, you would have used V1.0 of the AHTUS data, which has DOI <strong>10.18128/D061.V1.0</strong>. You can use <a href="https://citation.crosscite.org/">https://citation.crosscite.org/</a>, or simply adapt their suggested citation accordingly.</p>

<p>Data providers have not all adapted to a world where data citations are ubiquitious, or should be. Sometimes it takes a little extra work.</p>

<p>Note that data citations should appear both in the manuscript (upon first mention of the data) and in the README (properly formatted as in the manuscript).</p>]]></content><author><name>AEA Data Editor</name></author><category term="license" /><category term="terms of use" /><category term="copyright" /><category term="reproducibility" /><category term="provenance" /><summary type="html"><![CDATA[The template README required by various econ journals asks for a statement about the rights to RE-distribute data. Many economists are confused by this: “But the data is publicly available.” Let me try to disentangle that somewhat.]]></summary></entry><entry><title type="html">A short example of how to update a replication package</title><link href="https://aeadataeditor.github.io/posts/2022-11-09-updating-post-publication" rel="alternate" type="text/html" title="A short example of how to update a replication package" /><published>2022-11-09T00:00:00-05:00</published><updated>2022-11-09T00:00:00-05:00</updated><id>https://aeadataeditor.github.io/posts/updating_post_publication</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2022-11-09-updating-post-publication"><![CDATA[<p>The AEA Data and Code Availability does not just require that authors publish a replication package - it also encourages authors to improve upon the replication package. Here is an example.</p>

<!-- more -->

<blockquote>
  <p>[NOTE] I am posting about this update with permission by the author.</p>
</blockquote>

<h3 id="links">Links</h3>

<ul>
  <li><a href="https://www.aeaweb.org/journals/policies/data-code">Data and Code Availability Policy</a></li>
  <li><a href="https://www.aeaweb.org/journals/data/policy-revisions">Revision Policy</a>’</li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/FAQ.html#i-was-wondering-whether-and-how-i-can-update-the-published-repository-for-our-paper-i-was-contacted-by-a-researcher-who-is-doing-a-replication--couple-of-minor-issues--forgotten-to-include-two-auxiliary-datasets-in-the-repository-without-which-one-of-the-programs-does-not-run-successfully">Instructions how to create a new version on openICPSR</a></li>
</ul>

<h3 id="tldr">TLDR</h3>

<p>In a nutshell, when authors, or replicators, or somebody on the internet, identifies an issue with a package, they have a few options to identify and publish a solution for it, so that others can benefit the update.</p>

<p>They can submit a comment to the journal, when the issue is a scientific one that materially affects the outcome and the conclusions.</p>

<p>They can write a new article, triggered by an issue identified through the reproduction or replication attempt. This can be an original new article, or a replication-specific article (<a href="https://onlinelibrary.wiley.com/page/journal/10991255/homepage/News.html#replication">for instance, at the Journal of Applied Econometrics</a>).</p>

<p>They can record the issue on platforms such as the <a href="https://www.socialsciencereproduction.org/">Social Science Reproduction Platform</a> or the <a href="https://replication.uni-goettingen.de/">Replication Wiki</a>.</p>

<p>Or, if the issue is really minor, or is simply an improvement, authors can post a revision of replication package according to the <strong><a href="https://www.aeaweb.org/journals/data/policy-revisions">AEA Revision Policy</a></strong>.</p>

<p>This post describes the latter.</p>

<h3 id="timeline">Timeline</h3>

<ul>
  <li>Oct 2019: Replication package was submitted to Data Editor (one of the first 200 cases). A first report was sent back to the author (they were simpler back then…), the author revised the package, and re-submitted an improved package.</li>
  <li>Nov 2019: The revised package was accepted (after 1 round). We were unable to access all data, but improved the documentation of the data sources.</li>
  <li>April 2020: Publication of the manuscript: <a href="https://doi.org/10.1257/aer.20171732">https://doi.org/10.1257/aer.20171732</a>, and of the replication package: <a href="https://doi.org/10.3886/E112121V1">https://doi.org/10.3886/E112121V1</a>. <img src="/images/revpolicy-article1.png" alt="article page" /> <img src="/images/revpolicy-data1.png" alt="replication package v1" /></li>
  <li>Sometime in 2020: a replicator, with access to the data, reports to the author various small issues, in particular missing files.</li>
  <li>Jan 2021: Author reaches out to AEA Data Editor,  and wants to correct the data deposit, so that future replicators can access the missing files. A case is created by the AEA Data Editor to follow up.</li>
  <li><em>Life intrudes</em> 🤷‍♂️</li>
  <li>Oct 2022: Author updates the replication package, together with a Changelog (as required by policy), creating a V2. The revised package is published: <a href="https://doi.org/10.3886/E112121V2">https://doi.org/10.3886/E112121V2</a>, and the V1 now has a banner identifying that a newer version is available. <img src="/images/revpolicy-data2.png" alt="revised data package" /></li>
</ul>

<h3 id="notes">Notes</h3>

<ul>
  <li>The original deposit - the version of record - remains available, and downloadable.</li>
  <li>The article page continues to link to the original deposit (V1) because it is the version of record.</li>
  <li>The original deposit has a banner indicating that a newer package is available, and directs to that newer deposit.</li>
  <li>The original deposit and the revised deposit contain cross-links.</li>
</ul>

<h3 id="conclusion">Conclusion</h3>

<p>This is a great example of how the ability to update replication packages is a key part, previously underexploited and not transparent, in improving science. Such updates happen for a variety of reasons multiple times a year. Sometimes, they happen for less happy reasons, such as a data provider requests that a file be removed because posting the file is not compliant with their terms of use. In other cases, authors simply post a better README, after having received feedback from students or replicators.</p>

<p>Revisions and new versions can be created on all regularly used repositories, such as <a href="https://www.openicpsr.org/openicpsr/search/aea/studies">openICPSR</a>, <a href="https://zenodo.org/communities/aeajournals/">Zenodo</a>, and <a href="https://dataverse.harvard.edu/">Dataverse</a>.</p>

<p>When authors publish their replication packages prior to submission, such revisions allow them to incorporate the changes made during the editorial process, whether related to the scientific or the computational content of the paper.</p>

<!-- Ref: AEAREP-228 -->]]></content><author><name>AEA Data Editor</name></author><category term="updating" /><category term="improvement" /><category term="reproducibility" /><summary type="html"><![CDATA[The AEA Data and Code Availability does not just require that authors publish a replication package - it also encourages authors to improve upon the replication package. Here is an example.]]></summary></entry><entry><title type="html">Some remarks on coding when data are confidential</title><link href="https://aeadataeditor.github.io/posts/2022-04-13-coding-confidential" rel="alternate" type="text/html" title="Some remarks on coding when data are confidential" /><published>2022-04-13T00:00:00-04:00</published><updated>2022-04-13T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/coding-confidential</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2022-04-13-coding-confidential"><![CDATA[<p>Back in the fall, I made a few notes regarding how to prepare replication packages when data are confidential (<a href="https://aeadataeditor.github.io/posts/2021-11-08-replication-pkg-confidential">here</a>). What I did not address, and what comes up regularly, is how to <strong>write code</strong> when some code and/or data are confidential.</p>

<!-- more -->

<h2 id="what-is-confidential-code-you-say">What is confidential code, you say?</h2>

<ul>
  <li>In the United States, some variables on IRS databases are considered super-top-secret. So you can’t name that-variable-that-you-filled-out-on-your-Form-1040 in your analysis code of same data. (They are often referred to in jargon as “Title 26 variables”). Not sure why that continues to be perceived as a problem, but until the law changes, that’s one possible constraint.</li>
  <li>Your code contains the random seed you used to anonymize the sensitive identifiers. This might allow to reverse-engineer the anonymization, and is not a good idea to publish.</li>
  <li>You used a look-up table hard-coded in your Stata code to anonymize the sensitive identifiers (<code class="language-plaintext highlighter-rouge">replace anoncounty=1 if county="Tompkins, NY"</code>). A really bad idea, but yes, you probably want to hide that.</li>
  <li>Your IT specialist or misguided disclosure officer thinks publishing the exact path to your copy of the confidential 2010 Census data, e.g., “/data/census/2010”, is a security risk and refuses to let that code through.</li>
  <li>You have adhered to disclosure rules, but for some reason, the precise minimum cell size is a confidential parameter.</li>
</ul>

<p>So whether reasonable or not, this is an issue. How do you do that, without messing up the code, or spending hours redacting your code?</p>

<h2 id="example">Example</h2>

<p>This will serve as an example throughout this post. I’m focusing on Stata, because so many economists use Stata, but none of this is specific to Stata, and the solutions for R, Python, Julia, Matlab, etc. are all quite similar. Assume that variables <code class="language-plaintext highlighter-rouge">q2f</code> and <code class="language-plaintext highlighter-rouge">q3e</code> are considered confidential by some rule, and that the minimum cell size <code class="language-plaintext highlighter-rouge">10</code> is also confidential.</p>

<pre><code class="language-{stata}">set seed 12345
use q2f q3e county using "/data/economic/cmf2012/extract.dta", clear
gen logprofit = log(q2f)
by county: collapse (count)  n=q3e (mean) logprofit
drop if n&lt;10
graph twoway n logprofit
</code></pre>

<h2 id="do-not-do-this">Do not do this</h2>

<p>A bad example, because literally making more work for you and for future replicators, is to manually redact the confidential information with text that is not legitimate code:</p>

<pre><code class="language-{stata}">set seed NNNNN
use &lt;removed vars&gt; county using "&lt;removed path&gt;", clear
gen logprofit = log(XXXX)
by county: collapse (count)  n=XXXX (mean) logprofit
drop if n&lt;XXXX
graph twoway n logprofit
</code></pre>

<p>The redacted program above will no longer run, and will be very tedious to un-redact if a subsequent replicator obtains legitimate access to the confidential data.</p>

<h2 id="better">Better</h2>

<p>Simply replacing the confidential data with replacement that are valid placeholders in the programming language of your choice is already better. Here’s the confidential version of the file:</p>

<pre><code class="language-{stata}">//============ confidential parameters =============
global confseed    12345
global confpath    "/data/economic/cmf2012"
global confprofit  q2f
global confemploy  q3e
global confmincell 10
//============ end confidential parameters =========
set seed $confseed
use $confprofit county using "${confpath}/extract.dta", clear
gen logprofit = log($confprofit)
by county: collapse (count)  n=$confemploy (mean) logprofit
drop if n&lt;$confmincell
graph twoway n logprofit
</code></pre>

<p>and this would be the released file, part of the replication package:</p>

<pre><code class="language-{stata}">//============ confidential parameters =============
global confseed    XXXX    // a number
global confpath    "XXXX"  // a path that will be communicated to you
global confprofit  XXX     // Variable name for profit T26
global confemploy  XXX     // Variable name for employment T26
global confmincell XXX     // a number
//============ end confidential parameters =========
set seed $confseed
use $confprofit county using "${confpath}/extract.dta", clear
gen logprofit = log($confprofit)
by county: collapse (count)  n=$confemploy (mean) logprofit
drop if n&lt;$confmincell
graph twoway n logprofit
</code></pre>

<p>While the code won’t run as-is, it is easy to un-redact, regardless of how many times you reference the confidential values, e.g., <code class="language-plaintext highlighter-rouge">q2f</code>, anywhere in the code.</p>

<h2 id="best">Best</h2>

<p>Note that you have to re-run the entire code to obtain a modified graph, e.g., if you want to add some reference line, or change colors. But if the data presented in the graph is non-sensitive (i.e., disclosable), then the data underlying it is as well. Thus, and this is a more general approach, we can provide code that automatically detects if the confidential data is there, and only then will it run the data preparation part, but it will always run for the graphing (“analysis”) part of the code.</p>

<p>We also introduce the use of a separate file for all the confidential parameters, which may be more convenient, since now, no redaction is needed - the confidential file is simply dropped (but should be documented).</p>

<p>Main file <code class="language-plaintext highlighter-rouge">main.do</code>:</p>

<pre><code class="language-{stata}">//============ confidential parameters =============
capture confirm file "include/confparms.do"
if _rc == 0 {
    // file exists
    include "include/confparms.do"
} else {
    di in red "No confidential parameters found"
}
//============ end confidential parameters =========

//============ non-confidential parameters =========
global safepath "releasable"
cap mkdir "$safepath"

//============ end parameters ======================

// ::::  Process only if confidential data is present 

capture confirm "${confpath}/extract.dta"
if _rc == 0 {
   set seed $confseed
   use $confprofit county using "${confpath}/extract.dta", clear
   gen logprofit = log($confprofit)
   by county: collapse (count)  n=$confemploy (mean) logprofit
   drop if n&lt;$confmincell
   save "${safepath}/figure1.dta", replace
} else { di in red "Skipping processing of confidential data" }

//============ at this point, the data is releasable ======
// ::::  Process always 

use "${safepath}/figure1.dta", clear
graph twoway n logprofit
graph export "${safepath}/figure1.pdf", replace
</code></pre>

<p>Auxiliary file <code class="language-plaintext highlighter-rouge">include/confparms.do</code> (not released)</p>

<pre><code class="language-{stata}">//============ confidential parameters =============
global confseed    12345
global confpath    "/data/economic/cmf2012"
global confprofit  q2f
global confemploy  q3e
global confmincell 10
//============ end confidential parameters =========
</code></pre>

<p>Auxiliary file <code class="language-plaintext highlighter-rouge">include/confparms_template.do</code> (this is released)</p>

<pre><code class="language-{stata}">//============ confidential parameters =============
global confseed    XXXX    // a number
global confpath    "XXXX"  // a path that will be communicated to you
global confprofit  XXX     // Variable name for profit T26
global confemploy  XXX     // Variable name for employment T26
global confmincell XXX     // a number
//============ end confidential parameters =========
</code></pre>

<p>And after a successful run, the files <code class="language-plaintext highlighter-rouge">releasable/figure1.dta</code> and <code class="language-plaintext highlighter-rouge">releasable/figure1.pdf</code> are available, and can be reviewed and released.</p>

<p>Thus, the replication package would have:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>main.do
README.md
include/confparms_template.do
releasable/figure1.dta
releasable/figure1.pdf
</code></pre></div></div>

<p>Voilà! The resulting non-confidential package will run to produce the analysis (<code class="language-plaintext highlighter-rouge">figure1.pdf</code>) based on the distributable, non-confidential analysis file (<code class="language-plaintext highlighter-rouge">analysis.dta</code>). It can also be very simply brought back into the confidential environment, where either the replicator creates a new <code class="language-plaintext highlighter-rouge">confparms.do</code>, or copies the confidential <code class="language-plaintext highlighter-rouge">confparms.do</code> from the original author into their own working area.</p>]]></content><author><name>AEA Data Editor</name></author><category term="confidential data" /><category term="complex projects" /><summary type="html"><![CDATA[Back in the fall, I made a few notes regarding how to prepare replication packages when data are confidential (here). What I did not address, and what comes up regularly, is how to write code when some code and/or data are confidential.]]></summary></entry></feed>