<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.4.1">Jekyll</generator><link href="https://aeadataeditor.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://aeadataeditor.github.io/" rel="alternate" type="text/html" /><updated>2025-02-26T21:14:08-05:00</updated><id>https://aeadataeditor.github.io/feed.xml</id><title type="html">Office of the AEA Data Editor</title><subtitle>(current: Lars Vilhuber)</subtitle><author><name>AEA Data Editor</name></author><entry><title type="html">On the use of Excel for reproducible tables</title><link href="https://aeadataeditor.github.io/posts/2025-01-17-tables-in-excel" rel="alternate" type="text/html" title="On the use of Excel for reproducible tables" /><published>2025-01-17T00:00:00-05:00</published><updated>2025-01-17T00:00:00-05:00</updated><id>https://aeadataeditor.github.io/posts/tables-in-excel</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2025-01-17-tables-in-excel"><![CDATA[<p>I sometimes see researchers doing much copy-pasting between output from Stata/R/MATLAB and Excel, to create tables. This is a lot of work, the source of many copy-paste errors, and a bad idea. I describe here one way to avoid this, even when the researcher does not want to invest in a new tool.</p>

<!-- more -->

<p>The typical table in economics papers will have up to 9 columns, and 5-25 rows. Seeking out, then copy-pasting up to 225 numbers per table is a lot of work, inhibits re-running of code (because “too complicated”), and is a source of errors. There are many packages out there that might allow you to construct a custom table in the programming language of your choice<sup id="fnref:note1"><a href="#fn:note1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup>, such as <strong>(Stata)</strong> <a href="http://repec.org/bocode/e/estout/estout.html">estout</a>,<sup id="fnref:estout"><a href="#fn:estout" class="footnote" rel="footnote" role="doc-noteref">2</a></sup> <a href="https://ideas.repec.org/c/boc/bocode/s456416.html">outreg2</a>,<sup id="fnref:outreg2"><a href="#fn:outreg2" class="footnote" rel="footnote" role="doc-noteref">3</a></sup> <a href="https://julianreif.com/regsave/">regsave</a>, <sup id="fnref:regsave"><a href="#fn:regsave" class="footnote" rel="footnote" role="doc-noteref">4</a></sup>, <strong>(R)</strong>  <a href="https://cran.r-project.org/web/packages/stargazer/">stargazer</a>,<sup id="fnref:stargazer"><a href="#fn:stargazer" class="footnote" rel="footnote" role="doc-noteref">5</a></sup>, <a href="https://modelsummary.com/">modelsummary</a>,<sup id="fnref:modelsummary"><a href="#fn:modelsummary" class="footnote" rel="footnote" role="doc-noteref">6</a></sup> and many others in R, Julia, Python, etc.</p>

<p>Here, however, I want to emphasize a custom approach that leverages what most people already know: how to use cell references in Excel. I combine a simple export of regression output to Excel sheets, combined with an Excel template. The replication package would contain the (possibly pre-populated) Excel template, and voilà! A reproducible table is born, and updated every time the code is re-run. While you might still need to update the table in your paper (or correctly <a href="https://answers.microsoft.com/en-us/msoffice/forum/all/insert-and-link-excel-table-to-word/8bffbcad-c9af-4725-a86f-0d650d168113">link an Excel sheet to Word</a> so that it also auto-updates…)</p>

<blockquote>
  <p>A more complete version, including with downloadable sample code and any improvements and error corrections, is available at <a href="https://larsvilhuber.github.io/writing-r-to-excel/">https://larsvilhuber.github.io/writing-r-to-excel/</a>.</p>
</blockquote>

<h2 id="the-example">The Example</h2>

<p>The included file <a href="https://larsvilhuber.github.io/writing-r-to-excel/regression_results.xlsx"><code class="language-plaintext highlighter-rouge">regression_results.xlsx</code></a> has a tab called “My funny table”, which references the content of the two other tabs:</p>

<p><img src="https://larsvilhuber.github.io/writing-r-to-excel/excel-formula.png" alt="My funny table" /></p>

<p>The content of the two tabs <code class="language-plaintext highlighter-rouge">Regression1</code> and <code class="language-plaintext highlighter-rouge">Regression2</code> will be filled with the output from  two regressions. I have explicitly not set a seed, so that the values change very time you run the file. You can verify that the “funny table” is automatically updated with the latest results.</p>

<blockquote>
  <p>You can find the full code as a Quarto (R) file at <a href="https://github.com/larsvilhuber/writing-r-to-excel">https://github.com/larsvilhuber/writing-r-to-excel</a>.</p>
</blockquote>

<h2 id="setup">Setup</h2>

<p>Load required packages and set up environment. The package <a href="https://cran.r-project.org/web/packages/openxlsx/index.html">openxlsx</a> is used in preference to <code class="language-plaintext highlighter-rouge">writexl</code> because we explicitly want to preserve the contens of any existing (formatted!) Excel file.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors
</code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">openxlsx</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">broom</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h2 id="data-generation">Data Generation</h2>

<p>Create sample datasets for the regression analyses.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create sample data for first regression</span><span class="w">
</span><span class="n">set.seed</span><span class="p">(</span><span class="m">123</span><span class="p">)</span><span class="w">
</span><span class="n">data1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="p">(</span><span class="w">
  </span><span class="n">x1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">),</span><span class="w">
  </span><span class="n">x2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">),</span><span class="w">
  </span><span class="n">y1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="o">*</span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">0.5</span><span class="o">*</span><span class="n">x2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="c1"># Create sample data for second regression</span><span class="w">
</span><span class="n">data2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="p">(</span><span class="w">
  </span><span class="n">z1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">),</span><span class="w">
  </span><span class="n">z2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">),</span><span class="w">
  </span><span class="n">z3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">),</span><span class="w">
  </span><span class="n">y2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.5</span><span class="o">*</span><span class="n">z1</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">0.8</span><span class="o">*</span><span class="n">z2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">0.3</span><span class="o">*</span><span class="n">z3</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">)</span><span class="w">
</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h2 id="analysis">Analysis</h2>

<p>Perform regression analyses on both datasets.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Run regressions</span><span class="w">
</span><span class="n">reg1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lm</span><span class="p">(</span><span class="n">y1</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">x1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x2</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data1</span><span class="p">)</span><span class="w">
</span><span class="n">reg2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">lm</span><span class="p">(</span><span class="n">y2</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">z1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">z2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">z3</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">data2</span><span class="p">)</span><span class="w">

</span><span class="c1"># Convert regression results to tidy format</span><span class="w">
</span><span class="n">reg1_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tidy</span><span class="p">(</span><span class="n">reg1</span><span class="p">)</span><span class="w">
</span><span class="n">reg2_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tidy</span><span class="p">(</span><span class="n">reg2</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h3 id="save-results">Save Results</h3>

<p>Depending on what you want to do, you could simply post-process the existing tables, creating a simple dataset that is printed. Here, we save the individual results as datasets.
If you were to split this document into three parts – <code class="language-plaintext highlighter-rouge">Data generation</code>, <code class="language-plaintext highlighter-rouge">Analysis</code>, and <code class="language-plaintext highlighter-rouge">Tables</code> – then this would be the last part of your analysis part.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Save regression results as RDS files</span><span class="w">
</span><span class="n">saveRDS</span><span class="p">(</span><span class="n">reg1_results</span><span class="p">,</span><span class="w"> </span><span class="s2">"regression1_results.rds"</span><span class="p">)</span><span class="w">
</span><span class="n">saveRDS</span><span class="p">(</span><span class="n">reg2_results</span><span class="p">,</span><span class="w"> </span><span class="s2">"regression2_results.rds"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h2 id="tables">Tables</h2>

<h3 id="formatting-results-via-excel">Formatting Results via Excel</h3>

<p>Here, however, we want to simulate what might be a far more complex table.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Read data back in, as if we were a separate program</span><span class="w">

</span><span class="n">reg1_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">readRDS</span><span class="p">(</span><span class="s2">"regression1_results.rds"</span><span class="p">)</span><span class="w">
</span><span class="n">reg2_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">readRDS</span><span class="p">(</span><span class="s2">"regression2_results.rds"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>I use a function here, in order to handle the case when a file exists, and when one doesn’t. The very first time you would use this, no Excel file exists, but subsequent runs would overwrite the tabs within the existing file.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Function to write to Excel, creating file if it doesn't exist</span><span class="w">
</span><span class="n">write_to_excel</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">results_list</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="c1"># Check if file exists</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">file.exists</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c1"># Create new workbook if file doesn't exist</span><span class="w">
    </span><span class="n">message</span><span class="p">(</span><span class="s2">"Creating new file"</span><span class="p">)</span><span class="w">
    </span><span class="n">wb</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">createWorkbook</span><span class="p">()</span><span class="w">
  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c1"># Load existing workbook if file exists</span><span class="w">
    </span><span class="n">message</span><span class="p">(</span><span class="s2">"Re-using existing file"</span><span class="p">)</span><span class="w">
    </span><span class="n">wb</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">loadWorkbook</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="c1"># Loop through the results list and write/overwrite sheets</span><span class="w">
  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">sheet_name</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">results_list</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="c1"># Remove sheet if it already exists</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sheet_name</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">wb</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="n">removeWorksheet</span><span class="p">(</span><span class="n">wb</span><span class="p">,</span><span class="w"> </span><span class="n">sheet_name</span><span class="p">)</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="c1"># Add new worksheet</span><span class="w">
    </span><span class="n">addWorksheet</span><span class="p">(</span><span class="n">wb</span><span class="p">,</span><span class="w"> </span><span class="n">sheet_name</span><span class="p">)</span><span class="w">
    </span><span class="c1"># Write data to worksheet</span><span class="w">
    </span><span class="n">writeData</span><span class="p">(</span><span class="n">wb</span><span class="p">,</span><span class="w"> </span><span class="n">sheet_name</span><span class="p">,</span><span class="w"> </span><span class="n">results_list</span><span class="p">[[</span><span class="n">sheet_name</span><span class="p">]])</span><span class="w">
  </span><span class="p">}</span><span class="w">
  
  </span><span class="c1"># Save workbook</span><span class="w">
  </span><span class="n">saveWorkbook</span><span class="p">(</span><span class="n">wb</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="p">,</span><span class="w"> </span><span class="n">overwrite</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="c1"># Create list of results</span><span class="w">
</span><span class="n">regression_results</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="w">
  </span><span class="s2">"Regression1"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reg1_results</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Regression2"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reg2_results</span><span class="w">
</span><span class="p">)</span><span class="w">

</span><span class="c1"># Write to Excel file</span><span class="w">
</span><span class="n">write_to_excel</span><span class="p">(</span><span class="n">regression_results</span><span class="p">,</span><span class="w"> </span><span class="s2">"regression_results.xlsx"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<h3 id="display-results-here">Display Results Here</h3>

<p>Show the regression results in the document.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Display results from first regression</span><span class="w">

</span><span class="n">knitr</span><span class="o">::</span><span class="n">kable</span><span class="p">(</span><span class="n">reg1_results</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: left">term</th>
      <th style="text-align: right">estimate</th>
      <th style="text-align: right">std.error</th>
      <th style="text-align: right">statistic</th>
      <th style="text-align: right">p.value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">(Intercept)</td>
      <td style="text-align: right">0.1350654</td>
      <td style="text-align: right">0.0961401</td>
      <td style="text-align: right">1.404882</td>
      <td style="text-align: right">0.1632508</td>
    </tr>
    <tr>
      <td style="text-align: left">x1</td>
      <td style="text-align: right">1.8668285</td>
      <td style="text-align: right">0.1048695</td>
      <td style="text-align: right">17.801445</td>
      <td style="text-align: right">0.0000000</td>
    </tr>
    <tr>
      <td style="text-align: left">x2</td>
      <td style="text-align: right">0.5238113</td>
      <td style="text-align: right">0.0989947</td>
      <td style="text-align: right">5.291307</td>
      <td style="text-align: right">0.0000008</td>
    </tr>
  </tbody>
</table>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Display results from second regression</span><span class="w">

</span><span class="n">knitr</span><span class="o">::</span><span class="n">kable</span><span class="p">(</span><span class="n">reg2_results</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<table>
  <thead>
    <tr>
      <th style="text-align: left">term</th>
      <th style="text-align: right">estimate</th>
      <th style="text-align: right">std.error</th>
      <th style="text-align: right">statistic</th>
      <th style="text-align: right">p.value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">(Intercept)</td>
      <td style="text-align: right">-0.1563012</td>
      <td style="text-align: right">0.1048648</td>
      <td style="text-align: right">-1.490501</td>
      <td style="text-align: right">0.1393709</td>
    </tr>
    <tr>
      <td style="text-align: left">z1</td>
      <td style="text-align: right">1.4305458</td>
      <td style="text-align: right">0.1009734</td>
      <td style="text-align: right">14.167548</td>
      <td style="text-align: right">0.0000000</td>
    </tr>
    <tr>
      <td style="text-align: left">z2</td>
      <td style="text-align: right">-0.7925999</td>
      <td style="text-align: right">0.1079181</td>
      <td style="text-align: right">-7.344456</td>
      <td style="text-align: right">0.0000000</td>
    </tr>
    <tr>
      <td style="text-align: left">z3</td>
      <td style="text-align: right">0.2206171</td>
      <td style="text-align: right">0.1141786</td>
      <td style="text-align: right">1.932210</td>
      <td style="text-align: right">0.0562816</td>
    </tr>
  </tbody>
</table>

<h3 id="directory-contents">Directory Contents</h3>

<p>Show files created in the working directory.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># List all files in current working directory</span><span class="w">
</span><span class="n">list.files</span><span class="p">(</span><span class="n">pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"(xlsx|rds)$"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[1] "regression_results.xlsx"          "regression_results_template.xlsx"
[3] "regression1_results.rds"          "regression2_results.rds"         
</code></pre></div></div>

<h2 id="housekeeping">Housekeeping</h2>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sessionInfo</span><span class="p">()</span><span class="w">
</span></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>R version 4.4.2 (2024-10-31 ucrt)
Platform: x86_64-w64-mingw32/x64
Running under: Windows 11 x64 (build 26100)

Matrix products: default


locale:
[1] LC_COLLATE=English_United States.utf8 
[2] LC_CTYPE=English_United States.utf8   
[3] LC_MONETARY=English_United States.utf8
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.utf8    

time zone: America/Toronto
tzcode source: internal

attached base packages:
[1] stats     graphics  grDevices datasets  utils     methods   base     

other attached packages:
 [1] broom_1.0.7      openxlsx_4.2.7.1 lubridate_1.9.4  forcats_1.0.0   
 [5] stringr_1.5.1    dplyr_1.1.4      purrr_1.0.2      readr_2.1.5     
 [9] tidyr_1.3.1      tibble_3.2.1     ggplot2_3.5.1    tidyverse_2.0.0 

loaded via a namespace (and not attached):
 [1] gtable_0.3.6      jsonlite_1.8.9    compiler_4.4.2    renv_1.0.11      
 [5] zip_2.3.1         Rcpp_1.0.13-1     tidyselect_1.2.1  scales_1.3.0     
 [9] yaml_2.3.10       fastmap_1.2.0     R6_2.5.1          generics_0.1.3   
[13] knitr_1.49        backports_1.5.0   munsell_0.5.1     pillar_1.9.0     
[17] tzdb_0.4.0        rlang_1.1.4       utf8_1.2.4        stringi_1.8.4    
[21] xfun_0.49         timechange_0.3.0  cli_3.6.3         withr_3.0.2      
[25] magrittr_2.0.3    digest_0.6.37     grid_4.4.2        rstudioapi_0.17.1
[29] hms_1.1.3         lifecycle_1.0.4   vctrs_0.6.5       evaluate_1.0.1   
[33] glue_1.8.0        fansi_1.0.6       colorspace_2.1-1  rmarkdown_2.29   
[37] tools_4.4.2       pkgconfig_2.0.3   htmltools_0.5.8.1
</code></pre></div></div>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:note1">
      <p>The same basic toolkit can be used to construct the figure of your choice, but I’ll concentrate on tables here. <a href="#fnref:note1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:estout">
      <p>Jann, Ben (2005): Making regression tables from stored estimates. The Stata Journal 5(3): 288-308 and Jann, Ben (2007): Making regression tables simplified. The Stata Journal 7(2): 227-244. <a href="#fnref:estout" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:outreg2">
      <p>Roy Wada, 2005. “<a href="https://ideas.repec.org/c/boc/bocode/s456416.html">OUTREG2: Stata module to arrange regression outputs into an illustrative table</a>,” Statistical Software Components S456416, Boston College Department of Economics, revised 17 Aug 2014. <a href="#fnref:outreg2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:regsave">
      <p>Julian Reif, 2008. “<a href="https://ideas.repec.org/c/boc/bocode/s456964.html">REGSAVE: Stata module to save regression results to a Stata-formatted dataset</a>,” Statistical Software Components S456964, Boston College Department of Economics, revised 03 Dec 2023. <a href="#fnref:regsave" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:stargazer">
      <p>Hlavac M (2022). stargazer: Well-Formatted Regression and Summary Statistics Tables. Social Policy Institute, Bratislava, Slovakia. R package version 5.2.3, <a href="https://CRAN.R-project.org/package=stargazer">https://CRAN.R-project.org/package=stargazer</a>. <a href="#fnref:stargazer" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:modelsummary">
      <p>Arel-Bundock V (2022). “modelsummary: Data and Model Summaries in R.” Journal of Statistical Software, 103(1), 1–23. <a href="https://doi.org/10.18637/jss.v103.i01">https://doi.org/10.18637/jss.v103.i01</a>. <a href="#fnref:modelsummary" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>AEA Data Editor</name></author><category term="data editor tips" /><category term="replication packages" /><category term="code" /><category term="Excel" /><summary type="html"><![CDATA[I sometimes see researchers doing much copy-pasting between output from Stata/R/MATLAB and Excel, to create tables. This is a lot of work, the source of many copy-paste errors, and a bad idea. I describe here one way to avoid this, even when the researcher does not want to invest in a new tool.]]></summary></entry><entry><title type="html">How to respond to data provider requests for data removal (take-down requests)</title><link href="https://aeadataeditor.github.io/posts/2024-11-01-psid-requests" rel="alternate" type="text/html" title="How to respond to data provider requests for data removal (take-down requests)" /><published>2024-11-01T00:00:00-04:00</published><updated>2024-11-01T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/psid-requests</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-11-01-psid-requests"><![CDATA[<p>The <a href="https://www.aeaweb.org/journals/data/data-code-policy">AEA Data and Code Availability Policy</a> asks that authors provide access to all data used in a published paper. But it also acknowledges that there are cases where data cannot be shared. This may be due to privacy concerns, proprietary rights to the data that are not the author’s, or terms of use that prohibit the sharing, redistribution, or publication of data.</p>

<p>So what happens when an author inadvertently does share such data, and the data provider finds out, and is not happy? Let’s call this a “take-down request.” The data provider asks that the author remove the data from the replication package. But the author is committed (by <a href="https://www.aeaweb.org/journals/forms/data-code-archive-agreement">signing an agreement</a>) to not withdrawing the replication package. How to proceed? Read on!</p>

<!-- more -->

<h2 id="in-a-nutshell">In a nutshell</h2>

<p>The gist of the solution is the following, for AEA manuscripts (which I obviously know well), but probably similarly for other journals:</p>

<ul>
  <li>Remove the infringing data from V1 of the replication package.</li>
  <li>[Ideally] Create a new, separate deposit that is in compliance with the data provider’s terms of use.</li>
  <li>Document the new location of the now absent data in the README of the replication package.</li>
  <li>Submit the revised replication package to the journal.</li>
  <li>The journal publishes V2 of the replication package, which is now compliant.</li>
</ul>

<h2 id="an-example-psid-data">An example: PSID data</h2>

<p>For years, I as Data Editor have alerted authors when I detected data that infringes on terms of use. Two of the most frequent cases are the Panel Study of Income Dynamics (PSID) and the UNSD’s Comtrade data. We even have an <a href="https://www.aeaweb.org/journals/data/faq#psid">FAQ entry dedicated to the PSID case</a> and a <a href="https://github.com/AEADataEditor/replication-template/blob/master/sample-language-report.md?plain=1#L243">copy-and-paste entry in our “most frequent errors” document</a>.</p>

<p>But what if PSID data does end up in a deposit, either because I missed it (believe it or not, I’m not perfect), or because the replication package was published before the Data Editor was appointed?<sup id="fnref:1"><a href="#fn:1" class="footnote" rel="footnote" role="doc-noteref">1</a></sup> In fact, on November 1, 2024, the folks at PSID did just that: Contacted a large number of authors that had included PSID data in their replication packages, asking them to remove the data.</p>

<p>It is worth reminding that the <a href="https://simba.isr.umich.edu/U/CondUse.aspx">PSID terms of use</a>, which everybody agrees to when downloading the data, are quite clear:</p>

<blockquote>
  <ol>
    <li>Not transfer PSID public data that has been downloaded from the website, including user-created data extracts, to any third parties…</li>
  </ol>
</blockquote>

<blockquote>
  <p>So what can authors do?</p>
</blockquote>

<h3 id="preliminary-steps">Preliminary steps</h3>

<p>The first steps involve getting access to your own replication package. This may differ by when the replication package was published.<sup id="fnref:2"><a href="#fn:2" class="footnote" rel="footnote" role="doc-noteref">2</a></sup></p>

<ul>
  <li>For authors with papers published before 2019 (approximately)
    <ul>
      <li>All authors will need to get an openICPSR login, which will serve them both for the changes to the AEA and for creating the new PSID deposit.</li>
      <li>They will need to request access to the deposit. The <a href="https://www.openicpsr.org/openicpsr/contactUs">openICPSR helpdesk</a> may be able to help with that. The authors should mention the URL or DOI, and the openICPSR login they want the deposit associated with.</li>
    </ul>
  </li>
  <li>
    <p>For authors with more recent papers:</p>

    <ul>
      <li>They will need to re-create an ICPSR account <strong>with the same email as previously used</strong> since <a href="https://researcherpassport.icpsr.umich.edu/help">ICPSR changed their login system in Feb 2024</a>. The <a href="https://www.openicpsr.org/openicpsr/contactUs">openICPSR helpdesk</a> may help with that.</li>
      <li>They need to then <a href="https://www.aeaweb.org/journals/data/revisions-policy#createnewversion">create a new version</a>.</li>
    </ul>
  </li>
</ul>

<p><img src="/images/icpsr-create-new-version.png" alt="Create a new version" />]</p>

<h3 id="rules-that-apply-to-revisions-of-replication-packages">Rules that apply to revisions of replication packages</h3>

<p>Here are a few simple rules:</p>

<ul>
  <li>The modified package should differ only as necessary from the original package. Less work for the author, greater clarity for replicators, everybody wins.</li>
  <li>Journal-specific policies may apply. For instance, the AEA has a <a href="https://www.aeaweb.org/journals/data/revisions-policy">Policy on Revisions of Data and Code Deposits in the AEA Data and Code Repository</a>. Among other things, it requires that all changes be clearly identified.</li>
</ul>

<h3 id="fixing-the-problem">Fixing the problem</h3>

<p>Once the preliminaries are done, here’s what authors need to do to remain compliant with AEA policy (similar rules may apply at other journals):</p>

<ul>
  <li>PSID actually has a way to properly and openly preserve the user-created extracts in compliance with their terms of use. It is the <a href="https://www.openicpsr.org/openicpsr/psid">PSID Repository on openICPSR</a>.</li>
  <li>For sake of discussion, the “original replication package” is V1. The replacement replication package will be V2.</li>
</ul>

<p><img src="/images/psid-repository.png" alt="Image of PSID repository" /></p>

<ul>
  <li>For sake of discussion, consider the case where V1 contains a single file <code class="language-plaintext highlighter-rouge">psid.dta</code>.</li>
</ul>

<h4 id="psid-deposit">PSID deposit</h4>

<ul>
  <li>Authors should <a href="https://www.openicpsr.org/openicpsr/psid/deposit-instructions">create a new deposit at the PSID repository</a> with title “<strong>Supplementary data</strong> for: [NAME OF THE MANUSCRIPT]”.
    <ul>
      <li>Put into it ONLY the PSID data <code class="language-plaintext highlighter-rouge">psid.dta</code>. Do not put other things into this deposit.</li>
      <li>You might want to add the <strong>DOI</strong> of V1 and the <strong>DOI</strong> of the manuscript in the “Related publications” section  (use the <code class="language-plaintext highlighter-rouge">Import from DOI</code> functionality, choose <code class="language-plaintext highlighter-rouge">is supplemented by</code> for the <code class="language-plaintext highlighter-rouge">Relationship</code> field)</li>
      <li>Publish it.</li>
      <li>Remember the DOI (not the URL). Call this the “[PSID DOI]”. Replace this with the <strong>actual</strong> DOI everywhere it is mentioned below!</li>
    </ul>
  </li>
</ul>

<h4 id="back-in-the-aea-deposit">Back in the AEA deposit</h4>

<ul>
  <li>Log on to the V1 deposit. You should be in “Modifying” mode.</li>
  <li>Remove (delete) the same PSID data (<code class="language-plaintext highlighter-rouge">psid.dta</code>) you just uploaded into the PSID deposit, from the openICPSR AEA deposit V1.</li>
  <li>Update the README with “PSID data for this package can be obtained from [PSID DOI]” in an appropriate location. The ideal README follows the <a href="https://doi.org/10.5281/zenodo.7293838">Template README published by the Social Science Data Editors</a>, but make only minimal changes to the README in this deposit.
    <ul>
      <li>Delete the old README (<em>completely</em>),</li>
      <li>Upload the new README (in PDF format) to the same location the original one was</li>
    </ul>
  </li>
  <li><a href="https://www.aeaweb.org/journals/data/revisions-policy#identifying">Create a <code class="language-plaintext highlighter-rouge">CHANGES.txt</code>.</a>  Identify changes made. E.g. “V2: Moved PSID data to [PSID DOI]”.  It should look something like this:</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>V1: Original deposit
V2: PSID data moved to [PSID DOI]
</code></pre></div></div>
<ul>
  <li>Upload the <code class="language-plaintext highlighter-rouge">CHANGES.txt</code>.</li>
  <li>Link to the [PSID DOI] in the “Related publications” section of the deposit (use the <code class="language-plaintext highlighter-rouge">Import from DOI</code> functionality, choose <code class="language-plaintext highlighter-rouge">is supplemented by</code> for the <code class="language-plaintext highlighter-rouge">Relationship</code> field)</li>
  <li>You <em>may</em> have to add the “manuscript number” to the metadata, see <a href="https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html#scope-of-project-section">this link</a>. Use the last part of the DOI of the paper, e.g. if the paper DOI is <code class="language-plaintext highlighter-rouge">https://doi.org/10.1257/aer.p20161120</code> then the “manuscript number” should be <code class="language-plaintext highlighter-rouge">aer.p20161120</code>.</li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html#submitting-to-the-data-editor">Re-Submit to the AEA</a></li>
  <li>Contact the <a href="https://www.openicpsr.org/openicpsr/contactUs">openICPSR helpdesk</a> and ask them to “Unpublish” the V1 deposit.</li>
</ul>

<p><img src="/images/project-submit.png" alt="(Re-)Submit to the AEA" /></p>

<h3 id="the-end-state">The end state</h3>

<p>After all the fixes,</p>

<ul>
  <li>V1 is still visible, but can no longer be downloaded.</li>
</ul>

<p><img src="/images/openICPSR-study-unpublished.png" alt="Unpublished deposit shows banner" /></p>

<ul>
  <li>the PSID deposit is now available. Users who want to download the data have to agree to the PSID’s terms of use. You are now in compliance with the PSID’s terms of use!</li>
  <li>V2 is published, contains no PSID data, links to the PSID deposit, and remains otherwise available to replicators. You are still in compliance with the AEA publication agreements and your obligations as an AEA author!</li>
</ul>

<h3 id="an-example">An example</h3>

<p>Fran Blau and Larry Kahn had a JEL article (with replication package!) back in 2016:</p>

<blockquote>
  <p>Blau, Francine D., and Lawrence M. Kahn. “The Gender Wage Gap: Extent, Trends, and Explanations.” Journal of Economic Literature 55, no. 3 (September 2017): 789–865. <a href="https://doi.org/10.1257/jel.20160995">https://doi.org/10.1257/jel.20160995</a>.</p>
</blockquote>

<p>The relevant original replication package was migrated to openICPSR in 2019, and its contents can still be viewed here, <strong>but not downloaded</strong>:</p>

<blockquote>
  <p>Blau, Francine D., and Kahn, Lawrence M. Replication data for: The Gender Wage Gap: Extent, Trends, and Explanations. Nashville, TN: American Economic Association [publisher], 2017. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2019-10-12. <a href="https://doi.org/10.3886/E113913V1">https://doi.org/10.3886/E113913V1</a></p>
</blockquote>

<p>The amended replication package is now available, and linked from the earlier one (note the V2, and the later publication date):</p>

<blockquote>
  <p>Blau, Francine D., and Kahn, Lawrence M. Replication data for: The Gender Wage Gap: Extent, Trends, and Explanations. Nashville, TN: American Economic Association [publisher], 2024. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2024-11-14. <a href="https://doi.org/10.3886/E113913V2">https://doi.org/10.3886/E113913V2</a></p>
</blockquote>

<p>The required <code class="language-plaintext highlighter-rouge">CHANGES.txt</code> reads</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>V1: Original version
V2: Moved PSID data to https://doi.org/10.3886/E210483V1 and updated README.
</code></pre></div></div>

<p>and the new PSID deposit is referenced there, in the related publications, and in the README.</p>

<blockquote>
  <p>Kahn, Lawrence, and Francine Blau. “Supplementary for: Francine D. Blau and Lawrence M. Kahn, ‘The Gender Wage Gap: Extent, Trends, and Explanations’, Journal of Economic Literature , 55 ,3 (Sept 2017): 789-865.” ICPSR - Interuniversity Consortium for Political and Social Research, 2024. <a href="https://doi.org/10.3886/E210483V1">https://doi.org/10.3886/E210483V1</a>.<sup id="fnref:note"><a href="#fn:note" class="footnote" rel="footnote" role="doc-noteref">3</a></sup></p>
</blockquote>

<h3 id="conclusion">Conclusion</h3>

<p>The problem outlined above is not unique to the PSID. We have seen “takedown” requests from the German Socio-Economic Panel and others, and I have prevented inadvertent publication of UNSD Comtrade data, Compustat data, commercial data, PII-laden data, etc. The PSID is relatively unique in that it has a mechanism to actually preserve the author-created extracts. A few other such mechanisms exist, but they are by no means universal. Most “takedown” requests can only be satisfied with the deletion of data, and the inclusion of detailed information on how others can obtain the data from the original data provider - an error-prone and not ideal process.</p>

<p>Authors should feel free to reach out to their journal’s data and reproducibility editor with questions about the available options.</p>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:1">
      <p>I was appointed as Data Editor position  in 2018, and we started verification of packages in 2019. We also only do a cursory review of Papers and Proceedings, though they remain subject to the same Data and Code Availability Policy. <a href="#fnref:1" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>The dividing line is approximately Oct 1, 2019. In 2019, <a href="https://aeadataeditor.github.io/aea-supplement-migration/programs/aea201910-migration.html">we migrated approximately 2,500 older replication packages into openICPSR</a>. Authors were not involved in this process, and so do not have operational access to the replication package. They do, however, have ownership of the deposit, and can request access to it. <a href="#fnref:2" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:note">
      <p>A shorter and perfectly acceptable name would have been “Supplementary for: The Gender Wage Gap: Extent, Trends, and Explanations”. The supplementary data could also be linked back to the original replication package, for clarity. <a href="#fnref:note" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>AEA Data Editor</name></author><category term="data editor tips" /><category term="replication packages" /><category term="terms of use" /><summary type="html"><![CDATA[The AEA Data and Code Availability Policy asks that authors provide access to all data used in a published paper. But it also acknowledges that there are cases where data cannot be shared. This may be due to privacy concerns, proprietary rights to the data that are not the author’s, or terms of use that prohibit the sharing, redistribution, or publication of data. So what happens when an author inadvertently does share such data, and the data provider finds out, and is not happy? Let’s call this a “take-down request.” The data provider asks that the author remove the data from the replication package. But the author is committed (by signing an agreement) to not withdrawing the replication package. How to proceed? Read on!]]></summary></entry><entry><title type="html">On the use and reuse of within-project code</title><link href="https://aeadataeditor.github.io/posts/2024-07-19-functions-and-code-duplication" rel="alternate" type="text/html" title="On the use and reuse of within-project code" /><published>2024-07-19T00:00:00-04:00</published><updated>2024-07-19T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/functions-and-code-duplication</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-07-19-functions-and-code-duplication"><![CDATA[<p>We often see researchers handle variants of their analysis by copying and pasting code, or by copying code files into separate directories, and making only minimal modifications. Some folks do this for robustness checks - same data, different analysis method, or a variant of the dependent variable - others for simulation of various scenarios - an economy without banks, an economy with credit-constrained banks, an economy with unconstrained banks. I won’t point to particular examples, to protect the (somewhat) innocent, but this is not a good idea.</p>

<!-- more -->

<p>It introduces lots of failure points - not necessarily in the final package, but in the development process.</p>

<h2 id="the-example">The example</h2>

<p>Consider that you are halfway through your project. You have a base model, and three variants thereof. Each of which is the base model, copied into three different directories, with minimal modifications in the code. For sake of clarity, and with no loss of generality intended:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code/
    base-model/
            base-model.m
    robustness-check-1/
            base-model.m
    robustness-check-2/
            base-model.m
    robustness-check-3/
            base-model.m
</code></pre></div></div>

<p>where a <code class="language-plaintext highlighter-rouge">diff</code> between <code class="language-plaintext highlighter-rouge">base-model.m</code> and <code class="language-plaintext highlighter-rouge">robustness-check-1/base-model.m</code> would show only a few lines changed:</p>

<div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh">diff code/base-model/base-model.m code/robustness-check-1/base-model.m
</span><span class="p">13073c13073
</span><span class="gd">&lt; a=1;
</span><span class="p">---
</span><span class="gi">&gt; a=2;
</span></code></pre></div></div>

<blockquote>
  <p>Note: the change would appear to be in line 13073, which is awfully subtle… this is inspired by real-life examples!</p>
</blockquote>

<h2 id="the-problem">The problem</h2>

<p>Now imagine that your thesis advisor, or a reviewer, identifies a key problem in the implemented algorithm. You fix it in <code class="language-plaintext highlighter-rouge">base-model.m</code>, but now need to fix it in all the other modified copies too. Will there be any typos when you implement the patch? What if there are not three robustness checks, but 30? Or 300 different parameterizations of a simulation?</p>

<p>The techy programmer might decide to do this with <code class="language-plaintext highlighter-rouge">patch</code> in conjunction with <code class="language-plaintext highlighter-rouge">git</code>, but that already counts as advanced functionality (I probably lost a lot of readers with the first part of that sentence…)</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># create a patch from the updates to the base model</span>
git diff d362f6..3bd22 <span class="o">&gt;</span> patch.diff
<span class="c"># apply the patch to the robustness check</span>
patch code/robustness-check-1/base-model.m &lt; patch.diff
</code></pre></div></div>

<p>but that is not a robust solution that scales to the 30 or 300 robustness checks.</p>

<h2 id="a-possible-solution">A possible solution</h2>

<p>The core solution is to apply elementary best programming practices: <strong>write functions</strong>.<sup id="fnref:functions"><a href="#fn:functions" class="footnote" rel="footnote" role="doc-noteref">1</a></sup></p>

<p>So should one go about the above problem? My rule of thumb is:</p>

<ul>
  <li>Copy code once, fine, don’t do it again.</li>
  <li>Copy it twice, stop, and create a function.</li>
  <li>Copy it three times: don’t even go there!</li>
</ul>

<p>Assuming that you are using MATLAB (where we seem to see this often), you should treat the core model code as a “function” (even if you do not explicitly program it that way), and then call that “function” multiple times. In a nutshell:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>code/
    core-simulation/
            parametrized-simulation.m
    base-model.m
    robustness-check-1.m
    robustness-check-2.m
    robustness-check-3.m
</code></pre></div></div>

<p>where</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% base-model.m</span>

<span class="c1">% We set the base model to have the following parameters,</span>
<span class="c1">% as per Section 2 of the paper:</span>
<span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
<span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>

<span class="c1">% We then call the core simulation code</span>
<span class="n">parametrized</span><span class="o">-</span><span class="n">simulation</span>
</code></pre></div></div>

<p>will call the code in “parametrized-simulation.m” with parameters <code class="language-plaintext highlighter-rouge">a,b,c</code> already set. The simulation itself assumes those parameters are set.<sup id="fnref:proper-function"><a href="#fn:proper-function" class="footnote" rel="footnote" role="doc-noteref">2</a></sup></p>

<p>The robustness checks might then have</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% robustness-check-1.m</span>

<span class="c1">% We set the model to have the following parameters,</span>
<span class="c1">% as per Section 3 of the paper:</span>

<span class="n">a</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span> <span class="c1">% This differs from the base model</span>
<span class="n">b</span><span class="o">=</span><span class="mi">2</span><span class="p">;</span>
<span class="n">c</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>

<span class="c1">% We then call the core simulation code</span>
<span class="n">parametrized</span><span class="o">-</span><span class="n">simulation</span>
</code></pre></div></div>

<p>or go through a loop of multiple values:</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% robustness-check-2.m</span>


<span class="c1">% We set the model to have the following parameters,</span>
<span class="c1">% as per Section 4 of the paper:</span>

<span class="n">b</span><span class="o">=</span><span class="mi">3</span><span class="p">;</span>
<span class="n">c</span><span class="o">=</span><span class="mi">4</span><span class="p">;</span>

<span class="c1">% We now explore the space of a within this context.</span>
<span class="k">for</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">:</span><span class="mi">10</span>
    <span class="n">parametrized</span><span class="o">-</span><span class="n">simulation</span>
<span class="k">end</span>

<span class="c1">% Summarize results from exploration</span>

<span class="n">summarize</span><span class="o">-</span><span class="n">results</span>

</code></pre></div></div>

<h2 id="other-languages">Other languages</h2>

<p>Is that a MATLAB-specific problem? No. We see similar issues in Stata, R, Python, and other languages. The core solution is the same: write functions, and call them multiple times, instead of copying code around, and hard-coding parameters.</p>

<h2 id="other-situations">Other situations</h2>

<p>The above example had continuous (well, kind of) parameter spaces. What if they are discontinuous? You can still loop over a whole set of specifications by storing them in a file - yes, an Excel file is fine! - and reading them in (in MATLAB, <a href="https://www.mathworks.com/help/matlab/import_export/ways-to-import-spreadsheets.html"><code class="language-plaintext highlighter-rouge">readtable</code></a>). For example,</p>

<div class="language-matlab highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">% Read the Excel spreadsheet</span>
<span class="p">[</span><span class="n">num</span><span class="p">,</span> <span class="n">txt</span><span class="p">,</span> <span class="n">raw</span><span class="p">]</span> <span class="o">=</span> <span class="nb">xlsread</span><span class="p">(</span><span class="s1">'your_spreadsheet.xlsx'</span><span class="p">);</span>

<span class="c1">% Get the number of rows in the data</span>
<span class="p">[</span><span class="n">numRows</span><span class="p">,</span> <span class="o">~</span><span class="p">]</span> <span class="o">=</span> <span class="nb">size</span><span class="p">(</span><span class="n">raw</span><span class="p">);</span>

<span class="c1">% Loop over each row, starting from the second row (assuming first row is header)</span>
<span class="k">for</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">:</span><span class="n">numRows</span>
    <span class="c1">% Extract values from columns A, B, and C</span>
    <span class="n">a</span> <span class="o">=</span> <span class="n">raw</span><span class="p">{</span><span class="n">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">};</span>  <span class="c1">% Column A</span>
    <span class="n">b</span> <span class="o">=</span> <span class="n">raw</span><span class="p">{</span><span class="n">i</span><span class="p">,</span> <span class="mi">2</span><span class="p">};</span>  <span class="c1">% Column B</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">raw</span><span class="p">{</span><span class="n">i</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>  <span class="c1">% Column C</span>
    
    <span class="c1">% Call the function something() with the extracted values</span>
    <span class="nb">result</span> <span class="o">=</span> <span class="n">something</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    
    <span class="c1">% You can do something with the result here if needed</span>
    <span class="c1">% For example, store it in an array or print it</span>
    <span class="nb">disp</span><span class="p">([</span><span class="s1">'Result for row '</span><span class="p">,</span> <span class="nb">num2str</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="s1">': '</span><span class="p">,</span> <span class="nb">num2str</span><span class="p">(</span><span class="nb">result</span><span class="p">)]);</span>
<span class="k">end</span>
</code></pre></div></div>
<p>(straight from <a href="https://claude.ai/">Claude AI</a>)</p>

<h2 id="summarizing-it-and-creating-tables">Summarizing it and creating tables</h2>

<p>Of course, you now also have  to properly capture all those results, store them, and be able to summarize them, and create tables from them. That’s another story.</p>
<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:functions">
      <p>See for instance <a href="https://medium.com/@josueparra2892/20-best-programming-practices-407df688b96e">https://medium.com/@josueparra2892/20-best-programming-practices-407df688b96e</a>, but this will be repeated many times. I was personally influenced by reading the (very accessible, but 900 pages!) “<a href="https://bookshop.org/p/books/code-complete-steve-mcconnell/12551815?ean=9780735619678">Code Complete</a>” by Steve McConnell. Desirable internal design characteristics include “minimal complexity” (KISS), “ease of maintenance”, and “reusability” <a href="#fnref:functions" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:proper-function">
      <p>In a proper function, you would pass the parameters as arguments, and validate that they are the right ones, etc.: <code class="language-plaintext highlighter-rouge">core-model(a,b,c)</code>. Read the programming language specific manual on how to properly write functions: <a href="https://www.stata.com/manuals/u17.pdf">Stata</a>, <a href="https://adv-r.hadley.nz/functions.html#functions">R via Hadley</a>, <a href="https://www.mathworks.com/help/matlab/ref/function.html">MATLAB</a>, etc. <a href="#fnref:proper-function" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>AEA Data Editor</name></author><category term="data editor tips" /><category term="replication packages" /><category term="code" /><category term="function libraries" /><summary type="html"><![CDATA[We often see researchers handle variants of their analysis by copying and pasting code, or by copying code files into separate directories, and making only minimal modifications. Some folks do this for robustness checks - same data, different analysis method, or a variant of the dependent variable - others for simulation of various scenarios - an economy without banks, an economy with credit-constrained banks, an economy with unconstrained banks. I won’t point to particular examples, to protect the (somewhat) innocent, but this is not a good idea.]]></summary></entry><entry><title type="html">On the use and redistribution of data</title><link href="https://aeadataeditor.github.io/posts/2024-04-29-use-and-reuse-of-data" rel="alternate" type="text/html" title="On the use and redistribution of data" /><published>2024-04-29T00:00:00-04:00</published><updated>2024-04-29T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/use-and-reuse-of-data</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-04-29-use-and-reuse-of-data"><![CDATA[<p>Many researchers are confused by the difference between “use” and “(re-)distribution” of data. In a nutshell, just because you are able to freely use the data for your own research purposes does not give you the right to distribute the data to others. The devil is in the details.</p>

<!-- more -->

<h2 id="a-scenario">A scenario</h2>

<p>You are happily browsing along the internet, and find an fabulous dataset you think you can use for your awesome idea. Download, analyze, submit, publish, … all good. But then the pesky journal asks for a replication package. Easy, right? Wrap up the code, the data, upload, … all good? Maybe. Possibly not.</p>

<h2 id="the-problem">The problem</h2>

<p>Many data used by economists stems from other data sources. Most of these data sources are on the internet. Anybody can use data that’s on the internet and do with it what they want, right?</p>

<p>As the discussion surrounding copyright and artificial intelligence shows, the answer is complex.<sup id="fnref:nytai"><a href="#fn:nytai" class="footnote" rel="footnote" role="doc-noteref">1</a></sup><sup id="fnref:silverman"><a href="#fn:silverman" class="footnote" rel="footnote" role="doc-noteref">2</a></sup> There is a concept of “fair use” in US copyright law, and in particular, it has been used to allow for legal webscraping.<sup id="fnref:webscraping"><a href="#fn:webscraping" class="footnote" rel="footnote" role="doc-noteref">3</a></sup></p>

<p>But that applies primarily for “use”. If you want to publish the data you obtained from elsewhere, that is no longer necessarily considered (fair) “use”, it falls under “redistribution” or “publication”.</p>

<h2 id="the-solution">The solution</h2>

<p>In principle, the solution is for data providers to establish clear terms of use and licenses. And many do, especially in the commercial space. In general, you will find that “terms of use” restrict certains uses and rights, and “licenses” allow or grant certain uses and rights.</p>

<p>Historically, it was software that was licensed, and “open source” licenses have a long history. Many such licenses are listed at the “<a href="https://opensource.org/licenses">open source initiative</a>”.</p>

<p>For data, a popular set of licenses are the “<a href="https://creativecommons.org/licenses/">Creative Commons</a>” licenses. These licenses are designed to be easy to understand and to use, and allow for a wide range of uses - including <strong>redistribution</strong>. The CC-BY license is abundantly clear about what it allows:</p>

<blockquote>
  <p><a href="https://creativecommons.org/licenses/by/4.0/">CC By 4.0 DEED</a>:</p>

  <p>You are free to:</p>

  <ul>
    <li>Share — copy and redistribute the material in any medium or format for any purpose, even commercially. 
[…]</li>
  </ul>

</blockquote>

<p>Other data licenses exist that allow for redistribution explicitly:</p>

<ul>
  <li><a href="https://opendatacommons.org/licenses/odbl/">Open Data Commons Open Database License (ODbL)</a></li>
  <li>various government “open data” licenses, such as the <a href="https://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/">UK Open Government License</a> and Statistics Canada’s <a href="https://www.statcan.gc.ca/en/reference/licence">Statistics Canada Open Licence</a>.</li>
</ul>

<p>(often times, the differences are minor between these licenses).</p>

<h2 id="the-problem-part-2">The problem, part 2</h2>

<p>The problem is that many (academic) data providers still do not show or apply these licenses, and have no terms of use, or ones that are hidden. It thus becomes difficult for researchers to know what they can and cannot do with the data they find, leading to avoidable confusion.</p>

<p>Sometimes, these are identified at the time of downloading the data. For instance, the widely-used <a href="https://www.worldvaluessurvey.org/WVSDocumentationWV6.jsp">World Values Survey</a> displays four conditions to researchers who (after registering) download the data:</p>

<p><img src="/images/wvs-download-screenshot-20240429.png" alt="WVS download conditions" /></p>

<p>It otherwise mentions the “non-redistribution license” or that “data redistribution is prohibited” in multiple places, but there is no single “Terms of Use” page, or a “WVS License” page that is easily accessible and referenceable.</p>

<p>Even when terms of use are provided, permissions and restrictions are not necessarily linked together. For instance, the fabulous <a href="https://dhsprogram.com/">DHS Program</a> states on many of its pages</p>

<blockquote>
  <p>The DHS Program is authorized to distribute, at no cost, unrestricted survey data files for legitimate academic research.</p>
</blockquote>

<p>but one has to search for the <a href="https://dhsprogram.com/data/Terms-of-Use.cfm">Terms of Use</a>, tucked in between “Contraceptive Calendar Tutorial” and “DHS Github Code Share”, which state (also very clearly)</p>

<blockquote>
  <p>Conditions of Use for The DHS Program datasets 
(applies to all datasets downloaded from The DHS Program website: www.dhsprogram.com)</p>

  <p>[…]</p>
  <ul>
    <li>Agree that the datasets <strong>will not be shared</strong> with other researchers without the written consent of The DHS Program.</li>
  </ul>
</blockquote>

<p>(emphasis added). Many researchers include DHS data in their replication packages, and active data editors like myself have to remind them to remove the data from the replication package.</p>

<h2 id="the-takeaways">The takeaways</h2>

<h3 id="data-providers">Data providers</h3>

<ul>
  <li>Data providers should have a clear “Terms of Use” page, or a “License” page, that is easily accessible and referenceable.</li>
  <li>They should also include the license and conditions in every download.</li>
  <li>When data formats that allow for annotation (Stata, SAS), embed the license information in the dataset itself.</li>
</ul>

<h3 id="researchers">Researchers</h3>

<ul>
  <li>Always record the terms of use and license when you download the data.</li>
  <li>Search for “terms of use” or “license” on data providers’ websites.</li>
  <li>If the website asks for registration, it is highly likely that there are redistribution restrictions.</li>
  <li>Request that data providers make their terms of use and licenses more visible and accessible.</li>
  <li>Consult (and update) the <a href="https://social-science-data-editors.github.io/reference/TermsOfUse.html">Social Science Data Editors’ Terms of Use database</a>.</li>
</ul>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:nytai">
      <p>New York Times has sued OpenAI and Microsoft for having used their texts, see <a href="https://www.washingtonpost.com/technology/2024/01/04/nyt-ai-copyright-lawsuit-fair-use/">https://www.washingtonpost.com/technology/2024/01/04/nyt-ai-copyright-lawsuit-fair-use/</a>. <a href="#fnref:nytai" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:silverman">
      <p>Sarah Silverman and other authors have sued OpenAI over the use of their texts, but parts of that lawsuit have been dismissed, see <a href="https://www.reuters.com/legal/litigation/openai-gets-partial-win-authors-us-copyright-lawsuit-2024-02-13/">https://www.reuters.com/legal/litigation/openai-gets-partial-win-authors-us-copyright-lawsuit-2024-02-13/</a>. <a href="#fnref:silverman" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:webscraping">
      <p>See <a href="https://techcrunch.com/2022/04/18/web-scraping-legal-court/">https://techcrunch.com/2022/04/18/web-scraping-legal-court/</a>. <a href="#fnref:webscraping" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>AEA Data Editor</name></author><category term="data editor tips" /><category term="replication packages" /><category term="terms of use" /><category term="licenses" /><summary type="html"><![CDATA[Many researchers are confused by the difference between “use” and “(re-)distribution” of data. In a nutshell, just because you are able to freely use the data for your own research purposes does not give you the right to distribute the data to others. The devil is in the details.]]></summary></entry><entry><title type="html">Random notes from the AMAs</title><link href="https://aeadataeditor.github.io/posts/2024-04-11-random-notes-ama" rel="alternate" type="text/html" title="Random notes from the AMAs" /><published>2024-04-11T00:00:00-04:00</published><updated>2024-04-11T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/random-notes-ama</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-04-11-random-notes-ama"><![CDATA[<p>In the AMAs (<a href="https://aeadataeditor.github.io/talks/">see past and future AMAs</a>), we talked about many things. No transcript, but here’s a raw dump of the various websites that were used.</p>

<!-- more -->

<h2 id="aea-data-and-code-availability-policy">AEA Data and Code Availability Policy</h2>

<p><a href="https://www.aeaweb.org/journals/data/data-code-policy">https://www.aeaweb.org/journals/data/data-code-policy</a>, and if revising a package, <a href="https://www.aeaweb.org/journals/data/revisions-policy">https://www.aeaweb.org/journals/data/revisions-policy</a></p>

<h2 id="restricted-data">Restricted data</h2>

<p>To access restricted data, the author and Editor may start here: <a href="https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data/">https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data/</a></p>

<p>If the AEA Data Editor cannot access the data, but somebody else can, we follow the “third party” policy <a href="https://www.aeaweb.org/journals/data/policy-third-party">https://www.aeaweb.org/journals/data/policy-third-party</a></p>

<h2 id="common-documentation-by-social-science-data-editors">Common documentation by Social Science Data Editors</h2>

<ul>
  <li>
    <p>“The” README: 
<a href="https://social-science-data-editors.github.io/template_README/template-README.html">https://social-science-data-editors.github.io/template_README/template-README.html</a></p>
  </li>
  <li>
    <p>The common policy guidelines:
<a href="https://datacodestandard.org/">https://datacodestandard.org/</a></p>
  </li>
</ul>

<h2 id="better-code-and-readmes">Better code and READMEs</h2>

<p>Example of graphical interface to select data (and the difficulty of describing how to do that concisely):</p>

<p><a href="https://databank.worldbank.org/source/world-development-indicators">https://databank.worldbank.org/source/world-development-indicators</a></p>

<p>Stata package to do the same much more succinctly:</p>

<ul>
  <li><a href="https://datahelpdesk.worldbank.org/knowledgebase/articles/889464-wbopendata-stata-module-to-access-world-bank-data">https://datahelpdesk.worldbank.org/knowledgebase/articles/889464-wbopendata-stata-module-to-access-world-bank-data</a></li>
  <li><a href="https://ideas.repec.org/c/boc/bocode/s457234.html">Package on RePEc</a></li>
</ul>

<p>Similar tension between the FRED graphical interface <a href="https://fred.stlouisfed.org/">https://fred.stlouisfed.org/</a> and the FRED API, which can be used via</p>

<ul>
  <li>Stata  <a href="https://www.stata.com/manuals/dimportfred.pdf">https://www.stata.com/manuals/dimportfred.pdf</a></li>
  <li>MATLAB  <a href="https://www.mathworks.com/help/datafeed/fred.fetch.html">https://www.mathworks.com/help/datafeed/fred.fetch.html</a></li>
  <li>R <a href="https://cran.r-project.org/web/packages/fredr/vignettes/fredr.html">https://cran.r-project.org/web/packages/fredr/vignettes/fredr.html</a></li>
</ul>

<h2 id="difficult-data-citations">Difficult data citations</h2>

<p>Example of restricted access data with DOI, and a long list of DOIs (problems with data citations):</p>

<p><a href="https://www.casd.eu/source/statistique-structurelle-annuelle-dentreprises-issue-du-dispositif-esane/">https://www.casd.eu/source/statistique-structurelle-annuelle-dentreprises-issue-du-dispositif-esane/</a></p>

<p>and a <a href="https://social-science-data-editors.github.io/guidance/addtl-data-citation-guidance.html#many-related-datasets">possible solution</a>.</p>

<h2 id="versioning-of-stata-packages">Versioning of Stata packages</h2>

<p><a href="https://github.com/labordynamicsinstitute/ssc-mirror/">https://github.com/labordynamicsinstitute/ssc-mirror/</a></p>

<h2 id="improving-yourself">Improving yourself</h2>

<p>Draft tutorial on how to self-check reproducibility (and also how to ensure it in the first place), still quite preliminary right now:</p>

<p><a href="https://larsvilhuber.github.io/self-checking-reproducibility/">https://larsvilhuber.github.io/self-checking-reproducibility/</a></p>

<h2 id="crediting-others-software-citations">Crediting others (software citations)</h2>

<p>R package to generate a bibliography file (bib, etc.) from all the citable packages used in an R-based replication package:  <a href="https://github.com/Pakillo/grateful">https://github.com/Pakillo/grateful</a></p>]]></content><author><name>AEA Data Editor</name></author><category term="data editor tips" /><category term="replication packages" /><summary type="html"><![CDATA[In the AMAs (see past and future AMAs), we talked about many things. No transcript, but here’s a raw dump of the various websites that were used.]]></summary></entry><entry><title type="html">AEJ Best Papers 2024 and replication packages</title><link href="https://aeadataeditor.github.io/posts/2024-04-10-aej-best-papers-2024" rel="alternate" type="text/html" title="AEJ Best Papers 2024 and replication packages" /><published>2024-04-10T00:00:00-04:00</published><updated>2024-04-10T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/aej-best-papers-2024</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-04-10-aej-best-papers-2024"><![CDATA[<p>The annual <strong>American Economic Journal (AEJ) Best Paper Awards</strong> highlight the best paper published in each of the American Economic Journals: Applied Economics, Economic Policy, Macroeconomics, and Microeconomics over the last three years. Nominations are provided by AEA members, and winners are selected by the journals’ Boards of Editors. More information, including links to the papers, at  <a href="https://www.aeaweb.org/about-aea/honors-awards/aej-best-papers">https://www.aeaweb.org/about-aea/honors-awards/aej-best-papers</a>.</p>

<p>The decision process is on the overall scientific merit. On this page, I list the replication packages for each of these.</p>

<!-- more -->

<p><!-- manually constructing table -->
  <!-- "Journal","Title","Authors","DOI","Date","Package DOI","Requires confidential or proprietary data","Data Editor ran","Notes" --></p>

<h2 id="aej-applied-economics">AEJ Applied Economics</h2>

<blockquote>
  <p>Manasi Deshpande, Tal Gross, and Yalun Su. “Disability and Distress: The Effect of Disability Programs on Financial Outcomes” <em>AEJ Applied Economics</em> (April 2021). <a href="https://doi.org/10.1257/app.20190709">10.1257/app.20190709</a></p>
</blockquote>

<ul>
  <li>Replication package: <a href="https://doi.org/10.3886/E118462V1">10.3886/E118462V1</a></li>
  <li>Does the replication package require confidential or proprietary data? <strong>Yes</strong></li>
  <li>Did the Data Editor run the package? <strong>Partially</strong></li>
  <li>Additional notes:    <em>Requires ZTRAX data, which are no longer accessible.</em></li>
</ul>

<h2 id="aej-economic-policy">AEJ Economic Policy</h2>

<blockquote>
  <p>Barbara Biasi. “The Labor Market for Teachers under Different Pay Schemes” <em>AEJ Economic Policy</em> (August 2021). <a href="https://doi.org/10.1257/pol.20200295">10.1257/pol.20200295</a></p>
</blockquote>

<ul>
  <li>Replication package: <a href="https://doi.org/10.3886/E119844V1">10.3886/E119844V1</a></li>
  <li>Does the replication package require confidential or proprietary data? <strong>Yes</strong></li>
  <li>Did the Data Editor run the package? <strong>No</strong></li>
  <li>Additional notes:    <em>Uses restricted data from the Wisconsin Department of Public Instruction and New York City Department of Education.</em></li>
</ul>

<h2 id="aej-macroeconomics">AEJ Macroeconomics</h2>

<blockquote>
  <p>Silvia Miranda-Agrippino, and Giovanni Ricco. “The Transmission of Monetary Policy Shocks” <em>AEJ Macroeconomics</em> (July 2021). <a href="https://doi.org/10.1257/mac.20180124">10.1257/mac.20180124</a></p>
</blockquote>

<ul>
  <li>Replication package: <a href="https://doi.org/10.3886/E116841V1">10.3886/E116841V1</a></li>
  <li>Does the replication package require confidential or proprietary data? <strong>Yes</strong></li>
  <li>Did the Data Editor run the package? <strong>Yes</strong></li>
  <li>Additional notes:    <em>Only a small fraction of the data are proprietary, but can be accessed from the typical business school library. The remaining data are included.</em></li>
</ul>

<h2 id="aej-microeconomics">AEJ Microeconomics</h2>

<blockquote>
  <p>Board and Meyer-ter-Vehn. “A Reputational Theory of Firm Dynamics” <em>AEJ Microeconomics</em> (May 2022). <a href="https://doi.org/10.1257/mic.20190376">10.1257/mic.20190376</a></p>
</blockquote>

<ul>
  <li>Replication package: <a href="https://doi.org/10.3886/E118970V1">10.3886/E118970V1</a></li>
  <li>Does the replication package require confidential or proprietary data? <strong>No</strong></li>
  <li>Did the Data Editor run the package? <strong>Yes</strong></li>
  <li>Additional notes:    <em>Only uses (creates) simulated data.</em></li>
</ul>]]></content><author><name>AEA Data Editor</name></author><category term="best papers" /><category term="replication packages" /><summary type="html"><![CDATA[The annual American Economic Journal (AEJ) Best Paper Awards highlight the best paper published in each of the American Economic Journals: Applied Economics, Economic Policy, Macroeconomics, and Microeconomics over the last three years. Nominations are provided by AEA members, and winners are selected by the journals’ Boards of Editors. More information, including links to the papers, at https://www.aeaweb.org/about-aea/honors-awards/aej-best-papers. The decision process is on the overall scientific merit. On this page, I list the replication packages for each of these.]]></summary></entry><entry><title type="html">Examples of replication packages for research conducted in FSRDCs</title><link href="https://aeadataeditor.github.io/posts/2024-04-09-census-packages" rel="alternate" type="text/html" title="Examples of replication packages for research conducted in FSRDCs" /><published>2024-04-09T00:00:00-04:00</published><updated>2024-04-09T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/census-packages</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-04-09-census-packages"><![CDATA[<p>I have been asked a few times about guidance for replication packages that use confidential data in research data centers, e.g., the  Federal Statistical Research Data Centers (FSRDCs) and others. Here are some examples and guidance.</p>

<!-- more -->

<h2 id="the-problem">The problem</h2>

<p>The data, and sometimes (only sometimes) pieces of code, are confidential. If this is something you encounter, read on.</p>

<h2 id="this-is-not-new">This is not new</h2>

<p>See my <a href="https://aeadataeditor.github.io/posts/2022-04-13-coding-confidential">earlier post almost exactly two years ago</a> and this <a href="https://larsvilhuber.github.io/reproducibility-confidential-fsrdc/">2022 tutorial</a> that I developed from that.</p>

<h2 id="general-guidance">General Guidance</h2>

<ul>
  <li>https://social-science-data-editors.github.io/guidance/DCAS_Restricted_data.html#us-census-bureau-and-fsrdc</li>
  <li>https://social-science-data-editors.github.io/guidance/Requested_information_hosting.html#self-generated-repositories</li>
</ul>

<h2 id="examples">Examples!</h2>

<p>Two excellent examples:</p>

<h3 id="example-1-berger-herkenhoof-and-mongey-2022">Example 1: Berger, Herkenhoof, and Mongey (2022)</h3>

<blockquote>
  <p>Berger, David, Herkenhoff, Kyle, and Mongey, Simon. Data and Code for: Labor Market Power. Nashville, TN: American Economic Association [publisher], 2022. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2022-12-07. <a href="https://doi.org/10.3886/E154241V2">https://doi.org/10.3886/E154241V2</a></p>
</blockquote>

<p>Not only code, but faces the problem that IRS data cannot have variables revealed. Workarounds galore.</p>

<h3 id="example-2-yeh-macoluso-and-hershbein-2022">Example 2: Yeh, Macoluso, and Hershbein (2022)</h3>

<blockquote>
  <p>Yeh, Chen, Macaluso, Claudia, and Hershbein, Brad. Code for: “Monopsony in the U.S. Labor Market.” Nashville, TN: American Economic Association [publisher], 2022. Ann Arbor, MI: Inter-university Consortium for Political and Social Research [distributor], 2022-11-28. https://doi.org/10.3886/E162581V1</p>
</blockquote>

<h3 id="example-3-fort-2017">Example 3: Fort (2017)</h3>

<p>This replication package is a bit older, but is an excellent example that I have repurposed as guidance for others:</p>

<blockquote>
  <p>Teresa C. Fort, Technology and Production Fragmentation: Domestic versus Foreign Sourcing, The Review of Economic Studies, Volume 84, Issue 2, April 2017, Pages 650–687, <a href="https://doi.org/10.1093/restud/rdw057">https://doi.org/10.1093/restud/rdw057</a></p>
</blockquote>

<p>and the <a href="https://social-science-data-editors.github.io/guidance/copies/Fort2016-Readme.pdf">copy of the README</a>.</p>

<p>Note that this package was created before the installation of the current generation of data editors, so relied on none of that (official) expertise!</p>

<p>Many more out there.</p>

<h2 id="ask-the-research-data-center">Ask the research data center</h2>

<p>The US Census Bureau has procedures in place to review code (it’s actually part of the release system), as do many other systems. Some parts of the code will need to be redacted, but you can get very functional code released (see the <a href="https://larsvilhuber.github.io/reproducibility-confidential-fsrdc/">2022 tutorial</a> on how to set this up from the start).</p>

<h2 id="but-dont-take-no-for-an-answer">But: Don’t take “No” for an answer!</h2>

<p>There are sometimes some old practices in place in restricted-access environments that do not have 100s of researchers flowing through (for instance, smaller countries, places with newer centers, etc.). Sometimes, you need to push back. You can rely on the Data Editors - me, others - to help you do that. I have successfully educated data custodians, who justifiably fear releasing too much confidential data, on what can be done reliably and robustly, at least with code.</p>

<h2 id="dotting-the-is-and-crossing-the-ts">Dotting the i’s and crossing the t’s</h2>

<p>We usually require that an <strong>internal</strong> archive be created at the institution holding the data, so that regardless of how much or how little is released, internally, a fully reproducible archive exists, accessible for those with permission to access. The permissions necessary , and permission granted in the replication package so that others, with appropriate access, can access those files. See the first example above for an excellent example of that, and <a href="https://social-science-data-editors.github.io/guidance/Requested_information_hosting.html#self-generated-repositories">this guidance</a> on how to do so in the absence of a formal internal archive.</p>]]></content><author><name>AEA Data Editor</name></author><category term="confidential data" /><category term="complex projects" /><summary type="html"><![CDATA[I have been asked a few times about guidance for replication packages that use confidential data in research data centers, e.g., the Federal Statistical Research Data Centers (FSRDCs) and others. Here are some examples and guidance.]]></summary></entry><entry><title type="html">NDAs, NDAs, and NDAs: How to describe access to data that cannot be published</title><link href="https://aeadataeditor.github.io/posts/2024-03-15-nda-redux" rel="alternate" type="text/html" title="NDAs, NDAs, and NDAs: How to describe access to data that cannot be published" /><published>2024-03-15T00:00:00-04:00</published><updated>2024-03-15T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/nda-redux</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2024-03-15-nda-redux"><![CDATA[<p>I was recently forwarded a question from a data librarian discussion list, and invited to respond to the question of “example language” for a data access description when data were obtained via a non-disclosure agreement (NDA):</p>

<blockquote>
  <p>[…] the data are from a commercial company under a non-disclosure agreement […] asked to include “data sharing plans (for all data, documentation, and code used in analysis)”. […] Can you think of any example language that the researcher could borrow from to include in the data sharing plan?</p>
</blockquote>

<p>(paraphrased)</p>

<!-- more -->

<p>The use of some sort of data access restriction is quite common in economics. We have a few examples listed <a href="https://social-science-data-editors.github.io/guidance/Requested_information_dcas.html">here</a>. 
None of those directly address when an NDA is required, but the generic “<a href="https://social-science-data-editors.github.io/guidance/Requested_information_dcas.html#example-for-confidential-data">confidential data</a>” example is straightforward to adapt.</p>

<blockquote>
  <p>The data for this project are confidential, but may be obtained with Data Use Agreements with the Massachusetts Department of Elementary and Secondary Education (DESE). Researchers interested in access to the data may contact [NAME] at [EMAIL], also see www.doe.mass.edu/research/contact.html. It can take some months to negotiate data use agreements and gain access to the data. The author will assist with any reasonable replication attempts for two years following publication.</p>
</blockquote>

<p>As general guidance, journal (data) editors seek the following information:</p>

<ul>
  <li>how did the author access the data? (describe how the initial contact was made, what type of agreements, such as NDAs, were signed, and what they restrict and why)</li>
  <li>how can others​ access the data? (“Contact the vice president of academic interaction, and request “data on gooble-dee-gooks” from 2002-2022.”) Importantly, the author should address whether the exact data can be obtained by others, or if this was a pull from a dynamic database, and while generically the same data might be available in a few years’ time, the exact data will never be obtainable. Or that after 10 years, regulatory requirements force the data provider to delete the data. Or whatever is needed to assess the likelihood of being able to access such data. Costs and delays are also important.</li>
  <li>In some cases, authors may already know that the regime within the data provider has changed in such a fashion that the data are no longer available to anybody going forward - that may not be an impediment for the paper being published, but it is important to know (the data are fundamentally unverifiable)</li>
</ul>

<p>This is summarized in the Data and Code Availability Standard, that many econ journals now adhere to: <a href="https://datacodestandard.org/">https://datacodestandard.org/</a></p>

<h2 id="examples">Examples</h2>

<p>Here are some examples (not all exactly corresponding to a single-entity NDA):</p>

<h3 id="gross--sampat-2023">Gross &amp; Sampat (2023)</h3>

<blockquote>
  <p>Gross, Daniel P., and Bhaven N. Sampat. 2023. “America, Jump-Started: World War II R&amp;D and the Takeoff of the US Innovation System.” American Economic Review, 113 (12): 3323-56. https://doi.org/10.1257/aer.20221365</p>
</blockquote>

<ul>
  <li><a href="https://doi.org/10.1257/aer.20221365">Article</a></li>
  <li>
    <p><a href="https://doi.org/10.3886/E192375V1">Replication package</a></p>
  </li>
  <li>Some data are included, others are not, because subject to redistribution restrictions, but are obtainable under various agreement, and others are commercially available for payment (thus a variety of DUA types)</li>
  <li>For instance, they state “<em>Derwent Innovation (2018), EPO (2017) PATSTAT, and the Dun &amp;Bradstreet (1980) data were obtained through institutional subscriptions.</em>”</li>
  <li>Excellent data availability statements in the README.</li>
</ul>

<h3 id="cullen--perez-truglia-2023">Cullen &amp; Perez-Truglia (2023)</h3>

<blockquote>
  <p>Cullen, Zoë, and Ricardo Perez-Truglia. 2023. “The Old Boys’ Club: Schmoozing and the Gender Gap.” American Economic Review, 113 (7): 1703-40. https://doi.org/10.1257/aer.20210863</p>
</blockquote>

<ul>
  <li><a href="https://doi.org/10.1257/aer.20210863">Article</a></li>
  <li>
    <p><a href="https://doi.org/10.3886/E182243V1">Replication package</a></p>
  </li>
  <li>Data were collected at a company that the first author was an employee of. The company cannot be named (and is pruned from the author’s CV!)</li>
  <li>README states “The data was collected by the authors in collaboration with a large financial institution via surveys. Zoe Cullen was an employee of the institution, which remains unnamed to protect the confidentially of the firm, at the time of data collection.”</li>
  <li>An extreme form of NDA, which happens a few times.</li>
</ul>

<h3 id="zussman-2023">Zussman (2023)</h3>

<blockquote>
  <p>Zussman, Asaf. 2023. “Discrimination in Times of Crises and the Role of the Media.” American Economic Journal: Applied Economics, 15 (4): 422-51. https://doi.org/10.1257/app.20210732</p>
</blockquote>

<ul>
  <li><a href="https://doi.org/10.1257/app.20210732">Article</a></li>
  <li>
    <p><a href="https://doi.org/10.3886/E175242V1">Replication package</a></p>
  </li>
  <li>The data were scraped from a (named) public website, but contain names of doctors. The data were not made available due to ethical concerns, but the access procedure (repeatable by anybody) is described in detail.</li>
  <li>The author explains that  “<em>The project received approval from the Ethics Committee of the Faculty of Social Sciences at the Hebrew University and from the University Ethics Committee (IRB) under the condition that identifying information about the doctors, most importantly doctor license numbers and names, will not become publicly available.</em>”</li>
  <li>Similar:  Cage et al (2023) <a href="https://doi.org/10.1257/aer.20211509">https://doi.org/10.1257/aer.20211509</a> which contains names of Nazi collaborators.</li>
</ul>

<h3 id="kuhn---shen-2023">Kuhn &amp;  Shen (2023)</h3>

<blockquote>
  <p>Kuhn, Peter, and Kailing Shen. 2023. “What Happens When Employers Can No Longer Discriminate in Job Ads?” American Economic Review, 113 (4): 1013-48. https://doi.org/10.1257/aer.20211127</p>
</blockquote>

<ul>
  <li><a href="https://doi.org/10.1257/aer.20211127">Article</a></li>
  <li>
    <p><a href="https://doi.org/10.3886/E183021V1">Replication package</a></p>
  </li>
  <li>Internal data from a named Chinese company (XMRC.com) are used, but not published, in “<em>accordance with XMRC’s wishes</em>” (read: NDA/DUA). This is how the authors obtained the data.</li>
  <li>But the limited data used for the analysis are deposited in the Research Data Center of the IZA (a German research center) and can be analyzed on a remote computing platform</li>
</ul>

<h2 id="summary">Summary</h2>

<p>In all of the above, focus was on transparency of the two components of the data availability statement: original access, and subsequent access.</p>

<h2 id="postscript-access-by-the-journal-is-not-the-same-as-public-access">Postscript: Access by the journal is not the same as public access</h2>

<p>I will note that in many of these cases, the files were made available to the journal’s Data Editor (=me) under a derivative or implicit NDA, allowing the journal to verify veracity of the analysis, despite the data not being publishable. In cases where the source cannot be named, the Data Editor may enter into an NDA with the author to learn the name of the source, to verify plausibility, without revealing the information publicly. While all of these are second-best access methods, they are far better than obscurity and opacity.</p>

<h2 id="additional-readings">Additional readings</h2>

<ul>
  <li><a href="https://aeadataeditor.github.io/posts/2023-11-01-ndas.html">2023 post on NDAs</a></li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/2021-10-28-reproducibility-restricted-france.html">2021 post on example of checking confidential data</a></li>
  <li><a href="https://www.aeaweb.org/journals/data/policy-third-party">AEA policy on third-party replicators</a></li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data">AEA process for obtaining not-for-distribution data</a></li>
  <li>Vilhuber, Lars. 2023. “<a href="https://doi.org/10.1016/j.jeconom.2023.05.001">Reproducibility and transparency versus privacy and confidentiality: Reflections from a data editor</a>, Journal of Econometrics, Volume 235, Issue 2, <a href="https://doi.org/10.1016/j.jeconom.2023.05.001">https://doi.org/10.1016/j.jeconom.2023.05.001</a> (<a href="https://doi.org/10.48550/arXiv.2305.14478">OA version on arXiv</a>)</li>
</ul>]]></content><author><name>AEA Data Editor</name></author><category term="NDA" /><category term="DUA" /><category term="confidential" /><category term="DCAS" /><category term="access" /><summary type="html"><![CDATA[I was recently forwarded a question from a data librarian discussion list, and invited to respond to the question of “example language” for a data access description when data were obtained via a non-disclosure agreement (NDA): […] the data are from a commercial company under a non-disclosure agreement […] asked to include “data sharing plans (for all data, documentation, and code used in analysis)”. […] Can you think of any example language that the researcher could borrow from to include in the data sharing plan? (paraphrased)]]></summary></entry><entry><title type="html">NDAs, DUAs in the verification process</title><link href="https://aeadataeditor.github.io/posts/2023-11-01-ndas" rel="alternate" type="text/html" title="NDAs, DUAs in the verification process" /><published>2023-11-01T00:00:00-04:00</published><updated>2023-11-01T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/ndas</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-11-01-ndas"><![CDATA[<p>Toni Whited (EIC of Journal of Financial Economics) had the following question on the <a href="https://twitter.com/toniwhited/status/1718011879480787363">ex-bird site</a>:</p>

<blockquote>
  <p>Econ and finance journals are getting their acts together wrt reproducibility.  A bigger issue now is data acquired via NDAs. I wish it were normal for NDAs to have a clause letting third parties replicate results on an air-gapped machine.</p>

  <p>Don’t know how to make it happen.</p>
</blockquote>

<p>A few thoughts.</p>

<!-- more -->

<h2 id="ndas-with-clauses">NDAs with clauses</h2>

<p>I have started to see researchers incorporate such clauses into NDAs. Very rare, but possible. More generally, certain NDAs allow to add “third parties” to an existing contract - no special clause necessary, but researchers must be aware of the possibility.</p>

<h2 id="ndas-without-clauses">NDAs without clauses</h2>

<p>In some cases, no additional clause is needed. Read the NDA carefully: can you assign a new member of the research team (e.g., a new RA at your co-author’s university) to the contract, with minor hassles (simple notification)? Yes? Then you can probably also assign a journal verifier to the contract! Verifiers can be the “RA” on the contract, and can obtain the data (compliant with any other access restrictions). In many cases, authors have then been able to provide us with a non-publishable extract of the same data, for the duration of the verification process. We can sign a NDA with the authors, if needed, but most are fine with an email promise to delete the data. Our process is outlined <a href="https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data">here</a>.</p>

<h2 id="journal-verifiers-with-access">Journal verifiers with access</h2>

<p>Another thing is that in some cases, as long as both the authors and the verifiers are (separately) subscribers, data may be able to be shared. But caution: not every “subscription” is the same. For instance, when researchers use WRDS data, they cannot directly share the data. In principle, I should be able to access the same data sources - as <a href="https://johnson.library.cornell.edu/database/wharton-research-data-services-wrds/">Cornell is also a subscriber</a>. But WRDS subscriptions have a huge menu of sub-options. The researcher may be able to access WRDS <a href="https://github.com/chrisconlon/CommonOwnerReplication/blob/master/code/1_Download_WRDS_Data.py">via the Python API</a>, but as it turns out, my subscription does not extend to that!<sup id="fnref:conlon"><a href="#fn:conlon" class="footnote" rel="footnote" role="doc-noteref">1</a></sup></p>

<h2 id="journal-verifiers-acquiring-access">Journal verifiers acquiring access</h2>

<p>In some cases, there is a <strong>generalized access mechanism</strong>. Thus, while the researcher cannot share the data with us, because the DUA or NDA does not allow for it, it is relatively straightforward for the journal verifier to obtain access. For instance,</p>

<ul>
  <li><a href="https://psidonline.isr.umich.edu/default.aspx">PSID</a> (see <a href="https://simba.isr.umich.edu/U/CondUse.aspx">Conditions of use</a>)</li>
  <li><a href="https://www.worldvaluessurvey.org/wvs.jsp">World Values Survey</a> (WVS)</li>
  <li><a href="https://dhsprogram.com/">Demographic and Health Surveys</a> (DHS) (note banner at <a href="https://dhsprogram.com/data/dataset_admin/login_main.cfm">Data Download site</a>)</li>
  <li><a href="https://www.diw.de/en/diw_01.c.678568.en/research_data_center_soep.html">German Socio-Economic Panel</a> (SOEP) (see <a href="https://www.diw.de/en/diw_01.c.601584.en/data_access.html#c_741347">Data Access rules</a>)</li>
</ul>

<p>all do not allow for redistribution of the data, even of their “publicly accessible” data.</p>

<blockquote>
  <p>Hint: if there is a login, a checkbox, or something else you need to click on in order to download the data, it is very likely that you cannot simply re-publish (distribute, post) the data (but that is neither a sufficient nor a necessary condition).</p>
</blockquote>

<p>But in all three cases, the journal verifier can obtain access to the data, and verify the replication package.</p>

<p>Some of these mechanisms have easy ways for researchers to make re-acquiring the data easy:</p>

<ul>
  <li>PSID offers both the ability to <a href="https://simba.isr.umich.edu/DC/c.aspx">share “carts”</a> and to deposit extracts in a compliant way at the <a href="">PSID repository</a></li>
  <li>SOEP assigns DOI to datasets, allowing to ask for the exact same dataset. See <a href="https://doi.org/10.5684/soep.v35.1">https://doi.org/10.5684/soep.v35.1</a> for an example.</li>
</ul>

<p>While a bit of a hassle, this does allow journals to obtain the same data. Note that this is not always easy or possible: for instance, if the original author used the SOEP data in Europe, they will have had a different access than my US-based team will have, because non-European users only get access to a 95% sample.</p>

<p>Also, Cornell has so far not been able to agree to the terms of use required to even sign a data use agreement, something about GDPR etc… So what do we do then?</p>

<h2 id="using-third-party-verifiers-with-access">Using third party verifiers with access</h2>

<p>When NDAs or DUAs cannot be quickly adjusted, or no parallel data access exists, one can reach out to other verifiers. The AEA has a <a href="https://www.aeaweb.org/journals/data/policy-third-party">policy</a> on that, and we regularly reach out to folks who we know have access. That would be the case for the SOEP above: reach out to a replicator in Europe (for instance, a fellow Europe-based data editor).</p>

<p>More generally, this will be true for data that have complicated and long-winding access procedures, and where simply it is completely out-of-scope (because illegal) for researchers to provide journals with access to the data. This was the case for the <a href="https://www.casd.eu/en/sources/french-customs-data/">French customs data</a> that we used in the <a href="https://aeadataeditor.github.io/aea-de-guidance/2021-10-28-reproducibility-restricted-france.html">Piveteau (2021) replication</a>. The data are available through <a href="https://www.casd.eu/">CASD</a>, the French data access center, and the <a href="https://www.cascad.tech/">cascad</a> replicators have access to CASD, quickly, on a case-by-case basis. We can reach out to them for access to these data. Sometimes, agency or data custodian staff themselves can help out - we’ve had pilot projects with the German IAB, with the Bureau of Labor Statistics, and with the World Bank. This will not always work - volunteering time may be fine in academia, but is not always feasible when working with government or supra-national agencies.</p>

<p>But back to Toni’s point: in principle, if we applied that principle to the journal-centric process, one solution is to have external referees, selected because they have access to the data, conduct the verification, in accordance with some basic principles.</p>

<h2 id="taking-the-computations-to-the-data-instead-of-the-data-to-my-computer">Taking the computations to the data, instead of the data to “my” computer</h2>

<p>Toni also wanted to “replicate results on an air-gapped machine.” While that specific security protocol almost certainly won’t satisfy many data providers these days (they want encrypted hard drives, secure login processes, etc., and want the whole thing documented), this does also suggest another process: rather than bring the data to “my” computer, take the computation to “their” computer (or some other authorized system). In a few cases, we have been granted (legitimate, documented) computer access to servers that are authorized to access the restricted data, always remaining in compliance with the authors’ data access protocol. We have so far been granted legitimate and documented access to computers at UC San Diego, the NBER, Harvard Business School, and University of Uppsala, to name a few (thank you!). This not only solves the data access problem, in some cases it also solves the computational resource problem - sufficient parallel cores, licensed software, etc. This is different from the third-party verification process, above, because in this case, we (the journal verifiers) access the data, and run the code that the authors provided elsewhere.</p>

<h2 id="the-big-caveat">The big caveat</h2>

<p>Of course, none of the above will work if the original NDA and data access is idiosyncratic. In all of the above processes, a secondary outcome is that we can improve the authors’ description of how <strong>somebody</strong> (not just the editorial folks) can get access to the data, and restrictions limiting this. In some cases, the only possible documentation is “<strong>this will not work for anybody else.</strong>” Getting access to firm-specific data is often heavily dependent on interpersonal relationships, and while that might work to simply extending an NDA, it only works if the original relationship continues to exist. So none of these methods will work in all cases. The fallback is then something that Toni’s journal, and a few other econ journals, but not the AEA (!), require: provide some synthetic or simulated data, that at least allows to assess that the code would in principle run. But at least the fact that access <strong>is</strong> idiosyncratic should be made clear.</p>

<h2 id="some-data-from-us">Some data from us</h2>

<p>So how does this work at the AEA in practice? I pulled some stats today from our tracking system. Over the past 12 months, <a href="https://www.aeaweb.org/journals/forms/data-code-availability">authors have identified</a> <strong>112 times</strong> that they might be able to provide us privately access to the data, through one of the mechanisms above. In <strong>86 cases</strong>, after review of conditions, cost, and availability of resources, we pursued those offers in some fashion. That includes figuring out NDAs or privately shared data. It does not cover when we requested data ourselves from third parties, which happened in <strong>22 cases</strong> (some of those cases overlap). In <strong>84 cases</strong>, one of those methods culminated with us coming to terms with whoever controlled the data, and  obtaining access to the data.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Accessing confidential data as part of the verification process is not easy, but it is possible. Ensuring that others can re-use the data is sometimes easier, especially for researchers in the same field, in others harder, when a special clause in the NDA allowed the journal access, but cannot be extended to arbitrary future researchers. And the process must be allowed to fail, because interesting and illuminating research can be conducted with data that cannot be shared. In fact, an update to one of those NDAs negotiations just hit my inbox as I am writing this, and is likely to fail, due to the data provider not being willing to grant an exception or an extension in line with Toni’s original hope and request. That’s life, and is fine - it will not hold up the rest of the verification process that we are conducting, and will still ultimately lead to the publication of the paper.</p>

<p>I see our goal as (data) editors to make these kind of constraints as clear as possible, for all future readers, for a very long time. After all, somebody might still want to correct the record in 100 years, or review what we knew now. It’s not like those articles are going anywhere, even if the data just might disappear! See one of the first “<strong>data corrections</strong>” I’m aware of, by Irving Fisher, 1911.<sup id="fnref:irving"><a href="#fn:irving" class="footnote" rel="footnote" role="doc-noteref">2</a></sup></p>

<h2 id="additional-readings">Additional readings</h2>

<ul>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/2021-10-28-reproducibility-restricted-france.html">2021 post on example of checking confidential data</a></li>
  <li><a href="https://www.aeaweb.org/journals/data/policy-third-party">AEA policy on third-party replicators</a></li>
  <li><a href="https://aeadataeditor.github.io/aea-de-guidance/sharing-restricted-data">AEA process for obtaining not-for-distribution data</a></li>
  <li>Vilhuber, Lars. 2023. “<a href="https://doi.org/10.1016/j.jeconom.2023.05.001">Reproducibility and transparency versus privacy and confidentiality: Reflections from a data editor</a>, Journal of Econometrics, Volume 235, Issue 2, <a href="https://doi.org/10.1016/j.jeconom.2023.05.001">https://doi.org/10.1016/j.jeconom.2023.05.001</a> (<a href="https://doi.org/10.48550/arXiv.2305.14478">OA version on arXiv</a>)</li>
</ul>

<h2 id="footnotes">Footnotes!</h2>

<div class="footnotes" role="doc-endnotes">
  <ol>
    <li id="fn:conlon">
      <p>We ultimately used a <a href="https://www.aeaweb.org/journals/data/policy-third-party">third-party replicator</a> with access to the Python API to verify the article. The replication package was found to be perfectly reproducible. See <a href="https://doi.org/10.1257/aer.20191302">Conlon, Chris, and Eric So. 2021. “Common Ownership and Corporate Control.” <em>American Economic Review</em>, 111 (3): 1012-48.</a> for the article, and <a href="https://doi.org/10.3886/E120083V1">https://doi.org/10.3886/E120083V1</a> for the replication package. <a href="#fnref:conlon" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
    <li id="fn:irving">
      <p>Fisher, Irving. “‘The Equation of Exchange,’ 1896-1910.” The American Economic Review, vol. 1, no. 2, 1911, pp. 296–305. JSTOR, http://www.jstor.org/stable/1804304. Accessed 1 Nov. 2023. <a href="#fnref:irving" class="reversefootnote" role="doc-backlink">&#8617;</a></p>
    </li>
  </ol>
</div>]]></content><author><name>AEA Data Editor</name></author><category term="NDA" /><category term="DUA" /><category term="confidential" /><summary type="html"><![CDATA[Toni Whited (EIC of Journal of Financial Economics) had the following question on the ex-bird site: Econ and finance journals are getting their acts together wrt reproducibility. A bigger issue now is data acquired via NDAs. I wish it were normal for NDAs to have a clause letting third parties replicate results on an air-gapped machine. Don’t know how to make it happen. A few thoughts.]]></summary></entry><entry><title type="html">RESOLVED - Access to replication packages retrieval and deposit interrupted</title><link href="https://aeadataeditor.github.io/posts/2023-08-29-notice-downtime" rel="alternate" type="text/html" title="RESOLVED - Access to replication packages retrieval and deposit interrupted" /><published>2023-08-29T00:00:00-04:00</published><updated>2023-08-29T00:00:00-04:00</updated><id>https://aeadataeditor.github.io/posts/notice-downtime</id><content type="html" xml:base="https://aeadataeditor.github.io/posts/2023-08-29-notice-downtime"><![CDATA[<blockquote>
  <p>THIS HAS BEEN RESOLVED. Please <a href="https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html">deposit as usual</a>!</p>
</blockquote>

<p>The AEA uses the openICPSR repository for the deposit and dissemination of replication packages. On Sunday, <a href="https://umich.edu/announcements/">Aug 27 2023, the University of Michigan, the home institution for openICPSR, had to take all of their systems offline for an undetermined time period</a>. The AEA Code and Data Repository is therefore not accessible at this time, for both authors seeking to deposit their required replication package, and for interested readers to obtain published replication packages. A few operational notes from us follow.</p>

<!-- more -->

<p><img src="/images/umich-down-20230829.png" alt="Screenshot of Umich website" /></p>

<h2 id="for-depositors">For depositors</h2>

<p>Authors who just received a conditional acceptance from an AEA journal are required to deposit their replication package at openICPSR. New depositors will receive a message with temporary instructions (see below). Authors who received their notification in recent weeks, and who are still working on completing their deposit, will also be contacted.</p>

<blockquote>
  <p>“The deposit of replication packages at openICPSR is temporarily interrupted (see https://umich.edu/announcements/). As a temporary measure, you can satisfy your deposit requirement by following these instructions:</p>

  <ul>
    <li>create a ZIP file of your replication package, as you would deposit it on openICPSR. <strong>DO NOT INCLUDE ANY CONFIDENTIAL DATA.</strong></li>
    <li>name the ZIP file “{manuscript number}.zip” (e.g., “AER-2023-0000.zip”)</li>
    <li>upload it at the URL (provided))</li>
  </ul>

  <p>The temporary upload URL is xxxxx. It will only be open as a long as the openICPSR website is inaccessible. Once openICPSR is back online, you will need to complete the normal upload process as outlined at https://aeadataeditor.github.io/aea-de-guidance/data-deposit-aea.html.
“</p>
</blockquote>

<p>The URL will be contained in the email message that depositors will receive.</p>

<p>IMPORTANT: This only delays, but does not replace the usual deposit process. Authors will ultimately still need to complete the deposit, once openICPSR is back online.</p>

<h2 id="for-interested-readers">For interested readers</h2>

<p>Unfortunately, there is no short-term replacement for access to published replication packages. ICPSR has a robust preservation strategy, and we expect no long-term impact on availability of replication packages. We hope that they are able to resolve the issues affecting their network as soon as possible.</p>

<h2 id="any-concerns">Any concerns</h2>

<p>If you have any concerns regarding a specific replication package, please contact the Data Editor by email.</p>]]></content><author><name>AEA Data Editor</name></author><category term="openICPSR" /><category term="problem" /><category term="notice" /><summary type="html"><![CDATA[THIS HAS BEEN RESOLVED. Please deposit as usual! The AEA uses the openICPSR repository for the deposit and dissemination of replication packages. On Sunday, Aug 27 2023, the University of Michigan, the home institution for openICPSR, had to take all of their systems offline for an undetermined time period. The AEA Code and Data Repository is therefore not accessible at this time, for both authors seeking to deposit their required replication package, and for interested readers to obtain published replication packages. A few operational notes from us follow.]]></summary></entry></feed>